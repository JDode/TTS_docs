
<!-- saved from url=(0099)http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS02/DAY06/CASE/01/index.html -->
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>CASE</title>
    
    <script type="text/javascript" src="./CASE_files/jquery.min.js">
    </script>
    <script type="text/javascript" src="./CASE_files/jquery.snippet.js">
    </script>
    <script type="text/javascript" src="./CASE_files/main.js">
    </script>
    <link type="text/css" href="./CASE_files/index.css" rel="Stylesheet">
    <link type="text/css" href="./CASE_files/jquery.snippet.css" rel="Stylesheet">
  </head><style type="text/css" id="9447765062"></style>
  <body>
    <div class="source_style_case">
      <a name="page_top_case" id="top_anchor">
      </a><a id="link_top" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS02/DAY06/CASE/01/index.html#page_top_case">Top</a>
      <h1>JAVA SPRINGMYBATIS02 UNIT06</h1>
      <ol class="index">
        <li>
          <a href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS02/DAY06/CASE/01/index.html#case1">Spring声明式事务-注解应用</a>
        </li>
        <li>
          <a href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS02/DAY06/CASE/01/index.html#case2">Spring声明式事务-XML配置</a>
        </li>
        <li>
          <a href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS02/DAY06/CASE/01/index.html#case3">Spring声明式事务-回滚机制</a>
        </li>
        <li>
          <a href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS02/DAY06/CASE/01/index.html#case4">RESTful应用案例</a>
        </li>
      </ol>
      <a name="case1">
      </a>
      <h2>1 Spring声明式事务-注解应用</h2>
      <h3>1.1 问题</h3>
      <p>使用Spring注解实现声明式事务，管理Controller中各业务方法的事务。</p>
      <h3>1.2 方案</h3>
      <p>Spring事务注解使用步骤：</p>
      <h3>1.3 步骤</h3>
      <p>实现此案例需要按照如下步骤进行。</p>
      <p class="number">步骤一：测试未管理事务的情况</p>
      <p>复制项目SpringUnit05，创建新项目SpringUnit06。</p>
      <p>在EmpController中，增加批量添加员工的方法，并模拟实现，代码如下：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS02/DAY06/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS02/DAY06/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS02/DAY06/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li>package com<span class="sh_symbol">.</span>tarena<span class="sh_symbol">.</span>controller<span class="sh_symbol">;</span></li><li><span style="display:none;">&nbsp;</span></li><li>import javax<span class="sh_symbol">.</span>annotation<span class="sh_symbol">.</span>Resource<span class="sh_symbol">;</span></li><li>import org<span class="sh_symbol">.</span>springframework<span class="sh_symbol">.</span>stereotype<span class="sh_symbol">.</span>Controller<span class="sh_symbol">;</span></li><li>import org<span class="sh_symbol">.</span>springframework<span class="sh_symbol">.</span>transaction<span class="sh_symbol">.</span>annotation<span class="sh_symbol">.</span>Transactional<span class="sh_symbol">;</span></li><li>import org<span class="sh_symbol">.</span>springframework<span class="sh_symbol">.</span>web<span class="sh_symbol">.</span>bind<span class="sh_symbol">.</span>annotation<span class="sh_symbol">.</span>RequestMapping<span class="sh_symbol">;</span></li><li>import com<span class="sh_symbol">.</span>tarena<span class="sh_symbol">.</span>dao<span class="sh_symbol">.</span>EmpDao<span class="sh_symbol">;</span></li><li>import com<span class="sh_symbol">.</span>tarena<span class="sh_symbol">.</span>entity<span class="sh_symbol">.</span>Emp<span class="sh_symbol">;</span></li><li><span style="display:none;">&nbsp;</span></li><li>@Controller</li><li>@<span class="sh_function">RequestMapping</span><span class="sh_symbol">(</span><span class="sh_string">"/emp"</span><span class="sh_symbol">)</span></li><li><span class="sh_keyword">public</span> <span class="sh_keyword">class</span> EmpController <span class="sh_cbracket">{</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;</li><li class="bold_code">&nbsp;&nbsp;&nbsp;&nbsp;@Resource</li><li class="bold_code">&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">private</span> EmpDao empDao<span class="sh_symbol">;</span></li><li><span style="display:none;">&nbsp;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_comment">//其他方法略</span></li><li><span style="display:none;">&nbsp;</span></li><li class="bold_code">&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_comment">/**</span></li><li class="bold_code"><span class="sh_comment">&nbsp;&nbsp;&nbsp;&nbsp; * 模拟批量添加员工</span></li><li class="bold_code"><span class="sh_comment">&nbsp;&nbsp;&nbsp;&nbsp; */</span></li><li class="bold_code">&nbsp;&nbsp;&nbsp;&nbsp;@<span class="sh_function">RequestMapping</span><span class="sh_symbol">(</span><span class="sh_string">"/addEmps.do"</span><span class="sh_symbol">)</span></li><li class="bold_code">&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">public</span> <span class="sh_predef_func">String</span> <span class="sh_function">addBatch</span><span class="sh_symbol">()</span> <span class="sh_cbracket">{</span></li><li class="bold_code">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_comment">// 插入第一个员工</span></li><li class="bold_code">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Emp e1 <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">Emp</span><span class="sh_symbol">();</span></li><li class="bold_code">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;e1<span class="sh_symbol">.</span><span class="sh_function">setEname</span><span class="sh_symbol">(</span><span class="sh_string">"刘备"</span><span class="sh_symbol">);</span></li><li class="bold_code">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;e1<span class="sh_symbol">.</span><span class="sh_function">setJob</span><span class="sh_symbol">(</span><span class="sh_string">"皇叔"</span><span class="sh_symbol">);</span></li><li class="bold_code">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;e1<span class="sh_symbol">.</span><span class="sh_function">setSal</span><span class="sh_symbol">(</span><span class="sh_number">1000.0</span><span class="sh_symbol">);</span></li><li class="bold_code">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;e1<span class="sh_symbol">.</span><span class="sh_function">setEmpno</span><span class="sh_symbol">(</span><span class="sh_number">10</span><span class="sh_symbol">);</span></li><li class="bold_code">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;empDao<span class="sh_symbol">.</span><span class="sh_function">save</span><span class="sh_symbol">(</span>e1<span class="sh_symbol">);</span></li><li class="bold_code">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</li><li class="bold_code">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_comment">// 模拟异常</span></li><li class="bold_code">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Integer<span class="sh_symbol">.</span><span class="sh_function">valueOf</span><span class="sh_symbol">(</span><span class="sh_string">"abc"</span><span class="sh_symbol">);</span> <span class="sh_comment">//ClassCastException</span></li><li class="bold_code">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</li><li class="bold_code">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_comment">// 插入第二个员工</span></li><li class="bold_code">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Emp e2 <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">Emp</span><span class="sh_symbol">();</span></li><li class="bold_code">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;e2<span class="sh_symbol">.</span><span class="sh_function">setEname</span><span class="sh_symbol">(</span><span class="sh_string">"关羽"</span><span class="sh_symbol">);</span></li><li class="bold_code">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;e2<span class="sh_symbol">.</span><span class="sh_function">setJob</span><span class="sh_symbol">(</span><span class="sh_string">"候"</span><span class="sh_symbol">);</span></li><li class="bold_code">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;e2<span class="sh_symbol">.</span><span class="sh_function">setSal</span><span class="sh_symbol">(</span><span class="sh_number">1000.0</span><span class="sh_symbol">);</span></li><li class="bold_code">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;e2<span class="sh_symbol">.</span><span class="sh_function">setEmpno</span><span class="sh_symbol">(</span><span class="sh_number">10</span><span class="sh_symbol">);</span></li><li class="bold_code">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;empDao<span class="sh_symbol">.</span><span class="sh_function">save</span><span class="sh_symbol">(</span>e2<span class="sh_symbol">);</span></li><li class="bold_code">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</li><li class="bold_code">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">return</span> <span class="sh_string">"redirect:findEmp.do"</span><span class="sh_symbol">;</span></li><li class="bold_code">&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_cbracket">}</span></li><li><span style="display:none;">&nbsp;</span></li><li><span class="sh_cbracket">}</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">package com.tarena.controller;

import javax.annotation.Resource;
import org.springframework.stereotype.Controller;
import org.springframework.transaction.annotation.Transactional;
import org.springframework.web.bind.annotation.RequestMapping;
import com.tarena.dao.EmpDao;
import com.tarena.entity.Emp;

@Controller
@RequestMapping("/emp")
public class EmpController {
	
#cold_bold	@Resource
#cold_bold	private EmpDao empDao;

	//其他方法略

#cold_bold	/**
#cold_bold	 * 模拟批量添加员工
#cold_bold	 */
#cold_bold	@RequestMapping("/addEmps.do")
#cold_bold	public String addBatch() {
#cold_bold		// 插入第一个员工
#cold_bold		Emp e1 = new Emp();
#cold_bold		e1.setEname("刘备");
#cold_bold		e1.setJob("皇叔");
#cold_bold		e1.setSal(1000.0);
#cold_bold		e1.setEmpno(10);
#cold_bold		empDao.save(e1);
#cold_bold		
#cold_bold		// 模拟异常
#cold_bold		Integer.valueOf("abc"); //ClassCastException
#cold_bold		
#cold_bold		// 插入第二个员工
#cold_bold		Emp e2 = new Emp();
#cold_bold		e2.setEname("关羽");
#cold_bold		e2.setJob("候");
#cold_bold		e2.setSal(1000.0);
#cold_bold		e2.setEmpno(10);
#cold_bold		empDao.save(e2);
#cold_bold		
#cold_bold		return "redirect:findEmp.do";
#cold_bold	}

}
</pre></div></div>
      <p>在TestEmpController中，增加测试方法，测试批量添加员工，代码如下：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS02/DAY06/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS02/DAY06/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS02/DAY06/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li>package com<span class="sh_symbol">.</span>tarena<span class="sh_symbol">.</span>test<span class="sh_symbol">;</span></li><li><span style="display:none;">&nbsp;</span></li><li>import org<span class="sh_symbol">.</span>junit<span class="sh_symbol">.</span>Test<span class="sh_symbol">;</span></li><li>import org<span class="sh_symbol">.</span>springframework<span class="sh_symbol">.</span>context<span class="sh_symbol">.</span>ApplicationContext<span class="sh_symbol">;</span></li><li>import org<span class="sh_symbol">.</span>springframework<span class="sh_symbol">.</span>context<span class="sh_symbol">.</span>support<span class="sh_symbol">.</span>ClassPathXmlApplicationContext<span class="sh_symbol">;</span></li><li>import com<span class="sh_symbol">.</span>tarena<span class="sh_symbol">.</span>controller<span class="sh_symbol">.</span>EmpController<span class="sh_symbol">;</span></li><li><span style="display:none;">&nbsp;</span></li><li><span class="sh_keyword">public</span> <span class="sh_keyword">class</span> TestEmpController <span class="sh_cbracket">{</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;</li><li><span class="sh_comment">//其他方法略</span></li><li><span style="display:none;">&nbsp;</span></li><li class="bold_code">&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_comment">/**</span></li><li class="bold_code"><span class="sh_comment">&nbsp;&nbsp;&nbsp;&nbsp; * 测试批量添加员工</span></li><li class="bold_code"><span class="sh_comment">&nbsp;&nbsp;&nbsp;&nbsp; */</span></li><li class="bold_code">&nbsp;&nbsp;&nbsp;&nbsp;@Test</li><li class="bold_code">&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">public</span> void <span class="sh_function">test2</span><span class="sh_symbol">()</span> <span class="sh_keyword">throws</span> ClassNotFoundException <span class="sh_cbracket">{</span></li><li class="bold_code">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ApplicationContext ctx <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">ClassPathXmlApplicationContext</span><span class="sh_symbol">(</span></li><li class="bold_code">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_string">"applicationContext.xml"</span><span class="sh_symbol">);</span></li><li class="bold_code">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;EmpController ctl <span class="sh_symbol">=</span> ctx<span class="sh_symbol">.</span><span class="sh_function">getBean</span><span class="sh_symbol">(</span>EmpController<span class="sh_symbol">.</span><span class="sh_keyword">class</span><span class="sh_symbol">);</span></li><li class="bold_code">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ctl<span class="sh_symbol">.</span><span class="sh_function">addBatch</span><span class="sh_symbol">();</span></li><li class="bold_code">&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_cbracket">}</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;</li><li><span class="sh_cbracket">}</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">package com.tarena.test;

import org.junit.Test;
import org.springframework.context.ApplicationContext;
import org.springframework.context.support.ClassPathXmlApplicationContext;
import com.tarena.controller.EmpController;

public class TestEmpController {
	
//其他方法略

#cold_bold	/**
#cold_bold	 * 测试批量添加员工
#cold_bold	 */
#cold_bold	@Test
#cold_bold	public void test2() throws ClassNotFoundException {
#cold_bold		ApplicationContext ctx = new ClassPathXmlApplicationContext(
#cold_bold				"applicationContext.xml");
#cold_bold		EmpController ctl = ctx.getBean(EmpController.class);
#cold_bold		ctl.addBatch();
#cold_bold	}
	
}
</pre></div></div>
      <p>没有执行该测试方法前，员工表中的数据如下图：</p>
      <div class="image">
        <img src="./CASE_files/image001.png">
        <p>图-1</p>
      </div>
      <p>执行该测试方法后，员工表中的数据如下图：</p>
      <div class="image">
        <img src="./CASE_files/image002.png">
        <p>图-2</p>
      </div>
      <p>可见，员工刘备添加成功。但EmpController.addBatch()方法是业务方法，体现了完整的业务逻辑，发生异常时应该整个业务失败，而不是一部分成功一部分失败，因此添加刘备成功是不符合要求的，应该引入事务管理机制来解决此问题。</p>
      <p class="number">步骤二：声明事务组件</p>
      <p>在applicationContext.xml中声明事务组件，关键代码如下：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS02/DAY06/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS02/DAY06/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS02/DAY06/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li class="bold_code">&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;!--</span> 声明事务管理组件 <span class="sh_symbol">--&gt;</span></li><li class="bold_code">&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>bean id<span class="sh_symbol">=</span><span class="sh_string">"txManager"</span> </li><li class="bold_code">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">class</span><span class="sh_symbol">=</span><span class="sh_string">"org.springframework.jdbc.datasource.DataSourceTransactionManager"</span><span class="sh_symbol">&gt;</span> </li><li class="bold_code">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>property name<span class="sh_symbol">=</span><span class="sh_string">"dataSource"</span> ref<span class="sh_symbol">=</span><span class="sh_string">"ds"</span><span class="sh_symbol">/&gt;</span> </li><li class="bold_code">&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>bean<span class="sh_symbol">&gt;</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">#cold_bold	&lt;!-- 声明事务管理组件 --&gt;
#cold_bold	&lt;bean id="txManager" 
#cold_bold		class="org.springframework.jdbc.datasource.DataSourceTransactionManager"&gt; 
#cold_bold		&lt;property name="dataSource" ref="ds"/&gt; 
#cold_bold	&lt;/bean&gt;
</pre></div></div>
      <p class="number">步骤三：开启事务注解扫描</p>
      <p>在applicationContext.xml中，开启事务注解扫描，关键代码如下：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS02/DAY06/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS02/DAY06/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS02/DAY06/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;!--</span> 声明事务管理组件 <span class="sh_symbol">--&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>bean id<span class="sh_symbol">=</span><span class="sh_string">"txManager"</span> </li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">class</span><span class="sh_symbol">=</span><span class="sh_string">"org.springframework.jdbc.datasource.DataSourceTransactionManager"</span><span class="sh_symbol">&gt;</span> </li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>property name<span class="sh_symbol">=</span><span class="sh_string">"dataSource"</span> ref<span class="sh_symbol">=</span><span class="sh_string">"ds"</span><span class="sh_symbol">/&gt;</span> </li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>bean<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;</li><li class="bold_code">&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;!--</span> 开启事务注解扫描 <span class="sh_symbol">--&gt;</span></li><li class="bold_code">&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>tx<span class="sh_symbol">:</span>annotation<span class="sh_symbol">-</span>driven </li><li class="bold_code">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;transaction<span class="sh_symbol">-</span>manager<span class="sh_symbol">=</span><span class="sh_string">"txManager"</span> proxy<span class="sh_symbol">-</span>target<span class="sh_symbol">-</span><span class="sh_keyword">class</span><span class="sh_symbol">=</span><span class="sh_string">"true"</span><span class="sh_symbol">/&gt;</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">	&lt;!-- 声明事务管理组件 --&gt;
	&lt;bean id="txManager" 
		class="org.springframework.jdbc.datasource.DataSourceTransactionManager"&gt; 
		&lt;property name="dataSource" ref="ds"/&gt; 
	&lt;/bean&gt;
	
#cold_bold	&lt;!-- 开启事务注解扫描 --&gt;
#cold_bold	&lt;tx:annotation-driven 
#cold_bold		transaction-manager="txManager" proxy-target-class="true"/&gt;
</pre></div></div>
      <p class="number">步骤四：使用注解标识类/方法</p>
      <p>在EmpController中，使用注解对该方法启用事务管理，代码如下：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS02/DAY06/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS02/DAY06/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS02/DAY06/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li>package com<span class="sh_symbol">.</span>tarena<span class="sh_symbol">.</span>controller<span class="sh_symbol">;</span></li><li><span style="display:none;">&nbsp;</span></li><li>import javax<span class="sh_symbol">.</span>annotation<span class="sh_symbol">.</span>Resource<span class="sh_symbol">;</span></li><li>import org<span class="sh_symbol">.</span>springframework<span class="sh_symbol">.</span>stereotype<span class="sh_symbol">.</span>Controller<span class="sh_symbol">;</span></li><li>import org<span class="sh_symbol">.</span>springframework<span class="sh_symbol">.</span>transaction<span class="sh_symbol">.</span>annotation<span class="sh_symbol">.</span>Transactional<span class="sh_symbol">;</span></li><li>import org<span class="sh_symbol">.</span>springframework<span class="sh_symbol">.</span>web<span class="sh_symbol">.</span>bind<span class="sh_symbol">.</span>annotation<span class="sh_symbol">.</span>RequestMapping<span class="sh_symbol">;</span></li><li>import com<span class="sh_symbol">.</span>tarena<span class="sh_symbol">.</span>dao<span class="sh_symbol">.</span>EmpDao<span class="sh_symbol">;</span></li><li>import com<span class="sh_symbol">.</span>tarena<span class="sh_symbol">.</span>entity<span class="sh_symbol">.</span>Emp<span class="sh_symbol">;</span></li><li><span style="display:none;">&nbsp;</span></li><li>@Controller</li><li>@<span class="sh_function">RequestMapping</span><span class="sh_symbol">(</span><span class="sh_string">"/emp"</span><span class="sh_symbol">)</span></li><li class="bold_code">@Transactional</li><li><span class="sh_keyword">public</span> <span class="sh_keyword">class</span> EmpController <span class="sh_cbracket">{</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;@Resource</li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">private</span> EmpDao empDao<span class="sh_symbol">;</span></li><li><span style="display:none;">&nbsp;</span></li><li><span class="sh_comment">//其他方法略</span></li><li><span style="display:none;">&nbsp;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_comment">/**</span></li><li><span class="sh_comment">&nbsp;&nbsp;&nbsp;&nbsp; * 模拟批量添加员工</span></li><li><span class="sh_comment">&nbsp;&nbsp;&nbsp;&nbsp; */</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;@<span class="sh_function">RequestMapping</span><span class="sh_symbol">(</span><span class="sh_string">"/addEmps.do"</span><span class="sh_symbol">)</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">public</span> <span class="sh_predef_func">String</span> <span class="sh_function">addBatch</span><span class="sh_symbol">()</span> <span class="sh_cbracket">{</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_comment">// 插入第一个员工</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Emp e1 <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">Emp</span><span class="sh_symbol">();</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;e1<span class="sh_symbol">.</span><span class="sh_function">setEname</span><span class="sh_symbol">(</span><span class="sh_string">"刘备"</span><span class="sh_symbol">);</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;e1<span class="sh_symbol">.</span><span class="sh_function">setJob</span><span class="sh_symbol">(</span><span class="sh_string">"皇叔"</span><span class="sh_symbol">);</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;e1<span class="sh_symbol">.</span><span class="sh_function">setSal</span><span class="sh_symbol">(</span><span class="sh_number">1000.0</span><span class="sh_symbol">);</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;e1<span class="sh_symbol">.</span><span class="sh_function">setEmpno</span><span class="sh_symbol">(</span><span class="sh_number">10</span><span class="sh_symbol">);</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;empDao<span class="sh_symbol">.</span><span class="sh_function">save</span><span class="sh_symbol">(</span>e1<span class="sh_symbol">);</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_comment">// 模拟异常</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Integer<span class="sh_symbol">.</span><span class="sh_function">valueOf</span><span class="sh_symbol">(</span><span class="sh_string">"abc"</span><span class="sh_symbol">);</span> <span class="sh_comment">//ClassCastException</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_comment">// 插入第二个员工</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Emp e2 <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">Emp</span><span class="sh_symbol">();</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;e2<span class="sh_symbol">.</span><span class="sh_function">setEname</span><span class="sh_symbol">(</span><span class="sh_string">"关羽"</span><span class="sh_symbol">);</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;e2<span class="sh_symbol">.</span><span class="sh_function">setJob</span><span class="sh_symbol">(</span><span class="sh_string">"候"</span><span class="sh_symbol">);</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;e2<span class="sh_symbol">.</span><span class="sh_function">setSal</span><span class="sh_symbol">(</span><span class="sh_number">1000.0</span><span class="sh_symbol">);</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;e2<span class="sh_symbol">.</span><span class="sh_function">setEmpno</span><span class="sh_symbol">(</span><span class="sh_number">10</span><span class="sh_symbol">);</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;empDao<span class="sh_symbol">.</span><span class="sh_function">save</span><span class="sh_symbol">(</span>e2<span class="sh_symbol">);</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">return</span> <span class="sh_string">"redirect:findEmp.do"</span><span class="sh_symbol">;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_cbracket">}</span></li><li><span style="display:none;">&nbsp;</span></li><li><span class="sh_cbracket">}</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">package com.tarena.controller;

import javax.annotation.Resource;
import org.springframework.stereotype.Controller;
import org.springframework.transaction.annotation.Transactional;
import org.springframework.web.bind.annotation.RequestMapping;
import com.tarena.dao.EmpDao;
import com.tarena.entity.Emp;

@Controller
@RequestMapping("/emp")
#cold_bold@Transactional
public class EmpController {
	
	@Resource
	private EmpDao empDao;

//其他方法略

	/**
	 * 模拟批量添加员工
	 */
	@RequestMapping("/addEmps.do")
	public String addBatch() {
		// 插入第一个员工
		Emp e1 = new Emp();
		e1.setEname("刘备");
		e1.setJob("皇叔");
		e1.setSal(1000.0);
		e1.setEmpno(10);
		empDao.save(e1);
		
		// 模拟异常
		Integer.valueOf("abc"); //ClassCastException
				
		// 插入第二个员工
		Emp e2 = new Emp();
		e2.setEname("关羽");
		e2.setJob("候");
		e2.setSal(1000.0);
		e2.setEmpno(10);
		empDao.save(e2);
		
		return "redirect:findEmp.do";
	}

}
</pre></div></div>
      <p class="number">步骤五：测试</p>
      <p>手动删除员工表中的刘备，执行测试方法TestEmpController.test2()，然后查询员工表数据如下图：</p>
      <div class="image">
        <img src="./CASE_files/image003.png">
        <p>图-3</p>
      </div>
      <p>可见，在引入了事务管理机制后，业务方法发生异常时，由于事务回滚，所以没有成功插入员工刘备，从而保证了业务的完整性。</p>
      <h3>1.4 完整代码</h3>
      <p>本案例的完整代码如下所示：</p>
      <p>EmpController完整代码如下：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap" style="display: none;"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS02/DAY06/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS02/DAY06/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS02/DAY06/CASE/01/index.html#">pop-up</a></pre></div><pre class="hide sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li>package com<span class="sh_symbol">.</span>tarena<span class="sh_symbol">.</span>controller<span class="sh_symbol">;</span></li><li><span style="display:none;">&nbsp;</span></li><li>import javax<span class="sh_symbol">.</span>annotation<span class="sh_symbol">.</span>Resource<span class="sh_symbol">;</span></li><li>import org<span class="sh_symbol">.</span>springframework<span class="sh_symbol">.</span>stereotype<span class="sh_symbol">.</span>Controller<span class="sh_symbol">;</span></li><li>import org<span class="sh_symbol">.</span>springframework<span class="sh_symbol">.</span>transaction<span class="sh_symbol">.</span>annotation<span class="sh_symbol">.</span>Transactional<span class="sh_symbol">;</span></li><li>import org<span class="sh_symbol">.</span>springframework<span class="sh_symbol">.</span>web<span class="sh_symbol">.</span>bind<span class="sh_symbol">.</span>annotation<span class="sh_symbol">.</span>RequestMapping<span class="sh_symbol">;</span></li><li>import com<span class="sh_symbol">.</span>tarena<span class="sh_symbol">.</span>dao<span class="sh_symbol">.</span>EmpDao<span class="sh_symbol">;</span></li><li>import com<span class="sh_symbol">.</span>tarena<span class="sh_symbol">.</span>entity<span class="sh_symbol">.</span>Emp<span class="sh_symbol">;</span></li><li><span style="display:none;">&nbsp;</span></li><li>@Controller</li><li>@<span class="sh_function">RequestMapping</span><span class="sh_symbol">(</span><span class="sh_string">"/emp"</span><span class="sh_symbol">)</span></li><li>@Transactional</li><li><span class="sh_keyword">public</span> <span class="sh_keyword">class</span> EmpController <span class="sh_cbracket">{</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;@Resource</li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">private</span> EmpDao empDao<span class="sh_symbol">;</span></li><li><span style="display:none;">&nbsp;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_comment">/**</span></li><li><span class="sh_comment">&nbsp;&nbsp;&nbsp;&nbsp; * 查询员工</span></li><li><span class="sh_comment">&nbsp;&nbsp;&nbsp;&nbsp; */</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;@<span class="sh_function">RequestMapping</span><span class="sh_symbol">(</span><span class="sh_string">"/findEmp.do"</span><span class="sh_symbol">)</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;@<span class="sh_function">Transactional</span><span class="sh_symbol">(</span>readOnly<span class="sh_symbol">=</span><span class="sh_keyword">true</span><span class="sh_symbol">)</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">public</span> <span class="sh_predef_func">String</span> <span class="sh_function">find</span><span class="sh_symbol">()</span> <span class="sh_cbracket">{</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_comment">// 模拟查询员工数据</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System<span class="sh_symbol">.</span>out<span class="sh_symbol">.</span><span class="sh_function">println</span><span class="sh_symbol">(</span><span class="sh_string">"查询员工数据，发送至列表页面."</span><span class="sh_symbol">);</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_comment">// 制造一个异常，便于测试异常通知</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Integer<span class="sh_symbol">.</span><span class="sh_function">valueOf</span><span class="sh_symbol">(</span><span class="sh_string">"abc"</span><span class="sh_symbol">);</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">return</span> <span class="sh_string">"emp/emp_list.jsp"</span><span class="sh_symbol">;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_cbracket">}</span></li><li><span style="display:none;">&nbsp;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_comment">/**</span></li><li><span class="sh_comment">&nbsp;&nbsp;&nbsp;&nbsp; * 模拟批量添加员工</span></li><li><span class="sh_comment">&nbsp;&nbsp;&nbsp;&nbsp; */</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;@<span class="sh_function">RequestMapping</span><span class="sh_symbol">(</span><span class="sh_string">"/addEmps.do"</span><span class="sh_symbol">)</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">public</span> <span class="sh_predef_func">String</span> <span class="sh_function">addBatch</span><span class="sh_symbol">()</span> <span class="sh_cbracket">{</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_comment">// 插入第一个员工</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Emp e1 <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">Emp</span><span class="sh_symbol">();</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;e1<span class="sh_symbol">.</span><span class="sh_function">setEname</span><span class="sh_symbol">(</span><span class="sh_string">"刘备"</span><span class="sh_symbol">);</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;e1<span class="sh_symbol">.</span><span class="sh_function">setJob</span><span class="sh_symbol">(</span><span class="sh_string">"皇叔"</span><span class="sh_symbol">);</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;e1<span class="sh_symbol">.</span><span class="sh_function">setSal</span><span class="sh_symbol">(</span><span class="sh_number">1000.0</span><span class="sh_symbol">);</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;e1<span class="sh_symbol">.</span><span class="sh_function">setEmpno</span><span class="sh_symbol">(</span><span class="sh_number">10</span><span class="sh_symbol">);</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;empDao<span class="sh_symbol">.</span><span class="sh_function">save</span><span class="sh_symbol">(</span>e1<span class="sh_symbol">);</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_comment">// 模拟异常</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Integer<span class="sh_symbol">.</span><span class="sh_function">valueOf</span><span class="sh_symbol">(</span><span class="sh_string">"abc"</span><span class="sh_symbol">);</span> <span class="sh_comment">//ClassCastException</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_comment">// 插入第二个员工</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Emp e2 <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">Emp</span><span class="sh_symbol">();</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;e2<span class="sh_symbol">.</span><span class="sh_function">setEname</span><span class="sh_symbol">(</span><span class="sh_string">"关羽"</span><span class="sh_symbol">);</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;e2<span class="sh_symbol">.</span><span class="sh_function">setJob</span><span class="sh_symbol">(</span><span class="sh_string">"候"</span><span class="sh_symbol">);</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;e2<span class="sh_symbol">.</span><span class="sh_function">setSal</span><span class="sh_symbol">(</span><span class="sh_number">1000.0</span><span class="sh_symbol">);</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;e2<span class="sh_symbol">.</span><span class="sh_function">setEmpno</span><span class="sh_symbol">(</span><span class="sh_number">10</span><span class="sh_symbol">);</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;empDao<span class="sh_symbol">.</span><span class="sh_function">save</span><span class="sh_symbol">(</span>e2<span class="sh_symbol">);</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">return</span> <span class="sh_string">"redirect:findEmp.do"</span><span class="sh_symbol">;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_cbracket">}</span></li><li><span style="display:none;">&nbsp;</span></li><li><span class="sh_cbracket">}</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">package com.tarena.controller;

import javax.annotation.Resource;
import org.springframework.stereotype.Controller;
import org.springframework.transaction.annotation.Transactional;
import org.springframework.web.bind.annotation.RequestMapping;
import com.tarena.dao.EmpDao;
import com.tarena.entity.Emp;

@Controller
@RequestMapping("/emp")
@Transactional
public class EmpController {
	
	@Resource
	private EmpDao empDao;

	/**
	 * 查询员工
	 */
	@RequestMapping("/findEmp.do")
	@Transactional(readOnly=true)
	public String find() {
		// 模拟查询员工数据
		System.out.println("查询员工数据，发送至列表页面.");
		// 制造一个异常，便于测试异常通知
		Integer.valueOf("abc");
		return "emp/emp_list.jsp";
	}

	/**
	 * 模拟批量添加员工
	 */
	@RequestMapping("/addEmps.do")
	public String addBatch() {
		// 插入第一个员工
		Emp e1 = new Emp();
		e1.setEname("刘备");
		e1.setJob("皇叔");
		e1.setSal(1000.0);
		e1.setEmpno(10);
		empDao.save(e1);
		
		// 模拟异常
		Integer.valueOf("abc"); //ClassCastException
		
		// 插入第二个员工
		Emp e2 = new Emp();
		e2.setEname("关羽");
		e2.setJob("候");
		e2.setSal(1000.0);
		e2.setEmpno(10);
		empDao.save(e2);
		
		return "redirect:findEmp.do";
	}

}
</pre><div class="sh_sourceCode snippet-hide"><pre><a href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS02/DAY06/CASE/01/index.html#" class="snippet-revealed snippet-toggle sh_url">隐藏</a></pre></div></div><div class="snippet-reveal sh_acid snippet-wrap"><pre class="sh_sourceCode"><a href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS02/DAY06/CASE/01/index.html#" class="snippet-toggle sh_url">代码</a></pre></div></div>
      <p>TestEmpController完整代码如下：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap" style="display: none;"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS02/DAY06/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS02/DAY06/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS02/DAY06/CASE/01/index.html#">pop-up</a></pre></div><pre class="hide sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li>package com<span class="sh_symbol">.</span>tarena<span class="sh_symbol">.</span>test<span class="sh_symbol">;</span></li><li><span style="display:none;">&nbsp;</span></li><li>import org<span class="sh_symbol">.</span>junit<span class="sh_symbol">.</span>Test<span class="sh_symbol">;</span></li><li>import org<span class="sh_symbol">.</span>springframework<span class="sh_symbol">.</span>context<span class="sh_symbol">.</span>ApplicationContext<span class="sh_symbol">;</span></li><li>import org<span class="sh_symbol">.</span>springframework<span class="sh_symbol">.</span>context<span class="sh_symbol">.</span>support<span class="sh_symbol">.</span>ClassPathXmlApplicationContext<span class="sh_symbol">;</span></li><li>import com<span class="sh_symbol">.</span>tarena<span class="sh_symbol">.</span>controller<span class="sh_symbol">.</span>EmpController<span class="sh_symbol">;</span></li><li><span style="display:none;">&nbsp;</span></li><li><span class="sh_keyword">public</span> <span class="sh_keyword">class</span> TestEmpController <span class="sh_cbracket">{</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_comment">/**</span></li><li><span class="sh_comment">&nbsp;&nbsp;&nbsp;&nbsp; * 测试查询员工</span></li><li><span class="sh_comment">&nbsp;&nbsp;&nbsp;&nbsp; */</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;@Test</li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">public</span> void <span class="sh_function">test1</span><span class="sh_symbol">()</span> <span class="sh_cbracket">{</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ApplicationContext ctx <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">ClassPathXmlApplicationContext</span><span class="sh_symbol">(</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_string">"applicationContext.xml"</span><span class="sh_symbol">);</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;EmpController ctl <span class="sh_symbol">=</span> ctx<span class="sh_symbol">.</span><span class="sh_function">getBean</span><span class="sh_symbol">(</span>EmpController<span class="sh_symbol">.</span><span class="sh_keyword">class</span><span class="sh_symbol">);</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ctl<span class="sh_symbol">.</span><span class="sh_function">find</span><span class="sh_symbol">();</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_cbracket">}</span></li><li><span style="display:none;">&nbsp;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_comment">/**</span></li><li><span class="sh_comment">&nbsp;&nbsp;&nbsp;&nbsp; * 测试批量添加员工</span></li><li><span class="sh_comment">&nbsp;&nbsp;&nbsp;&nbsp; */</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;@Test</li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">public</span> void <span class="sh_function">test2</span><span class="sh_symbol">()</span> <span class="sh_keyword">throws</span> ClassNotFoundException <span class="sh_cbracket">{</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ApplicationContext ctx <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">ClassPathXmlApplicationContext</span><span class="sh_symbol">(</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_string">"applicationContext.xml"</span><span class="sh_symbol">);</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;EmpController ctl <span class="sh_symbol">=</span> ctx<span class="sh_symbol">.</span><span class="sh_function">getBean</span><span class="sh_symbol">(</span>EmpController<span class="sh_symbol">.</span><span class="sh_keyword">class</span><span class="sh_symbol">);</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ctl<span class="sh_symbol">.</span><span class="sh_function">addBatch</span><span class="sh_symbol">();</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_cbracket">}</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;</li><li><span class="sh_cbracket">}</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">package com.tarena.test;

import org.junit.Test;
import org.springframework.context.ApplicationContext;
import org.springframework.context.support.ClassPathXmlApplicationContext;
import com.tarena.controller.EmpController;

public class TestEmpController {
	
	/**
	 * 测试查询员工
	 */
	@Test
	public void test1() {
		ApplicationContext ctx = new ClassPathXmlApplicationContext(
				"applicationContext.xml");
		EmpController ctl = ctx.getBean(EmpController.class);
		ctl.find();
	}

	/**
	 * 测试批量添加员工
	 */
	@Test
	public void test2() throws ClassNotFoundException {
		ApplicationContext ctx = new ClassPathXmlApplicationContext(
				"applicationContext.xml");
		EmpController ctl = ctx.getBean(EmpController.class);
		ctl.addBatch();
	}
	
}
</pre><div class="sh_sourceCode snippet-hide"><pre><a href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS02/DAY06/CASE/01/index.html#" class="snippet-revealed snippet-toggle sh_url">隐藏</a></pre></div></div><div class="snippet-reveal sh_acid snippet-wrap"><pre class="sh_sourceCode"><a href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS02/DAY06/CASE/01/index.html#" class="snippet-toggle sh_url">代码</a></pre></div></div>
      <p>applicationContext.xml完整代码如下：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap" style="display: none;"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS02/DAY06/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS02/DAY06/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS02/DAY06/CASE/01/index.html#">pop-up</a></pre></div><pre class="hide sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">&lt;?</span>xml version<span class="sh_symbol">=</span><span class="sh_string">"1.0"</span> encoding<span class="sh_symbol">=</span><span class="sh_string">"UTF-8"</span><span class="sh_symbol">?&gt;</span></li><li><span class="sh_symbol">&lt;</span>beans xmlns<span class="sh_symbol">=</span><span class="sh_string">"http://www.springframework.org/schema/beans"</span> </li><li>&nbsp;&nbsp;&nbsp;&nbsp;xmlns<span class="sh_symbol">:</span>xsi<span class="sh_symbol">=</span><span class="sh_string">"http://www.w3.org/2001/XMLSchema-instance"</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;xmlns<span class="sh_symbol">:</span>context<span class="sh_symbol">=</span><span class="sh_string">"http://www.springframework.org/schema/context"</span> </li><li>&nbsp;&nbsp;&nbsp;&nbsp;xmlns<span class="sh_symbol">:</span>jdbc<span class="sh_symbol">=</span><span class="sh_string">"http://www.springframework.org/schema/jdbc"</span>  </li><li>&nbsp;&nbsp;&nbsp;&nbsp;xmlns<span class="sh_symbol">:</span>jee<span class="sh_symbol">=</span><span class="sh_string">"http://www.springframework.org/schema/jee"</span> </li><li>&nbsp;&nbsp;&nbsp;&nbsp;xmlns<span class="sh_symbol">:</span>tx<span class="sh_symbol">=</span><span class="sh_string">"http://www.springframework.org/schema/tx"</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;xmlns<span class="sh_symbol">:</span>aop<span class="sh_symbol">=</span><span class="sh_string">"http://www.springframework.org/schema/aop"</span> </li><li>&nbsp;&nbsp;&nbsp;&nbsp;xmlns<span class="sh_symbol">:</span>mvc<span class="sh_symbol">=</span><span class="sh_string">"http://www.springframework.org/schema/mvc"</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;xmlns<span class="sh_symbol">:</span>jpa<span class="sh_symbol">=</span><span class="sh_string">"http://www.springframework.org/schema/data/jpa"</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;xsi<span class="sh_symbol">:</span>schemaLocation<span class="sh_symbol">=</span><span class="sh_string">"</span></li><li><span class="sh_string">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.2.xsd</span></li><li><span class="sh_string">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.2.xsd</span></li><li><span class="sh_string">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http://www.springframework.org/schema/jdbc http://www.springframework.org/schema/jdbc/spring-jdbc-3.2.xsd</span></li><li><span class="sh_string">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http://www.springframework.org/schema/jee http://www.springframework.org/schema/jee/spring-jee-3.2.xsd</span></li><li><span class="sh_string">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.2.xsd</span></li><li><span class="sh_string">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http://www.springframework.org/schema/data/jpa http://www.springframework.org/schema/data/jpa/spring-jpa-1.3.xsd</span></li><li><span class="sh_string">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-3.2.xsd</span></li><li><span class="sh_string">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.2.xsd"</span><span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;!--</span> 配置数据源 <span class="sh_symbol">--&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>bean id<span class="sh_symbol">=</span><span class="sh_string">"ds"</span> </li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">class</span><span class="sh_symbol">=</span><span class="sh_string">"org.apache.commons.dbcp.BasicDataSource"</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;destroy<span class="sh_symbol">-</span>method<span class="sh_symbol">=</span><span class="sh_string">"close"</span><span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>property name<span class="sh_symbol">=</span><span class="sh_string">"url"</span> </li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;value<span class="sh_symbol">=</span><span class="sh_string">"jdbc:oracle:thin:@localhost:1521:xe"</span><span class="sh_symbol">/&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>property name<span class="sh_symbol">=</span><span class="sh_string">"driverClassName"</span> </li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;value<span class="sh_symbol">=</span><span class="sh_string">"oracle.jdbc.OracleDriver"</span><span class="sh_symbol">/&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>property name<span class="sh_symbol">=</span><span class="sh_string">"username"</span> value<span class="sh_symbol">=</span><span class="sh_string">"lhh"</span><span class="sh_symbol">/&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>property name<span class="sh_symbol">=</span><span class="sh_string">"password"</span> value<span class="sh_symbol">=</span><span class="sh_string">"123456"</span><span class="sh_symbol">/&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>bean<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;!--</span> 配置SqlSessionFactory <span class="sh_symbol">--&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>bean id<span class="sh_symbol">=</span><span class="sh_string">"sqlSessionFactory"</span> </li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">class</span><span class="sh_symbol">=</span><span class="sh_string">"org.mybatis.spring.SqlSessionFactoryBean"</span><span class="sh_symbol">&gt;</span>  </li><li>      <span class="sh_symbol">&lt;</span>property name<span class="sh_symbol">=</span><span class="sh_string">"dataSource"</span> ref<span class="sh_symbol">=</span><span class="sh_string">"ds"</span> <span class="sh_symbol">/&gt;</span></li><li>      <span class="sh_symbol">&lt;</span>property name<span class="sh_symbol">=</span><span class="sh_string">"mapperLocations"</span> </li><li>      &nbsp;&nbsp;&nbsp;&nbsp;value<span class="sh_symbol">=</span><span class="sh_string">"classpath:com/tarena/entity/*.xml"</span><span class="sh_symbol">/&gt;</span></li><li>    <span class="sh_symbol">&lt;/</span>bean<span class="sh_symbol">&gt;</span></li><li>    </li><li>    <span class="sh_symbol">&lt;!--</span> 配置MyBatis注解 <span class="sh_symbol">--&gt;</span></li><li>    <span class="sh_symbol">&lt;</span>bean <span class="sh_keyword">class</span><span class="sh_symbol">=</span><span class="sh_string">"org.mybatis.spring.mapper.MapperScannerConfigurer"</span><span class="sh_symbol">&gt;</span></li><li>       <span class="sh_symbol">&lt;</span>property name<span class="sh_symbol">=</span><span class="sh_string">"basePackage"</span> value<span class="sh_symbol">=</span><span class="sh_string">"com.tarena.dao"</span> <span class="sh_symbol">/&gt;</span></li><li>       <span class="sh_symbol">&lt;</span>property name<span class="sh_symbol">=</span><span class="sh_string">"annotationClass"</span> </li><li>           value<span class="sh_symbol">=</span><span class="sh_string">"com.tarena.annotation.MyBatisRepository"</span><span class="sh_symbol">/&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>bean<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;!--</span> 开启注解扫描 <span class="sh_symbol">--&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>context<span class="sh_symbol">:</span>component<span class="sh_symbol">-</span>scan base<span class="sh_symbol">-</span>package<span class="sh_symbol">=</span><span class="sh_string">"com.tarena"</span> <span class="sh_symbol">/&gt;</span></li><li><span style="display:none;">&nbsp;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;!--</span> 支持@RequestMapping请求和Controller映射 <span class="sh_symbol">--&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>mvc<span class="sh_symbol">:</span>annotation<span class="sh_symbol">-</span><span class="sh_normal">driven </span><span class="sh_symbol">/&gt;</span></li><li><span style="display:none;">&nbsp;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>bean <span class="sh_keyword">class</span><span class="sh_symbol">=</span><span class="sh_string">"org.springframework.web.servlet.view.InternalResourceViewResolver"</span><span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>property name<span class="sh_symbol">=</span><span class="sh_string">"prefix"</span> value<span class="sh_symbol">=</span><span class="sh_string">"/WEB-INF/"</span><span class="sh_symbol">/&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>property name<span class="sh_symbol">=</span><span class="sh_string">"suffix"</span> value<span class="sh_symbol">=</span><span class="sh_string">".jsp"</span><span class="sh_symbol">/&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>bean<span class="sh_symbol">&gt;</span>&nbsp;&nbsp;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;!--</span> 声明方面组件 <span class="sh_symbol">--&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;!--</span> <span class="sh_symbol">&lt;</span>bean id<span class="sh_symbol">=</span><span class="sh_string">"operateLogger"</span> <span class="sh_keyword">class</span><span class="sh_symbol">=</span><span class="sh_string">"com.tarena.aspect.OperateLogger"</span><span class="sh_symbol">/&gt;</span> <span class="sh_symbol">--&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;!--</span> 配置AOP <span class="sh_symbol">--&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;!--</span> <span class="sh_symbol">&lt;</span>aop<span class="sh_symbol">:</span>config<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>aop<span class="sh_symbol">:</span>aspect ref<span class="sh_symbol">=</span><span class="sh_string">"operateLogger"</span><span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>aop<span class="sh_symbol">:</span>before method<span class="sh_symbol">=</span><span class="sh_string">"log1"</span> </li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pointcut<span class="sh_symbol">=</span><span class="sh_string">"within(com.tarena.controller..*)"</span><span class="sh_symbol">/&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>aop<span class="sh_symbol">:</span>aspect<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>aop<span class="sh_symbol">:</span>aspect ref<span class="sh_symbol">=</span><span class="sh_string">"operateLogger"</span><span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>aop<span class="sh_symbol">:</span>around method<span class="sh_symbol">=</span><span class="sh_string">"log2"</span> </li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pointcut<span class="sh_symbol">=</span><span class="sh_string">"within(com.tarena.controller..*)"</span><span class="sh_symbol">/&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>aop<span class="sh_symbol">:</span>aspect<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>aop<span class="sh_symbol">:</span>aspect ref<span class="sh_symbol">=</span><span class="sh_string">"operateLogger"</span><span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>aop<span class="sh_symbol">:</span>after<span class="sh_symbol">-</span>throwing method<span class="sh_symbol">=</span><span class="sh_string">"log3"</span> throwing<span class="sh_symbol">=</span><span class="sh_string">"e"</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pointcut<span class="sh_symbol">=</span><span class="sh_string">"within(com.tarena.controller..*)"</span><span class="sh_symbol">/&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>aop<span class="sh_symbol">:</span>aspect<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>aop<span class="sh_symbol">:</span>config<span class="sh_symbol">&gt;</span> <span class="sh_symbol">--&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;!--</span> 开启AOP注解扫描 <span class="sh_symbol">--&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>aop<span class="sh_symbol">:</span>aspectj<span class="sh_symbol">-</span>autoproxy proxy<span class="sh_symbol">-</span>target<span class="sh_symbol">-</span><span class="sh_keyword">class</span><span class="sh_symbol">=</span><span class="sh_string">"true"</span><span class="sh_symbol">/&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;!--</span> 声明事务管理组件 <span class="sh_symbol">--&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>bean id<span class="sh_symbol">=</span><span class="sh_string">"txManager"</span> </li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">class</span><span class="sh_symbol">=</span><span class="sh_string">"org.springframework.jdbc.datasource.DataSourceTransactionManager"</span><span class="sh_symbol">&gt;</span> </li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>property name<span class="sh_symbol">=</span><span class="sh_string">"dataSource"</span> ref<span class="sh_symbol">=</span><span class="sh_string">"ds"</span><span class="sh_symbol">/&gt;</span> </li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>bean<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;!--</span> 开启事务注解扫描 <span class="sh_symbol">--&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>tx<span class="sh_symbol">:</span>annotation<span class="sh_symbol">-</span>driven </li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;transaction<span class="sh_symbol">-</span>manager<span class="sh_symbol">=</span><span class="sh_string">"txManager"</span> proxy<span class="sh_symbol">-</span>target<span class="sh_symbol">-</span><span class="sh_keyword">class</span><span class="sh_symbol">=</span><span class="sh_string">"true"</span><span class="sh_symbol">/&gt;</span> </li><li><span style="display:none;">&nbsp;</span></li><li><span class="sh_symbol">&lt;/</span>beans<span class="sh_symbol">&gt;</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;beans xmlns="http://www.springframework.org/schema/beans" 
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xmlns:context="http://www.springframework.org/schema/context" 
	xmlns:jdbc="http://www.springframework.org/schema/jdbc"  
	xmlns:jee="http://www.springframework.org/schema/jee" 
	xmlns:tx="http://www.springframework.org/schema/tx"
	xmlns:aop="http://www.springframework.org/schema/aop" 
	xmlns:mvc="http://www.springframework.org/schema/mvc"
	xmlns:jpa="http://www.springframework.org/schema/data/jpa"
	xsi:schemaLocation="
		http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.2.xsd
		http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.2.xsd
		http://www.springframework.org/schema/jdbc http://www.springframework.org/schema/jdbc/spring-jdbc-3.2.xsd
		http://www.springframework.org/schema/jee http://www.springframework.org/schema/jee/spring-jee-3.2.xsd
		http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.2.xsd
		http://www.springframework.org/schema/data/jpa http://www.springframework.org/schema/data/jpa/spring-jpa-1.3.xsd
		http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-3.2.xsd
		http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.2.xsd"&gt;
	
	&lt;!-- 配置数据源 --&gt;
	&lt;bean id="ds" 
		class="org.apache.commons.dbcp.BasicDataSource"
		destroy-method="close"&gt;
		&lt;property name="url" 
			value="jdbc:oracle:thin:@localhost:1521:xe"/&gt;
		&lt;property name="driverClassName" 
			value="oracle.jdbc.OracleDriver"/&gt;
		&lt;property name="username" value="lhh"/&gt;
		&lt;property name="password" value="123456"/&gt;
	&lt;/bean&gt;
	
	&lt;!-- 配置SqlSessionFactory --&gt;
	&lt;bean id="sqlSessionFactory" 
		class="org.mybatis.spring.SqlSessionFactoryBean"&gt;  
      &lt;property name="dataSource" ref="ds" /&gt;
      &lt;property name="mapperLocations" 
      	value="classpath:com/tarena/entity/*.xml"/&gt;
    &lt;/bean&gt;
    
    &lt;!-- 配置MyBatis注解 --&gt;
    &lt;bean class="org.mybatis.spring.mapper.MapperScannerConfigurer"&gt;
       &lt;property name="basePackage" value="com.tarena.dao" /&gt;
       &lt;property name="annotationClass" 
           value="com.tarena.annotation.MyBatisRepository"/&gt;
	&lt;/bean&gt;
	
	&lt;!-- 开启注解扫描 --&gt;
	&lt;context:component-scan base-package="com.tarena" /&gt;

	&lt;!-- 支持@RequestMapping请求和Controller映射 --&gt;
	&lt;mvc:annotation-driven /&gt;

	&lt;bean class="org.springframework.web.servlet.view.InternalResourceViewResolver"&gt;
		&lt;property name="prefix" value="/WEB-INF/"/&gt;
		&lt;property name="suffix" value=".jsp"/&gt;
	&lt;/bean&gt;	
	
	&lt;!-- 声明方面组件 --&gt;
	&lt;!-- &lt;bean id="operateLogger" class="com.tarena.aspect.OperateLogger"/&gt; --&gt;
	
	&lt;!-- 配置AOP --&gt;
	&lt;!-- &lt;aop:config&gt;
		&lt;aop:aspect ref="operateLogger"&gt;
			&lt;aop:before method="log1" 
				pointcut="within(com.tarena.controller..*)"/&gt;
		&lt;/aop:aspect&gt;
		&lt;aop:aspect ref="operateLogger"&gt;
			&lt;aop:around method="log2" 
				pointcut="within(com.tarena.controller..*)"/&gt;
		&lt;/aop:aspect&gt;
		&lt;aop:aspect ref="operateLogger"&gt;
			&lt;aop:after-throwing method="log3" throwing="e"
				pointcut="within(com.tarena.controller..*)"/&gt;
		&lt;/aop:aspect&gt;
	&lt;/aop:config&gt; --&gt;
	
	&lt;!-- 开启AOP注解扫描 --&gt;
	&lt;aop:aspectj-autoproxy proxy-target-class="true"/&gt;
	
	&lt;!-- 声明事务管理组件 --&gt;
	&lt;bean id="txManager" 
	class="org.springframework.jdbc.datasource.DataSourceTransactionManager"&gt; 
		&lt;property name="dataSource" ref="ds"/&gt; 
	&lt;/bean&gt;
	
	&lt;!-- 开启事务注解扫描 --&gt;
	&lt;tx:annotation-driven 
		transaction-manager="txManager" proxy-target-class="true"/&gt; 

&lt;/beans&gt;
</pre><div class="sh_sourceCode snippet-hide"><pre><a href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS02/DAY06/CASE/01/index.html#" class="snippet-revealed snippet-toggle sh_url">隐藏</a></pre></div></div><div class="snippet-reveal sh_acid snippet-wrap"><pre class="sh_sourceCode"><a href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS02/DAY06/CASE/01/index.html#" class="snippet-toggle sh_url">代码</a></pre></div></div>
      <a name="case2">
      </a>
      <h2>2 Spring声明式事务-XML配置</h2>
      <h3>2.1 问题</h3>
      <p>使用XML配置代替注解，实现Spring声明式事务。</p>
      <h3>2.2 方案</h3>
      <p>XML配置声明式事务，关键代码如下：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS02/DAY06/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS02/DAY06/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS02/DAY06/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;!--</span> XML配置声明事务范围及类型 <span class="sh_symbol">--&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>tx<span class="sh_symbol">:</span>advice id<span class="sh_symbol">=</span><span class="sh_string">"txAdvice"</span> transaction<span class="sh_symbol">-</span>manager<span class="sh_symbol">=</span><span class="sh_string">"txManager"</span><span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>tx<span class="sh_symbol">:</span>attributes<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>tx<span class="sh_symbol">:</span>method name<span class="sh_symbol">=</span><span class="sh_string">"find*"</span> read<span class="sh_symbol">-</span>only<span class="sh_symbol">=</span><span class="sh_string">"true"</span> <span class="sh_symbol">/&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>tx<span class="sh_symbol">:</span>method name<span class="sh_symbol">=</span><span class="sh_string">"add*"</span> propagation<span class="sh_symbol">=</span><span class="sh_string">"REQUIRED"</span> </li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rollback<span class="sh_symbol">-</span><span class="sh_keyword">for</span><span class="sh_symbol">=</span><span class="sh_string">"java.lang.Exception"</span><span class="sh_symbol">/&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>tx<span class="sh_symbol">:</span>method name<span class="sh_symbol">=</span><span class="sh_string">"update*"</span> propagation<span class="sh_symbol">=</span><span class="sh_string">"REQUIRED"</span> </li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rollback<span class="sh_symbol">-</span><span class="sh_keyword">for</span><span class="sh_symbol">=</span><span class="sh_string">"java.lang.Exception"</span><span class="sh_symbol">/&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>tx<span class="sh_symbol">:</span>method name<span class="sh_symbol">=</span><span class="sh_string">"delete*"</span> propagation<span class="sh_symbol">=</span><span class="sh_string">"REQUIRED"</span> </li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rollback<span class="sh_symbol">-</span><span class="sh_keyword">for</span><span class="sh_symbol">=</span><span class="sh_string">"java.lang.Exception"</span><span class="sh_symbol">/&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>tx<span class="sh_symbol">:</span>attributes<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>tx<span class="sh_symbol">:</span>advice<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>aop<span class="sh_symbol">:</span>config proxy<span class="sh_symbol">-</span>target<span class="sh_symbol">-</span><span class="sh_keyword">class</span><span class="sh_symbol">=</span><span class="sh_string">"true"</span><span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>aop<span class="sh_symbol">:</span>advisor advice<span class="sh_symbol">-</span>ref<span class="sh_symbol">=</span><span class="sh_string">"txAdvice"</span> </li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pointcut<span class="sh_symbol">=</span><span class="sh_string">"within(com.tarena.controller..*)"</span> <span class="sh_symbol">/&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>aop<span class="sh_symbol">:</span>config<span class="sh_symbol">&gt;</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">	&lt;!-- XML配置声明事务范围及类型 --&gt;
	&lt;tx:advice id="txAdvice" transaction-manager="txManager"&gt;
		&lt;tx:attributes&gt;
			&lt;tx:method name="find*" read-only="true" /&gt;
			&lt;tx:method name="add*" propagation="REQUIRED" 
				rollback-for="java.lang.Exception"/&gt;
			&lt;tx:method name="update*" propagation="REQUIRED" 
				rollback-for="java.lang.Exception"/&gt;
			&lt;tx:method name="delete*" propagation="REQUIRED" 
				rollback-for="java.lang.Exception"/&gt;
		&lt;/tx:attributes&gt;
	&lt;/tx:advice&gt;
	&lt;aop:config proxy-target-class="true"&gt;
		&lt;aop:advisor advice-ref="txAdvice" 
			pointcut="within(com.tarena.controller..*)" /&gt;
	&lt;/aop:config&gt;
</pre></div></div>
      <h3>2.3 步骤</h3>
      <p>实现此案例需要按照如下步骤进行。</p>
      <p class="number">步骤一：取消事务注解</p>
      <p>在applicationContext.xml中，去掉开启事务注解扫描的代码，使事务注解失效，关键代码如下：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS02/DAY06/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS02/DAY06/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS02/DAY06/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li class="bold_code">&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;!--</span> 开启事务注解扫描 <span class="sh_symbol">--&gt;</span></li><li class="bold_code">&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;!--</span> <span class="sh_symbol">&lt;</span>tx<span class="sh_symbol">:</span>annotation<span class="sh_symbol">-</span>driven </li><li class="bold_code">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;transaction<span class="sh_symbol">-</span>manager<span class="sh_symbol">=</span><span class="sh_string">"txManager"</span> proxy<span class="sh_symbol">-</span>target<span class="sh_symbol">-</span><span class="sh_keyword">class</span><span class="sh_symbol">=</span><span class="sh_string">"true"</span><span class="sh_symbol">/&gt;</span> <span class="sh_symbol">--&gt;</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">#cold_bold	&lt;!-- 开启事务注解扫描 --&gt;
#cold_bold	&lt;!-- &lt;tx:annotation-driven 
#cold_bold		transaction-manager="txManager" proxy-target-class="true"/&gt; --&gt;
</pre></div></div>
      <p class="number">步骤二：使用XML配置声明式事务</p>
      <p>在applicationContext.xml中，使用XML配置声明式事务，关键代码如下：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS02/DAY06/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS02/DAY06/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS02/DAY06/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li class="bold_code">&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;!--</span> XML配置声明事务范围及类型 <span class="sh_symbol">--&gt;</span></li><li class="bold_code">&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>tx<span class="sh_symbol">:</span>advice id<span class="sh_symbol">=</span><span class="sh_string">"txAdvice"</span> transaction<span class="sh_symbol">-</span>manager<span class="sh_symbol">=</span><span class="sh_string">"txManager"</span><span class="sh_symbol">&gt;</span></li><li class="bold_code">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>tx<span class="sh_symbol">:</span>attributes<span class="sh_symbol">&gt;</span></li><li class="bold_code">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>tx<span class="sh_symbol">:</span>method name<span class="sh_symbol">=</span><span class="sh_string">"find*"</span> read<span class="sh_symbol">-</span>only<span class="sh_symbol">=</span><span class="sh_string">"true"</span> <span class="sh_symbol">/&gt;</span></li><li class="bold_code">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>tx<span class="sh_symbol">:</span>method name<span class="sh_symbol">=</span><span class="sh_string">"add*"</span> propagation<span class="sh_symbol">=</span><span class="sh_string">"REQUIRED"</span> <span class="sh_symbol">/&gt;</span></li><li class="bold_code">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>tx<span class="sh_symbol">:</span>method name<span class="sh_symbol">=</span><span class="sh_string">"update*"</span> propagation<span class="sh_symbol">=</span><span class="sh_string">"REQUIRED"</span> <span class="sh_symbol">/&gt;</span></li><li class="bold_code">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>tx<span class="sh_symbol">:</span>method name<span class="sh_symbol">=</span><span class="sh_string">"delete*"</span> propagation<span class="sh_symbol">=</span><span class="sh_string">"REQUIRED"</span> <span class="sh_symbol">/&gt;</span></li><li class="bold_code">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>tx<span class="sh_symbol">:</span>attributes<span class="sh_symbol">&gt;</span></li><li class="bold_code">&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>tx<span class="sh_symbol">:</span>advice<span class="sh_symbol">&gt;</span></li><li class="bold_code">&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>aop<span class="sh_symbol">:</span>config proxy<span class="sh_symbol">-</span>target<span class="sh_symbol">-</span><span class="sh_keyword">class</span><span class="sh_symbol">=</span><span class="sh_string">"true"</span><span class="sh_symbol">&gt;</span></li><li class="bold_code">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>aop<span class="sh_symbol">:</span>advisor advice<span class="sh_symbol">-</span>ref<span class="sh_symbol">=</span><span class="sh_string">"txAdvice"</span> </li><li class="bold_code">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pointcut<span class="sh_symbol">=</span><span class="sh_string">"within(com.tarena.controller..*)"</span> <span class="sh_symbol">/&gt;</span></li><li class="bold_code">&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>aop<span class="sh_symbol">:</span>config<span class="sh_symbol">&gt;</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">#cold_bold	&lt;!-- XML配置声明事务范围及类型 --&gt;
#cold_bold	&lt;tx:advice id="txAdvice" transaction-manager="txManager"&gt;
#cold_bold		&lt;tx:attributes&gt;
#cold_bold			&lt;tx:method name="find*" read-only="true" /&gt;
#cold_bold			&lt;tx:method name="add*" propagation="REQUIRED" /&gt;
#cold_bold			&lt;tx:method name="update*" propagation="REQUIRED" /&gt;
#cold_bold			&lt;tx:method name="delete*" propagation="REQUIRED" /&gt;
#cold_bold		&lt;/tx:attributes&gt;
#cold_bold	&lt;/tx:advice&gt;
#cold_bold	&lt;aop:config proxy-target-class="true"&gt;
#cold_bold		&lt;aop:advisor advice-ref="txAdvice" 
#cold_bold			pointcut="within(com.tarena.controller..*)" /&gt;
#cold_bold	&lt;/aop:config&gt;
</pre></div></div>
      <p class="number">步骤三：测试</p>
      <p>执行测试方法TestEmpController.test2()，然后查询员工表数据如下图：</p>
      <div class="image">
        <img src="./CASE_files/image004.png">
        <p>图-4</p>
      </div>
      <p>可见，XML配置的声明式事务与注解方式效果一样。</p>
      <h3>2.4 完整代码</h3>
      <p>本案例的完整代码如下所示：</p>
      <p>applicationContext.xml完整代码如下：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap" style="display: none;"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS02/DAY06/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS02/DAY06/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS02/DAY06/CASE/01/index.html#">pop-up</a></pre></div><pre class="hide sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">&lt;?</span>xml version<span class="sh_symbol">=</span><span class="sh_string">"1.0"</span> encoding<span class="sh_symbol">=</span><span class="sh_string">"UTF-8"</span><span class="sh_symbol">?&gt;</span></li><li><span class="sh_symbol">&lt;</span>beans xmlns<span class="sh_symbol">=</span><span class="sh_string">"http://www.springframework.org/schema/beans"</span> </li><li>&nbsp;&nbsp;&nbsp;&nbsp;xmlns<span class="sh_symbol">:</span>xsi<span class="sh_symbol">=</span><span class="sh_string">"http://www.w3.org/2001/XMLSchema-instance"</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;xmlns<span class="sh_symbol">:</span>context<span class="sh_symbol">=</span><span class="sh_string">"http://www.springframework.org/schema/context"</span> </li><li>&nbsp;&nbsp;&nbsp;&nbsp;xmlns<span class="sh_symbol">:</span>jdbc<span class="sh_symbol">=</span><span class="sh_string">"http://www.springframework.org/schema/jdbc"</span>  </li><li>&nbsp;&nbsp;&nbsp;&nbsp;xmlns<span class="sh_symbol">:</span>jee<span class="sh_symbol">=</span><span class="sh_string">"http://www.springframework.org/schema/jee"</span> </li><li>&nbsp;&nbsp;&nbsp;&nbsp;xmlns<span class="sh_symbol">:</span>tx<span class="sh_symbol">=</span><span class="sh_string">"http://www.springframework.org/schema/tx"</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;xmlns<span class="sh_symbol">:</span>aop<span class="sh_symbol">=</span><span class="sh_string">"http://www.springframework.org/schema/aop"</span> </li><li>&nbsp;&nbsp;&nbsp;&nbsp;xmlns<span class="sh_symbol">:</span>mvc<span class="sh_symbol">=</span><span class="sh_string">"http://www.springframework.org/schema/mvc"</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;xmlns<span class="sh_symbol">:</span>jpa<span class="sh_symbol">=</span><span class="sh_string">"http://www.springframework.org/schema/data/jpa"</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;xsi<span class="sh_symbol">:</span>schemaLocation<span class="sh_symbol">=</span><span class="sh_string">"</span></li><li><span class="sh_string">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.2.xsd</span></li><li><span class="sh_string">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.2.xsd</span></li><li><span class="sh_string">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http://www.springframework.org/schema/jdbc http://www.springframework.org/schema/jdbc/spring-jdbc-3.2.xsd</span></li><li><span class="sh_string">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http://www.springframework.org/schema/jee http://www.springframework.org/schema/jee/spring-jee-3.2.xsd</span></li><li><span class="sh_string">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.2.xsd</span></li><li><span class="sh_string">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http://www.springframework.org/schema/data/jpa http://www.springframework.org/schema/data/jpa/spring-jpa-1.3.xsd</span></li><li><span class="sh_string">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-3.2.xsd</span></li><li><span class="sh_string">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.2.xsd"</span><span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;!--</span> 配置数据源 <span class="sh_symbol">--&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>bean id<span class="sh_symbol">=</span><span class="sh_string">"ds"</span> </li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">class</span><span class="sh_symbol">=</span><span class="sh_string">"org.apache.commons.dbcp.BasicDataSource"</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;destroy<span class="sh_symbol">-</span>method<span class="sh_symbol">=</span><span class="sh_string">"close"</span><span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>property name<span class="sh_symbol">=</span><span class="sh_string">"url"</span> </li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;value<span class="sh_symbol">=</span><span class="sh_string">"jdbc:oracle:thin:@localhost:1521:xe"</span><span class="sh_symbol">/&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>property name<span class="sh_symbol">=</span><span class="sh_string">"driverClassName"</span> </li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;value<span class="sh_symbol">=</span><span class="sh_string">"oracle.jdbc.OracleDriver"</span><span class="sh_symbol">/&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>property name<span class="sh_symbol">=</span><span class="sh_string">"username"</span> value<span class="sh_symbol">=</span><span class="sh_string">"lhh"</span><span class="sh_symbol">/&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>property name<span class="sh_symbol">=</span><span class="sh_string">"password"</span> value<span class="sh_symbol">=</span><span class="sh_string">"123456"</span><span class="sh_symbol">/&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>bean<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;!--</span> 配置SqlSessionFactory <span class="sh_symbol">--&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>bean id<span class="sh_symbol">=</span><span class="sh_string">"sqlSessionFactory"</span> </li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">class</span><span class="sh_symbol">=</span><span class="sh_string">"org.mybatis.spring.SqlSessionFactoryBean"</span><span class="sh_symbol">&gt;</span>  </li><li>      <span class="sh_symbol">&lt;</span>property name<span class="sh_symbol">=</span><span class="sh_string">"dataSource"</span> ref<span class="sh_symbol">=</span><span class="sh_string">"ds"</span> <span class="sh_symbol">/&gt;</span></li><li>      <span class="sh_symbol">&lt;</span>property name<span class="sh_symbol">=</span><span class="sh_string">"mapperLocations"</span> </li><li>      &nbsp;&nbsp;&nbsp;&nbsp;value<span class="sh_symbol">=</span><span class="sh_string">"classpath:com/tarena/entity/*.xml"</span><span class="sh_symbol">/&gt;</span></li><li>    <span class="sh_symbol">&lt;/</span>bean<span class="sh_symbol">&gt;</span></li><li>    </li><li>    <span class="sh_symbol">&lt;!--</span> 配置MyBatis注解 <span class="sh_symbol">--&gt;</span></li><li>    <span class="sh_symbol">&lt;</span>bean <span class="sh_keyword">class</span><span class="sh_symbol">=</span><span class="sh_string">"org.mybatis.spring.mapper.MapperScannerConfigurer"</span><span class="sh_symbol">&gt;</span></li><li>       <span class="sh_symbol">&lt;</span>property name<span class="sh_symbol">=</span><span class="sh_string">"basePackage"</span> value<span class="sh_symbol">=</span><span class="sh_string">"com.tarena.dao"</span> <span class="sh_symbol">/&gt;</span></li><li>       <span class="sh_symbol">&lt;</span>property name<span class="sh_symbol">=</span><span class="sh_string">"annotationClass"</span> </li><li>           value<span class="sh_symbol">=</span><span class="sh_string">"com.tarena.annotation.MyBatisRepository"</span><span class="sh_symbol">/&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>bean<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;!--</span> 开启注解扫描 <span class="sh_symbol">--&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>context<span class="sh_symbol">:</span>component<span class="sh_symbol">-</span>scan base<span class="sh_symbol">-</span>package<span class="sh_symbol">=</span><span class="sh_string">"com.tarena"</span> <span class="sh_symbol">/&gt;</span></li><li><span style="display:none;">&nbsp;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;!--</span> 支持@RequestMapping请求和Controller映射 <span class="sh_symbol">--&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>mvc<span class="sh_symbol">:</span>annotation<span class="sh_symbol">-</span><span class="sh_normal">driven </span><span class="sh_symbol">/&gt;</span></li><li><span style="display:none;">&nbsp;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>bean <span class="sh_keyword">class</span><span class="sh_symbol">=</span><span class="sh_string">"org.springframework.web.servlet.view.InternalResourceViewResolver"</span><span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>property name<span class="sh_symbol">=</span><span class="sh_string">"prefix"</span> value<span class="sh_symbol">=</span><span class="sh_string">"/WEB-INF/"</span><span class="sh_symbol">/&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>property name<span class="sh_symbol">=</span><span class="sh_string">"suffix"</span> value<span class="sh_symbol">=</span><span class="sh_string">".jsp"</span><span class="sh_symbol">/&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>bean<span class="sh_symbol">&gt;</span>&nbsp;&nbsp;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;!--</span> 声明方面组件 <span class="sh_symbol">--&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;!--</span> <span class="sh_symbol">&lt;</span>bean id<span class="sh_symbol">=</span><span class="sh_string">"operateLogger"</span> <span class="sh_keyword">class</span><span class="sh_symbol">=</span><span class="sh_string">"com.tarena.aspect.OperateLogger"</span><span class="sh_symbol">/&gt;</span> <span class="sh_symbol">--&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;!--</span> 配置AOP <span class="sh_symbol">--&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;!--</span> <span class="sh_symbol">&lt;</span>aop<span class="sh_symbol">:</span>config<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>aop<span class="sh_symbol">:</span>aspect ref<span class="sh_symbol">=</span><span class="sh_string">"operateLogger"</span><span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>aop<span class="sh_symbol">:</span>before method<span class="sh_symbol">=</span><span class="sh_string">"log1"</span> </li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pointcut<span class="sh_symbol">=</span><span class="sh_string">"within(com.tarena.controller..*)"</span><span class="sh_symbol">/&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>aop<span class="sh_symbol">:</span>aspect<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>aop<span class="sh_symbol">:</span>aspect ref<span class="sh_symbol">=</span><span class="sh_string">"operateLogger"</span><span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>aop<span class="sh_symbol">:</span>around method<span class="sh_symbol">=</span><span class="sh_string">"log2"</span> </li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pointcut<span class="sh_symbol">=</span><span class="sh_string">"within(com.tarena.controller..*)"</span><span class="sh_symbol">/&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>aop<span class="sh_symbol">:</span>aspect<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>aop<span class="sh_symbol">:</span>aspect ref<span class="sh_symbol">=</span><span class="sh_string">"operateLogger"</span><span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>aop<span class="sh_symbol">:</span>after<span class="sh_symbol">-</span>throwing method<span class="sh_symbol">=</span><span class="sh_string">"log3"</span> throwing<span class="sh_symbol">=</span><span class="sh_string">"e"</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pointcut<span class="sh_symbol">=</span><span class="sh_string">"within(com.tarena.controller..*)"</span><span class="sh_symbol">/&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>aop<span class="sh_symbol">:</span>aspect<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>aop<span class="sh_symbol">:</span>config<span class="sh_symbol">&gt;</span> <span class="sh_symbol">--&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;!--</span> 开启AOP注解扫描 <span class="sh_symbol">--&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>aop<span class="sh_symbol">:</span>aspectj<span class="sh_symbol">-</span>autoproxy proxy<span class="sh_symbol">-</span>target<span class="sh_symbol">-</span><span class="sh_keyword">class</span><span class="sh_symbol">=</span><span class="sh_string">"true"</span><span class="sh_symbol">/&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;!--</span> 声明事务管理组件 <span class="sh_symbol">--&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>bean id<span class="sh_symbol">=</span><span class="sh_string">"txManager"</span> </li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">class</span><span class="sh_symbol">=</span><span class="sh_string">"org.springframework.jdbc.datasource.DataSourceTransactionManager"</span><span class="sh_symbol">&gt;</span> </li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>property name<span class="sh_symbol">=</span><span class="sh_string">"dataSource"</span> ref<span class="sh_symbol">=</span><span class="sh_string">"ds"</span><span class="sh_symbol">/&gt;</span> </li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>bean<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;!--</span> 开启事务注解扫描 <span class="sh_symbol">--&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;!--</span> <span class="sh_symbol">&lt;</span>tx<span class="sh_symbol">:</span>annotation<span class="sh_symbol">-</span>driven </li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;transaction<span class="sh_symbol">-</span>manager<span class="sh_symbol">=</span><span class="sh_string">"txManager"</span> proxy<span class="sh_symbol">-</span>target<span class="sh_symbol">-</span><span class="sh_keyword">class</span><span class="sh_symbol">=</span><span class="sh_string">"true"</span><span class="sh_symbol">/&gt;</span> <span class="sh_symbol">--&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;!--</span> XML配置声明事务范围及类型 <span class="sh_symbol">--&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>tx<span class="sh_symbol">:</span>advice id<span class="sh_symbol">=</span><span class="sh_string">"txAdvice"</span> transaction<span class="sh_symbol">-</span>manager<span class="sh_symbol">=</span><span class="sh_string">"txManager"</span><span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>tx<span class="sh_symbol">:</span>attributes<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>tx<span class="sh_symbol">:</span>method name<span class="sh_symbol">=</span><span class="sh_string">"find*"</span> read<span class="sh_symbol">-</span>only<span class="sh_symbol">=</span><span class="sh_string">"true"</span> <span class="sh_symbol">/&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>tx<span class="sh_symbol">:</span>method name<span class="sh_symbol">=</span><span class="sh_string">"add*"</span> propagation<span class="sh_symbol">=</span><span class="sh_string">"REQUIRED"</span> </li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rollback<span class="sh_symbol">-</span><span class="sh_keyword">for</span><span class="sh_symbol">=</span><span class="sh_string">"java.lang.Exception"</span><span class="sh_symbol">/&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>tx<span class="sh_symbol">:</span>method name<span class="sh_symbol">=</span><span class="sh_string">"update*"</span> propagation<span class="sh_symbol">=</span><span class="sh_string">"REQUIRED"</span> </li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rollback<span class="sh_symbol">-</span><span class="sh_keyword">for</span><span class="sh_symbol">=</span><span class="sh_string">"java.lang.Exception"</span><span class="sh_symbol">/&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>tx<span class="sh_symbol">:</span>method name<span class="sh_symbol">=</span><span class="sh_string">"delete*"</span> propagation<span class="sh_symbol">=</span><span class="sh_string">"REQUIRED"</span> </li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rollback<span class="sh_symbol">-</span><span class="sh_keyword">for</span><span class="sh_symbol">=</span><span class="sh_string">"java.lang.Exception"</span><span class="sh_symbol">/&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>tx<span class="sh_symbol">:</span>attributes<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>tx<span class="sh_symbol">:</span>advice<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>aop<span class="sh_symbol">:</span>config proxy<span class="sh_symbol">-</span>target<span class="sh_symbol">-</span><span class="sh_keyword">class</span><span class="sh_symbol">=</span><span class="sh_string">"true"</span><span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>aop<span class="sh_symbol">:</span>advisor advice<span class="sh_symbol">-</span>ref<span class="sh_symbol">=</span><span class="sh_string">"txAdvice"</span> </li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pointcut<span class="sh_symbol">=</span><span class="sh_string">"within(com.tarena.controller..*)"</span> <span class="sh_symbol">/&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>aop<span class="sh_symbol">:</span>config<span class="sh_symbol">&gt;</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</li><li><span style="display:none;">&nbsp;</span></li><li><span class="sh_symbol">&lt;/</span>beans<span class="sh_symbol">&gt;</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;beans xmlns="http://www.springframework.org/schema/beans" 
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xmlns:context="http://www.springframework.org/schema/context" 
	xmlns:jdbc="http://www.springframework.org/schema/jdbc"  
	xmlns:jee="http://www.springframework.org/schema/jee" 
	xmlns:tx="http://www.springframework.org/schema/tx"
	xmlns:aop="http://www.springframework.org/schema/aop" 
	xmlns:mvc="http://www.springframework.org/schema/mvc"
	xmlns:jpa="http://www.springframework.org/schema/data/jpa"
	xsi:schemaLocation="
		http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.2.xsd
		http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.2.xsd
		http://www.springframework.org/schema/jdbc http://www.springframework.org/schema/jdbc/spring-jdbc-3.2.xsd
		http://www.springframework.org/schema/jee http://www.springframework.org/schema/jee/spring-jee-3.2.xsd
		http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.2.xsd
		http://www.springframework.org/schema/data/jpa http://www.springframework.org/schema/data/jpa/spring-jpa-1.3.xsd
		http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-3.2.xsd
		http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.2.xsd"&gt;
	
	&lt;!-- 配置数据源 --&gt;
	&lt;bean id="ds" 
		class="org.apache.commons.dbcp.BasicDataSource"
		destroy-method="close"&gt;
		&lt;property name="url" 
			value="jdbc:oracle:thin:@localhost:1521:xe"/&gt;
		&lt;property name="driverClassName" 
			value="oracle.jdbc.OracleDriver"/&gt;
		&lt;property name="username" value="lhh"/&gt;
		&lt;property name="password" value="123456"/&gt;
	&lt;/bean&gt;
	
	&lt;!-- 配置SqlSessionFactory --&gt;
	&lt;bean id="sqlSessionFactory" 
		class="org.mybatis.spring.SqlSessionFactoryBean"&gt;  
      &lt;property name="dataSource" ref="ds" /&gt;
      &lt;property name="mapperLocations" 
      	value="classpath:com/tarena/entity/*.xml"/&gt;
    &lt;/bean&gt;
    
    &lt;!-- 配置MyBatis注解 --&gt;
    &lt;bean class="org.mybatis.spring.mapper.MapperScannerConfigurer"&gt;
       &lt;property name="basePackage" value="com.tarena.dao" /&gt;
       &lt;property name="annotationClass" 
           value="com.tarena.annotation.MyBatisRepository"/&gt;
	&lt;/bean&gt;
	
	&lt;!-- 开启注解扫描 --&gt;
	&lt;context:component-scan base-package="com.tarena" /&gt;

	&lt;!-- 支持@RequestMapping请求和Controller映射 --&gt;
	&lt;mvc:annotation-driven /&gt;

	&lt;bean class="org.springframework.web.servlet.view.InternalResourceViewResolver"&gt;
		&lt;property name="prefix" value="/WEB-INF/"/&gt;
		&lt;property name="suffix" value=".jsp"/&gt;
	&lt;/bean&gt;	
	
	&lt;!-- 声明方面组件 --&gt;
	&lt;!-- &lt;bean id="operateLogger" class="com.tarena.aspect.OperateLogger"/&gt; --&gt;
	
	&lt;!-- 配置AOP --&gt;
	&lt;!-- &lt;aop:config&gt;
		&lt;aop:aspect ref="operateLogger"&gt;
			&lt;aop:before method="log1" 
				pointcut="within(com.tarena.controller..*)"/&gt;
		&lt;/aop:aspect&gt;
		&lt;aop:aspect ref="operateLogger"&gt;
			&lt;aop:around method="log2" 
				pointcut="within(com.tarena.controller..*)"/&gt;
		&lt;/aop:aspect&gt;
		&lt;aop:aspect ref="operateLogger"&gt;
			&lt;aop:after-throwing method="log3" throwing="e"
				pointcut="within(com.tarena.controller..*)"/&gt;
		&lt;/aop:aspect&gt;
	&lt;/aop:config&gt; --&gt;
	
	&lt;!-- 开启AOP注解扫描 --&gt;
	&lt;aop:aspectj-autoproxy proxy-target-class="true"/&gt;
	
	&lt;!-- 声明事务管理组件 --&gt;
	&lt;bean id="txManager" 
	class="org.springframework.jdbc.datasource.DataSourceTransactionManager"&gt; 
		&lt;property name="dataSource" ref="ds"/&gt; 
	&lt;/bean&gt;
	
	&lt;!-- 开启事务注解扫描 --&gt;
	&lt;!-- &lt;tx:annotation-driven 
		transaction-manager="txManager" proxy-target-class="true"/&gt; --&gt;
		
	&lt;!-- XML配置声明事务范围及类型 --&gt;
	&lt;tx:advice id="txAdvice" transaction-manager="txManager"&gt;
		&lt;tx:attributes&gt;
			&lt;tx:method name="find*" read-only="true" /&gt;
			&lt;tx:method name="add*" propagation="REQUIRED" 
				rollback-for="java.lang.Exception"/&gt;
			&lt;tx:method name="update*" propagation="REQUIRED" 
				rollback-for="java.lang.Exception"/&gt;
			&lt;tx:method name="delete*" propagation="REQUIRED" 
				rollback-for="java.lang.Exception"/&gt;
		&lt;/tx:attributes&gt;
	&lt;/tx:advice&gt;
	&lt;aop:config proxy-target-class="true"&gt;
		&lt;aop:advisor advice-ref="txAdvice" 
			pointcut="within(com.tarena.controller..*)" /&gt;
	&lt;/aop:config&gt;		

&lt;/beans&gt;
</pre><div class="sh_sourceCode snippet-hide"><pre><a href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS02/DAY06/CASE/01/index.html#" class="snippet-revealed snippet-toggle sh_url">隐藏</a></pre></div></div><div class="snippet-reveal sh_acid snippet-wrap"><pre class="sh_sourceCode"><a href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS02/DAY06/CASE/01/index.html#" class="snippet-toggle sh_url">代码</a></pre></div></div>
      <a name="case3">
      </a>
      <h2>3 Spring声明式事务-回滚机制</h2>
      <h3>3.1 问题</h3>
      <p>默认情况下，声明式事务只能捕获RuntimeException，并使事务回滚，请处理非RuntimeException情况下的事务回滚。</p>
      <h3>3.2 方案</h3>
      <p>使用注解实现声明式事务时，按如下方式指定异常：</p>
      <p>@Transactional(rollbackFor=ClassNotFoundException.class)</p>
      <p>使用XML配置实现声明式事务时，按如下方式指定异常：</p>
      <p>&lt;tx:method name="update*" propagation="REQUIRED"</p>
      <p>rollback-for="java.lang.ClassNotFoundException"/&gt;</p>
      <p>本案例中演示第二种方式。</p>
      <h3>3.3 步骤</h3>
      <p>实现此案例需要按照如下步骤进行。</p>
      <p class="number">步骤一：测试非RuntimeException异常的情况</p>
      <p>修改EmpController.addBatch()方法，将模拟的异常换成非RuntimeException，代码如下：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS02/DAY06/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS02/DAY06/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS02/DAY06/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li>package com<span class="sh_symbol">.</span>tarena<span class="sh_symbol">.</span>controller<span class="sh_symbol">;</span></li><li><span style="display:none;">&nbsp;</span></li><li>import javax<span class="sh_symbol">.</span>annotation<span class="sh_symbol">.</span>Resource<span class="sh_symbol">;</span></li><li>import org<span class="sh_symbol">.</span>springframework<span class="sh_symbol">.</span>stereotype<span class="sh_symbol">.</span>Controller<span class="sh_symbol">;</span></li><li>import org<span class="sh_symbol">.</span>springframework<span class="sh_symbol">.</span>transaction<span class="sh_symbol">.</span>annotation<span class="sh_symbol">.</span>Transactional<span class="sh_symbol">;</span></li><li>import org<span class="sh_symbol">.</span>springframework<span class="sh_symbol">.</span>web<span class="sh_symbol">.</span>bind<span class="sh_symbol">.</span>annotation<span class="sh_symbol">.</span>RequestMapping<span class="sh_symbol">;</span></li><li>import com<span class="sh_symbol">.</span>tarena<span class="sh_symbol">.</span>dao<span class="sh_symbol">.</span>EmpDao<span class="sh_symbol">;</span></li><li>import com<span class="sh_symbol">.</span>tarena<span class="sh_symbol">.</span>entity<span class="sh_symbol">.</span>Emp<span class="sh_symbol">;</span></li><li><span style="display:none;">&nbsp;</span></li><li>@Controller</li><li>@<span class="sh_function">RequestMapping</span><span class="sh_symbol">(</span><span class="sh_string">"/emp"</span><span class="sh_symbol">)</span></li><li>@Transactional</li><li><span class="sh_keyword">public</span> <span class="sh_keyword">class</span> EmpController <span class="sh_cbracket">{</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;@Resource</li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">private</span> EmpDao empDao<span class="sh_symbol">;</span></li><li><span style="display:none;">&nbsp;</span></li><li><span class="sh_comment">//其他方法略</span></li><li><span style="display:none;">&nbsp;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_comment">/**</span></li><li><span class="sh_comment">&nbsp;&nbsp;&nbsp;&nbsp; * 模拟批量添加员工</span></li><li><span class="sh_comment">&nbsp;&nbsp;&nbsp;&nbsp; */</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;@<span class="sh_function">RequestMapping</span><span class="sh_symbol">(</span><span class="sh_string">"/addEmps.do"</span><span class="sh_symbol">)</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">public</span> <span class="sh_predef_func">String</span> <span class="sh_function">addBatch</span><span class="sh_symbol">()</span> <span class="sh_keyword">throws</span> ClassNotFoundException <span class="sh_cbracket">{</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_comment">// 插入第一个员工</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Emp e1 <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">Emp</span><span class="sh_symbol">();</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;e1<span class="sh_symbol">.</span><span class="sh_function">setEname</span><span class="sh_symbol">(</span><span class="sh_string">"刘备"</span><span class="sh_symbol">);</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;e1<span class="sh_symbol">.</span><span class="sh_function">setJob</span><span class="sh_symbol">(</span><span class="sh_string">"皇叔"</span><span class="sh_symbol">);</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;e1<span class="sh_symbol">.</span><span class="sh_function">setSal</span><span class="sh_symbol">(</span><span class="sh_number">1000.0</span><span class="sh_symbol">);</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;e1<span class="sh_symbol">.</span><span class="sh_function">setEmpno</span><span class="sh_symbol">(</span><span class="sh_number">10</span><span class="sh_symbol">);</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;empDao<span class="sh_symbol">.</span><span class="sh_function">save</span><span class="sh_symbol">(</span>e1<span class="sh_symbol">);</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_comment">// 模拟异常</span></li><li class="bold_code"><span class="sh_comment">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Integer.valueOf("abc"); //ClassCastException</span></li><li class="bold_code">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Class<span class="sh_symbol">.</span><span class="sh_function">forName</span><span class="sh_symbol">(</span><span class="sh_string">"BadClass"</span><span class="sh_symbol">);</span> <span class="sh_comment">//ClassNotFoundException</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_comment">// 插入第二个员工</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Emp e2 <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">Emp</span><span class="sh_symbol">();</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;e2<span class="sh_symbol">.</span><span class="sh_function">setEname</span><span class="sh_symbol">(</span><span class="sh_string">"关羽"</span><span class="sh_symbol">);</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;e2<span class="sh_symbol">.</span><span class="sh_function">setJob</span><span class="sh_symbol">(</span><span class="sh_string">"候"</span><span class="sh_symbol">);</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;e2<span class="sh_symbol">.</span><span class="sh_function">setSal</span><span class="sh_symbol">(</span><span class="sh_number">1000.0</span><span class="sh_symbol">);</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;e2<span class="sh_symbol">.</span><span class="sh_function">setEmpno</span><span class="sh_symbol">(</span><span class="sh_number">10</span><span class="sh_symbol">);</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;empDao<span class="sh_symbol">.</span><span class="sh_function">save</span><span class="sh_symbol">(</span>e2<span class="sh_symbol">);</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">return</span> <span class="sh_string">"redirect:findEmp.do"</span><span class="sh_symbol">;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_cbracket">}</span></li><li><span style="display:none;">&nbsp;</span></li><li><span class="sh_cbracket">}</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">package com.tarena.controller;

import javax.annotation.Resource;
import org.springframework.stereotype.Controller;
import org.springframework.transaction.annotation.Transactional;
import org.springframework.web.bind.annotation.RequestMapping;
import com.tarena.dao.EmpDao;
import com.tarena.entity.Emp;

@Controller
@RequestMapping("/emp")
@Transactional
public class EmpController {
	
	@Resource
	private EmpDao empDao;

//其他方法略

	/**
	 * 模拟批量添加员工
	 */
	@RequestMapping("/addEmps.do")
	public String addBatch() throws ClassNotFoundException {
		// 插入第一个员工
		Emp e1 = new Emp();
		e1.setEname("刘备");
		e1.setJob("皇叔");
		e1.setSal(1000.0);
		e1.setEmpno(10);
		empDao.save(e1);
		
		// 模拟异常
#cold_bold//		Integer.valueOf("abc"); //ClassCastException
#cold_bold		Class.forName("BadClass"); //ClassNotFoundException
		
		// 插入第二个员工
		Emp e2 = new Emp();
		e2.setEname("关羽");
		e2.setJob("候");
		e2.setSal(1000.0);
		e2.setEmpno(10);
		empDao.save(e2);
		
		return "redirect:findEmp.do";
	}

}
</pre></div></div>
      <p>执行测试方法TestEmpController.test2()，然后查询员工表数据如下图：</p>
      <div class="image">
        <img src="./CASE_files/image005.png">
        <p>图-5</p>
      </div>
      <p>可见，对于非RuntimeException异常，默认的声明式事务是处理不了的。</p>
      <p class="number">步骤二：注解上指定处理的异常类型</p>
      <p>修改applicationContext.xml，在通知配置上指定异常类型，关键代码如下：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS02/DAY06/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS02/DAY06/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS02/DAY06/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;!--</span> XML配置声明事务范围及类型 <span class="sh_symbol">--&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>tx<span class="sh_symbol">:</span>advice id<span class="sh_symbol">=</span><span class="sh_string">"txAdvice"</span> transaction<span class="sh_symbol">-</span>manager<span class="sh_symbol">=</span><span class="sh_string">"txManager"</span><span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>tx<span class="sh_symbol">:</span>attributes<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>tx<span class="sh_symbol">:</span>method name<span class="sh_symbol">=</span><span class="sh_string">"find*"</span> read<span class="sh_symbol">-</span>only<span class="sh_symbol">=</span><span class="sh_string">"true"</span> <span class="sh_symbol">/&gt;</span></li><li class="bold_code">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>tx<span class="sh_symbol">:</span>method name<span class="sh_symbol">=</span><span class="sh_string">"add*"</span> propagation<span class="sh_symbol">=</span><span class="sh_string">"REQUIRED"</span> </li><li class="bold_code">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rollback<span class="sh_symbol">-</span><span class="sh_keyword">for</span><span class="sh_symbol">=</span><span class="sh_string">"java.lang. ClassNotFoundException"</span><span class="sh_symbol">/&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>tx<span class="sh_symbol">:</span>method name<span class="sh_symbol">=</span><span class="sh_string">"update*"</span> propagation<span class="sh_symbol">=</span><span class="sh_string">"REQUIRED"</span> <span class="sh_symbol">/&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>tx<span class="sh_symbol">:</span>method name<span class="sh_symbol">=</span><span class="sh_string">"delete*"</span> propagation<span class="sh_symbol">=</span><span class="sh_string">"REQUIRED"</span> <span class="sh_symbol">/&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>tx<span class="sh_symbol">:</span>attributes<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>tx<span class="sh_symbol">:</span>advice<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>aop<span class="sh_symbol">:</span>config proxy<span class="sh_symbol">-</span>target<span class="sh_symbol">-</span><span class="sh_keyword">class</span><span class="sh_symbol">=</span><span class="sh_string">"true"</span><span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>aop<span class="sh_symbol">:</span>advisor advice<span class="sh_symbol">-</span>ref<span class="sh_symbol">=</span><span class="sh_string">"txAdvice"</span> </li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pointcut<span class="sh_symbol">=</span><span class="sh_string">"within(com.tarena.controller..*)"</span> <span class="sh_symbol">/&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>aop<span class="sh_symbol">:</span>config<span class="sh_symbol">&gt;</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">	&lt;!-- XML配置声明事务范围及类型 --&gt;
	&lt;tx:advice id="txAdvice" transaction-manager="txManager"&gt;
		&lt;tx:attributes&gt;
			&lt;tx:method name="find*" read-only="true" /&gt;
#cold_bold			&lt;tx:method name="add*" propagation="REQUIRED" 
#cold_bold				rollback-for="java.lang. ClassNotFoundException"/&gt;
			&lt;tx:method name="update*" propagation="REQUIRED" /&gt;
			&lt;tx:method name="delete*" propagation="REQUIRED" /&gt;
		&lt;/tx:attributes&gt;
	&lt;/tx:advice&gt;
	&lt;aop:config proxy-target-class="true"&gt;
		&lt;aop:advisor advice-ref="txAdvice" 
			pointcut="within(com.tarena.controller..*)" /&gt;
	&lt;/aop:config&gt;
</pre></div></div>
      <p class="number">步骤三：测试</p>
      <p>手动删除员工表中的刘备，执行测试方法TestEmpController.test2()，然后查询员工表数据如下图：</p>
      <div class="image">
        <img src="./CASE_files/image006.png">
        <p>图-6</p>
      </div>
      <p>可见，在注解上指定了要处理的异常类型后，它就可以处理非RuntimeException了。</p>
      <h3>3.4 完整代码</h3>
      <p>本案例的完整代码如下所示：</p>
      <p>applicationContext.xml完整代码如下：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap" style="display: none;"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS02/DAY06/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS02/DAY06/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS02/DAY06/CASE/01/index.html#">pop-up</a></pre></div><pre class="hide sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">&lt;?</span>xml version<span class="sh_symbol">=</span><span class="sh_string">"1.0"</span> encoding<span class="sh_symbol">=</span><span class="sh_string">"UTF-8"</span><span class="sh_symbol">?&gt;</span></li><li><span class="sh_symbol">&lt;</span>beans xmlns<span class="sh_symbol">=</span><span class="sh_string">"http://www.springframework.org/schema/beans"</span> </li><li>&nbsp;&nbsp;&nbsp;&nbsp;xmlns<span class="sh_symbol">:</span>xsi<span class="sh_symbol">=</span><span class="sh_string">"http://www.w3.org/2001/XMLSchema-instance"</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;xmlns<span class="sh_symbol">:</span>context<span class="sh_symbol">=</span><span class="sh_string">"http://www.springframework.org/schema/context"</span> </li><li>&nbsp;&nbsp;&nbsp;&nbsp;xmlns<span class="sh_symbol">:</span>jdbc<span class="sh_symbol">=</span><span class="sh_string">"http://www.springframework.org/schema/jdbc"</span>  </li><li>&nbsp;&nbsp;&nbsp;&nbsp;xmlns<span class="sh_symbol">:</span>jee<span class="sh_symbol">=</span><span class="sh_string">"http://www.springframework.org/schema/jee"</span> </li><li>&nbsp;&nbsp;&nbsp;&nbsp;xmlns<span class="sh_symbol">:</span>tx<span class="sh_symbol">=</span><span class="sh_string">"http://www.springframework.org/schema/tx"</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;xmlns<span class="sh_symbol">:</span>aop<span class="sh_symbol">=</span><span class="sh_string">"http://www.springframework.org/schema/aop"</span> </li><li>&nbsp;&nbsp;&nbsp;&nbsp;xmlns<span class="sh_symbol">:</span>mvc<span class="sh_symbol">=</span><span class="sh_string">"http://www.springframework.org/schema/mvc"</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;xmlns<span class="sh_symbol">:</span>jpa<span class="sh_symbol">=</span><span class="sh_string">"http://www.springframework.org/schema/data/jpa"</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;xsi<span class="sh_symbol">:</span>schemaLocation<span class="sh_symbol">=</span><span class="sh_string">"</span></li><li><span class="sh_string">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.2.xsd</span></li><li><span class="sh_string">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.2.xsd</span></li><li><span class="sh_string">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http://www.springframework.org/schema/jdbc http://www.springframework.org/schema/jdbc/spring-jdbc-3.2.xsd</span></li><li><span class="sh_string">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http://www.springframework.org/schema/jee http://www.springframework.org/schema/jee/spring-jee-3.2.xsd</span></li><li><span class="sh_string">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.2.xsd</span></li><li><span class="sh_string">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http://www.springframework.org/schema/data/jpa http://www.springframework.org/schema/data/jpa/spring-jpa-1.3.xsd</span></li><li><span class="sh_string">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-3.2.xsd</span></li><li><span class="sh_string">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.2.xsd"</span><span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;!--</span> 配置数据源 <span class="sh_symbol">--&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>bean id<span class="sh_symbol">=</span><span class="sh_string">"ds"</span> </li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">class</span><span class="sh_symbol">=</span><span class="sh_string">"org.apache.commons.dbcp.BasicDataSource"</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;destroy<span class="sh_symbol">-</span>method<span class="sh_symbol">=</span><span class="sh_string">"close"</span><span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>property name<span class="sh_symbol">=</span><span class="sh_string">"url"</span> </li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;value<span class="sh_symbol">=</span><span class="sh_string">"jdbc:oracle:thin:@localhost:1521:xe"</span><span class="sh_symbol">/&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>property name<span class="sh_symbol">=</span><span class="sh_string">"driverClassName"</span> </li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;value<span class="sh_symbol">=</span><span class="sh_string">"oracle.jdbc.OracleDriver"</span><span class="sh_symbol">/&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>property name<span class="sh_symbol">=</span><span class="sh_string">"username"</span> value<span class="sh_symbol">=</span><span class="sh_string">"lhh"</span><span class="sh_symbol">/&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>property name<span class="sh_symbol">=</span><span class="sh_string">"password"</span> value<span class="sh_symbol">=</span><span class="sh_string">"123456"</span><span class="sh_symbol">/&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>bean<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;!--</span> 配置SqlSessionFactory <span class="sh_symbol">--&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>bean id<span class="sh_symbol">=</span><span class="sh_string">"sqlSessionFactory"</span> </li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">class</span><span class="sh_symbol">=</span><span class="sh_string">"org.mybatis.spring.SqlSessionFactoryBean"</span><span class="sh_symbol">&gt;</span>  </li><li>      <span class="sh_symbol">&lt;</span>property name<span class="sh_symbol">=</span><span class="sh_string">"dataSource"</span> ref<span class="sh_symbol">=</span><span class="sh_string">"ds"</span> <span class="sh_symbol">/&gt;</span></li><li>      <span class="sh_symbol">&lt;</span>property name<span class="sh_symbol">=</span><span class="sh_string">"mapperLocations"</span> </li><li>      &nbsp;&nbsp;&nbsp;&nbsp;value<span class="sh_symbol">=</span><span class="sh_string">"classpath:com/tarena/entity/*.xml"</span><span class="sh_symbol">/&gt;</span></li><li>    <span class="sh_symbol">&lt;/</span>bean<span class="sh_symbol">&gt;</span></li><li>    </li><li> <span class="sh_symbol">&lt;!--</span> 配置MyBatis注解 <span class="sh_symbol">--&gt;</span></li><li><span class="sh_symbol">&lt;</span>bean <span class="sh_keyword">class</span><span class="sh_symbol">=</span><span class="sh_string">"org.mybatis.spring.mapper.MapperScannerConfigurer"</span><span class="sh_symbol">&gt;</span></li><li>       <span class="sh_symbol">&lt;</span>property name<span class="sh_symbol">=</span><span class="sh_string">"basePackage"</span> value<span class="sh_symbol">=</span><span class="sh_string">"com.tarena.dao"</span> <span class="sh_symbol">/&gt;</span></li><li>       <span class="sh_symbol">&lt;</span>property name<span class="sh_symbol">=</span><span class="sh_string">"annotationClass"</span> </li><li>           value<span class="sh_symbol">=</span><span class="sh_string">"com.tarena.annotation.MyBatisRepository"</span><span class="sh_symbol">/&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>bean<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;!--</span> 开启注解扫描 <span class="sh_symbol">--&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>context<span class="sh_symbol">:</span>component<span class="sh_symbol">-</span>scan base<span class="sh_symbol">-</span>package<span class="sh_symbol">=</span><span class="sh_string">"com.tarena"</span> <span class="sh_symbol">/&gt;</span></li><li><span style="display:none;">&nbsp;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;!--</span> 支持@RequestMapping请求和Controller映射 <span class="sh_symbol">--&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>mvc<span class="sh_symbol">:</span>annotation<span class="sh_symbol">-</span><span class="sh_normal">driven </span><span class="sh_symbol">/&gt;</span></li><li><span style="display:none;">&nbsp;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>bean <span class="sh_keyword">class</span><span class="sh_symbol">=</span><span class="sh_string">"org.springframework.web.servlet.view.InternalResourceViewResolver"</span><span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>property name<span class="sh_symbol">=</span><span class="sh_string">"prefix"</span> value<span class="sh_symbol">=</span><span class="sh_string">"/WEB-INF/"</span><span class="sh_symbol">/&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>property name<span class="sh_symbol">=</span><span class="sh_string">"suffix"</span> value<span class="sh_symbol">=</span><span class="sh_string">".jsp"</span><span class="sh_symbol">/&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>bean<span class="sh_symbol">&gt;</span>&nbsp;&nbsp;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;!--</span> 声明方面组件 <span class="sh_symbol">--&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;!--</span> <span class="sh_symbol">&lt;</span>bean id<span class="sh_symbol">=</span><span class="sh_string">"operateLogger"</span> <span class="sh_keyword">class</span><span class="sh_symbol">=</span><span class="sh_string">"com.tarena.aspect.OperateLogger"</span><span class="sh_symbol">/&gt;</span> <span class="sh_symbol">--&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;!--</span> 配置AOP <span class="sh_symbol">--&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;!--</span> <span class="sh_symbol">&lt;</span>aop<span class="sh_symbol">:</span>config<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>aop<span class="sh_symbol">:</span>aspect ref<span class="sh_symbol">=</span><span class="sh_string">"operateLogger"</span><span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>aop<span class="sh_symbol">:</span>before method<span class="sh_symbol">=</span><span class="sh_string">"log1"</span> </li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pointcut<span class="sh_symbol">=</span><span class="sh_string">"within(com.tarena.controller..*)"</span><span class="sh_symbol">/&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>aop<span class="sh_symbol">:</span>aspect<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>aop<span class="sh_symbol">:</span>aspect ref<span class="sh_symbol">=</span><span class="sh_string">"operateLogger"</span><span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>aop<span class="sh_symbol">:</span>around method<span class="sh_symbol">=</span><span class="sh_string">"log2"</span> </li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pointcut<span class="sh_symbol">=</span><span class="sh_string">"within(com.tarena.controller..*)"</span><span class="sh_symbol">/&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>aop<span class="sh_symbol">:</span>aspect<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>aop<span class="sh_symbol">:</span>aspect ref<span class="sh_symbol">=</span><span class="sh_string">"operateLogger"</span><span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>aop<span class="sh_symbol">:</span>after<span class="sh_symbol">-</span>throwing method<span class="sh_symbol">=</span><span class="sh_string">"log3"</span> throwing<span class="sh_symbol">=</span><span class="sh_string">"e"</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pointcut<span class="sh_symbol">=</span><span class="sh_string">"within(com.tarena.controller..*)"</span><span class="sh_symbol">/&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>aop<span class="sh_symbol">:</span>aspect<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>aop<span class="sh_symbol">:</span>config<span class="sh_symbol">&gt;</span> <span class="sh_symbol">--&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;!--</span> 开启AOP注解扫描 <span class="sh_symbol">--&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>aop<span class="sh_symbol">:</span>aspectj<span class="sh_symbol">-</span>autoproxy proxy<span class="sh_symbol">-</span>target<span class="sh_symbol">-</span><span class="sh_keyword">class</span><span class="sh_symbol">=</span><span class="sh_string">"true"</span><span class="sh_symbol">/&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;!--</span> 声明事务管理组件 <span class="sh_symbol">--&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>bean id<span class="sh_symbol">=</span><span class="sh_string">"txManager"</span> </li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">class</span><span class="sh_symbol">=</span><span class="sh_string">"org.springframework.jdbc.datasource.DataSourceTransactionManager"</span><span class="sh_symbol">&gt;</span> </li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>property name<span class="sh_symbol">=</span><span class="sh_string">"dataSource"</span> ref<span class="sh_symbol">=</span><span class="sh_string">"ds"</span><span class="sh_symbol">/&gt;</span> </li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>bean<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;!--</span> 开启事务注解扫描 <span class="sh_symbol">--&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;!--</span> <span class="sh_symbol">&lt;</span>tx<span class="sh_symbol">:</span>annotation<span class="sh_symbol">-</span>driven </li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;transaction<span class="sh_symbol">-</span>manager<span class="sh_symbol">=</span><span class="sh_string">"txManager"</span> proxy<span class="sh_symbol">-</span>target<span class="sh_symbol">-</span><span class="sh_keyword">class</span><span class="sh_symbol">=</span><span class="sh_string">"true"</span><span class="sh_symbol">/&gt;</span> <span class="sh_symbol">--&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;!--</span> XML配置声明事务范围及类型 <span class="sh_symbol">--&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>tx<span class="sh_symbol">:</span>advice id<span class="sh_symbol">=</span><span class="sh_string">"txAdvice"</span> transaction<span class="sh_symbol">-</span>manager<span class="sh_symbol">=</span><span class="sh_string">"txManager"</span><span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>tx<span class="sh_symbol">:</span>attributes<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>tx<span class="sh_symbol">:</span>method name<span class="sh_symbol">=</span><span class="sh_string">"find*"</span> read<span class="sh_symbol">-</span>only<span class="sh_symbol">=</span><span class="sh_string">"true"</span> <span class="sh_symbol">/&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>tx<span class="sh_symbol">:</span>method name<span class="sh_symbol">=</span><span class="sh_string">"add*"</span> propagation<span class="sh_symbol">=</span><span class="sh_string">"REQUIRED"</span> </li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rollback<span class="sh_symbol">-</span><span class="sh_keyword">for</span><span class="sh_symbol">=</span><span class="sh_string">"java.lang.ClassNotFoundException"</span><span class="sh_symbol">/&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>tx<span class="sh_symbol">:</span>method name<span class="sh_symbol">=</span><span class="sh_string">"update*"</span> propagation<span class="sh_symbol">=</span><span class="sh_string">"REQUIRED"</span> <span class="sh_symbol">/&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>tx<span class="sh_symbol">:</span>method name<span class="sh_symbol">=</span><span class="sh_string">"delete*"</span> propagation<span class="sh_symbol">=</span><span class="sh_string">"REQUIRED"</span> <span class="sh_symbol">/&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>tx<span class="sh_symbol">:</span>attributes<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>tx<span class="sh_symbol">:</span>advice<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>aop<span class="sh_symbol">:</span>config proxy<span class="sh_symbol">-</span>target<span class="sh_symbol">-</span><span class="sh_keyword">class</span><span class="sh_symbol">=</span><span class="sh_string">"true"</span><span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>aop<span class="sh_symbol">:</span>advisor advice<span class="sh_symbol">-</span>ref<span class="sh_symbol">=</span><span class="sh_string">"txAdvice"</span> </li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pointcut<span class="sh_symbol">=</span><span class="sh_string">"within(com.tarena.controller..*)"</span> <span class="sh_symbol">/&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>aop<span class="sh_symbol">:</span>config<span class="sh_symbol">&gt;</span></li><li><span style="display:none;">&nbsp;</span></li><li><span class="sh_symbol">&lt;/</span>beans<span class="sh_symbol">&gt;</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;beans xmlns="http://www.springframework.org/schema/beans" 
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xmlns:context="http://www.springframework.org/schema/context" 
	xmlns:jdbc="http://www.springframework.org/schema/jdbc"  
	xmlns:jee="http://www.springframework.org/schema/jee" 
	xmlns:tx="http://www.springframework.org/schema/tx"
	xmlns:aop="http://www.springframework.org/schema/aop" 
	xmlns:mvc="http://www.springframework.org/schema/mvc"
	xmlns:jpa="http://www.springframework.org/schema/data/jpa"
	xsi:schemaLocation="
		http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.2.xsd
		http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.2.xsd
		http://www.springframework.org/schema/jdbc http://www.springframework.org/schema/jdbc/spring-jdbc-3.2.xsd
		http://www.springframework.org/schema/jee http://www.springframework.org/schema/jee/spring-jee-3.2.xsd
		http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.2.xsd
		http://www.springframework.org/schema/data/jpa http://www.springframework.org/schema/data/jpa/spring-jpa-1.3.xsd
		http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-3.2.xsd
		http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.2.xsd"&gt;
	
	&lt;!-- 配置数据源 --&gt;
	&lt;bean id="ds" 
		class="org.apache.commons.dbcp.BasicDataSource"
		destroy-method="close"&gt;
		&lt;property name="url" 
			value="jdbc:oracle:thin:@localhost:1521:xe"/&gt;
		&lt;property name="driverClassName" 
			value="oracle.jdbc.OracleDriver"/&gt;
		&lt;property name="username" value="lhh"/&gt;
		&lt;property name="password" value="123456"/&gt;
	&lt;/bean&gt;
	
	&lt;!-- 配置SqlSessionFactory --&gt;
	&lt;bean id="sqlSessionFactory" 
		class="org.mybatis.spring.SqlSessionFactoryBean"&gt;  
      &lt;property name="dataSource" ref="ds" /&gt;
      &lt;property name="mapperLocations" 
      	value="classpath:com/tarena/entity/*.xml"/&gt;
    &lt;/bean&gt;
    
 &lt;!-- 配置MyBatis注解 --&gt;
&lt;bean class="org.mybatis.spring.mapper.MapperScannerConfigurer"&gt;
       &lt;property name="basePackage" value="com.tarena.dao" /&gt;
       &lt;property name="annotationClass" 
           value="com.tarena.annotation.MyBatisRepository"/&gt;
	&lt;/bean&gt;
	
	&lt;!-- 开启注解扫描 --&gt;
	&lt;context:component-scan base-package="com.tarena" /&gt;

	&lt;!-- 支持@RequestMapping请求和Controller映射 --&gt;
	&lt;mvc:annotation-driven /&gt;

	&lt;bean class="org.springframework.web.servlet.view.InternalResourceViewResolver"&gt;
		&lt;property name="prefix" value="/WEB-INF/"/&gt;
		&lt;property name="suffix" value=".jsp"/&gt;
	&lt;/bean&gt;	
	
	&lt;!-- 声明方面组件 --&gt;
	&lt;!-- &lt;bean id="operateLogger" class="com.tarena.aspect.OperateLogger"/&gt; --&gt;
	
	&lt;!-- 配置AOP --&gt;
	&lt;!-- &lt;aop:config&gt;
		&lt;aop:aspect ref="operateLogger"&gt;
			&lt;aop:before method="log1" 
				pointcut="within(com.tarena.controller..*)"/&gt;
		&lt;/aop:aspect&gt;
		&lt;aop:aspect ref="operateLogger"&gt;
			&lt;aop:around method="log2" 
				pointcut="within(com.tarena.controller..*)"/&gt;
		&lt;/aop:aspect&gt;
		&lt;aop:aspect ref="operateLogger"&gt;
			&lt;aop:after-throwing method="log3" throwing="e"
				pointcut="within(com.tarena.controller..*)"/&gt;
		&lt;/aop:aspect&gt;
	&lt;/aop:config&gt; --&gt;
	
	&lt;!-- 开启AOP注解扫描 --&gt;
	&lt;aop:aspectj-autoproxy proxy-target-class="true"/&gt;
	
	&lt;!-- 声明事务管理组件 --&gt;
	&lt;bean id="txManager" 
		class="org.springframework.jdbc.datasource.DataSourceTransactionManager"&gt; 
		&lt;property name="dataSource" ref="ds"/&gt; 
	&lt;/bean&gt;
	
	&lt;!-- 开启事务注解扫描 --&gt;
	&lt;!-- &lt;tx:annotation-driven 
		transaction-manager="txManager" proxy-target-class="true"/&gt; --&gt;
		
	&lt;!-- XML配置声明事务范围及类型 --&gt;
	&lt;tx:advice id="txAdvice" transaction-manager="txManager"&gt;
		&lt;tx:attributes&gt;
			&lt;tx:method name="find*" read-only="true" /&gt;
			&lt;tx:method name="add*" propagation="REQUIRED" 
				rollback-for="java.lang.ClassNotFoundException"/&gt;
			&lt;tx:method name="update*" propagation="REQUIRED" /&gt;
			&lt;tx:method name="delete*" propagation="REQUIRED" /&gt;
		&lt;/tx:attributes&gt;
	&lt;/tx:advice&gt;
	&lt;aop:config proxy-target-class="true"&gt;
		&lt;aop:advisor advice-ref="txAdvice" 
			pointcut="within(com.tarena.controller..*)" /&gt;
	&lt;/aop:config&gt;

&lt;/beans&gt;
</pre><div class="sh_sourceCode snippet-hide"><pre><a href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS02/DAY06/CASE/01/index.html#" class="snippet-revealed snippet-toggle sh_url">隐藏</a></pre></div></div><div class="snippet-reveal sh_acid snippet-wrap"><pre class="sh_sourceCode"><a href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS02/DAY06/CASE/01/index.html#" class="snippet-toggle sh_url">代码</a></pre></div></div>
      <a name="case4">
      </a>
      <h2>4 RESTful应用案例</h2>
      <h3>4.1 问题</h3>
      <p>使用RESTful实现员工模块的增删改查功能。</p>
      <h3>4.2 方案</h3>
      <p>在Spring+MyBatis框架基础上实现员工模块的增删改查功能，然后再使用RESTful来重构请求URL。</p>
      <h3>4.3 步骤</h3>
      <p>实现此案例需要按照如下步骤进行。</p>
      <p class="number">步骤一：实现员工模块增删改查功能</p>
      <p>复制项目SpringUnit01，创建新项目SpringRestful，在新项目中完成员工的增删改查功能。</p>
      <p>EmpDao代码如下：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS02/DAY06/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS02/DAY06/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS02/DAY06/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li>package com<span class="sh_symbol">.</span>tarena<span class="sh_symbol">.</span>dao<span class="sh_symbol">;</span></li><li><span style="display:none;">&nbsp;</span></li><li>import java<span class="sh_symbol">.</span>util<span class="sh_symbol">.</span>List<span class="sh_symbol">;</span></li><li>import com<span class="sh_symbol">.</span>tarena<span class="sh_symbol">.</span>annotation<span class="sh_symbol">.</span>MyBatisRepository<span class="sh_symbol">;</span></li><li>import com<span class="sh_symbol">.</span>tarena<span class="sh_symbol">.</span>entity<span class="sh_symbol">.</span>Emp<span class="sh_symbol">;</span></li><li><span style="display:none;">&nbsp;</span></li><li><span class="sh_comment">/**</span></li><li><span class="sh_comment"> * 员工表的DAO组件</span></li><li><span class="sh_comment"> */</span></li><li>@MyBatisRepository</li><li><span class="sh_keyword">public</span> <span class="sh_keyword">interface</span> EmpDao <span class="sh_cbracket">{</span></li><li><span style="display:none;">&nbsp;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;List<span class="sh_symbol">&lt;</span>Emp<span class="sh_symbol">&gt;</span> <span class="sh_function">findAll</span><span class="sh_symbol">();</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;void <span class="sh_function">save</span><span class="sh_symbol">(</span>Emp emp<span class="sh_symbol">);</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;Emp <span class="sh_function">findById</span><span class="sh_symbol">(</span>int id<span class="sh_symbol">);</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;void <span class="sh_function">update</span><span class="sh_symbol">(</span>Emp emp<span class="sh_symbol">);</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;void <span class="sh_keyword">delete</span><span class="sh_symbol">(</span>int id<span class="sh_symbol">);</span></li><li><span style="display:none;">&nbsp;</span></li><li><span class="sh_cbracket">}</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">package com.tarena.dao;

import java.util.List;
import com.tarena.annotation.MyBatisRepository;
import com.tarena.entity.Emp;

/**
 * 员工表的DAO组件
 */
@MyBatisRepository
public interface EmpDao {

	List&lt;Emp&gt; findAll();
	
	void save(Emp emp);
	
	Emp findById(int id);
	
	void update(Emp emp);
	
	void delete(int id);

}
</pre></div></div>
      <p>EmpMapper.xml代码如下：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS02/DAY06/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS02/DAY06/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS02/DAY06/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">&lt;?</span>xml version<span class="sh_symbol">=</span><span class="sh_string">"1.0"</span> encoding<span class="sh_symbol">=</span><span class="sh_string">"UTF-8"</span> <span class="sh_symbol">?&gt;</span>  </li><li><span class="sh_symbol">&lt;!</span>DOCTYPE mapper PUBLIC <span class="sh_string">"-//ibatis.apache.org//DTD Mapper 3.0//EN"</span>      </li><li> <span class="sh_string">"http://ibatis.apache.org/dtd/ibatis-3-mapper.dtd"</span><span class="sh_symbol">&gt;</span></li><li><span style="display:none;">&nbsp;</span></li><li><span class="sh_symbol">&lt;</span>mapper namespace<span class="sh_symbol">=</span><span class="sh_string">"com.tarena.dao.EmpDao"</span><span class="sh_symbol">&gt;</span></li><li><span style="display:none;">&nbsp;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;!--</span> 查询全部的员工 <span class="sh_symbol">--&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>select id<span class="sh_symbol">=</span><span class="sh_string">"findAll"</span> </li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;resultType<span class="sh_symbol">=</span><span class="sh_string">"com.tarena.entity.Emp"</span><span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;select <span class="sh_symbol">*</span> from t_emp</li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>select<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;!--</span> 保存一条员工数据 <span class="sh_symbol">--&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>insert id<span class="sh_symbol">=</span><span class="sh_string">"save"</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;parameterType<span class="sh_symbol">=</span><span class="sh_string">"com.tarena.entity.Emp"</span><span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;insert into t_emp <span class="sh_function">values</span><span class="sh_symbol">(</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;emp_seq<span class="sh_symbol">.</span>nextval<span class="sh_symbol">,</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#<span class="sh_cbracket">{</span>ename<span class="sh_symbol">,</span>jdbcType<span class="sh_symbol">=</span>VARCHAR<span class="sh_cbracket">}</span><span class="sh_symbol">,</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#<span class="sh_cbracket">{</span>job<span class="sh_symbol">,</span>jdbcType<span class="sh_symbol">=</span>VARCHAR<span class="sh_cbracket">}</span><span class="sh_symbol">,</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#<span class="sh_cbracket">{</span>mgr<span class="sh_symbol">,</span>jdbcType<span class="sh_symbol">=</span>NUMERIC<span class="sh_cbracket">}</span><span class="sh_symbol">,</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#<span class="sh_cbracket">{</span>hiredate<span class="sh_symbol">,</span>jdbcType<span class="sh_symbol">=</span>DATE<span class="sh_cbracket">}</span><span class="sh_symbol">,</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#<span class="sh_cbracket">{</span>sal<span class="sh_symbol">,</span>jdbcType<span class="sh_symbol">=</span>NUMERIC<span class="sh_cbracket">}</span><span class="sh_symbol">,</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#<span class="sh_cbracket">{</span>comm<span class="sh_symbol">,</span>jdbcType<span class="sh_symbol">=</span>NUMERIC<span class="sh_cbracket">}</span><span class="sh_symbol">,</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#<span class="sh_cbracket">{</span>deptno<span class="sh_symbol">,</span>jdbcType<span class="sh_symbol">=</span>NUMERIC<span class="sh_cbracket">}</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">)</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>insert<span class="sh_symbol">&gt;</span>&nbsp;&nbsp;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;!--</span> 根据ID查询员工 <span class="sh_symbol">--&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>select id<span class="sh_symbol">=</span><span class="sh_string">"findById"</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;parameterType<span class="sh_symbol">=</span><span class="sh_string">"java.lang.Integer"</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;resultType<span class="sh_symbol">=</span><span class="sh_string">"com.tarena.entity.Emp"</span><span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;select <span class="sh_symbol">*</span> from t_emp where empno<span class="sh_symbol">=</span>#<span class="sh_cbracket">{</span>id<span class="sh_cbracket">}</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>select<span class="sh_symbol">&gt;</span>&nbsp;&nbsp;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;!--</span> 修改员工 <span class="sh_symbol">--&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>update id<span class="sh_symbol">=</span><span class="sh_string">"update"</span> parameterType<span class="sh_symbol">=</span><span class="sh_string">"com.tarena.entity.Emp"</span><span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;update t_emp set</li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ename<span class="sh_symbol">=</span>#<span class="sh_cbracket">{</span>ename<span class="sh_symbol">,</span>jdbcType<span class="sh_symbol">=</span>VARCHAR<span class="sh_cbracket">}</span><span class="sh_symbol">,</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;job<span class="sh_symbol">=</span>#<span class="sh_cbracket">{</span>job<span class="sh_symbol">,</span>jdbcType<span class="sh_symbol">=</span>VARCHAR<span class="sh_cbracket">}</span><span class="sh_symbol">,</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sal<span class="sh_symbol">=</span>#<span class="sh_cbracket">{</span>sal<span class="sh_symbol">,</span>jdbcType<span class="sh_symbol">=</span>NUMERIC<span class="sh_cbracket">}</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;where empno<span class="sh_symbol">=</span>#<span class="sh_cbracket">{</span>empno<span class="sh_symbol">,</span>jdbcType<span class="sh_symbol">=</span>NUMERIC<span class="sh_cbracket">}</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>update<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;!--</span> 删除员工 <span class="sh_symbol">--&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span><span class="sh_keyword">delete</span> id<span class="sh_symbol">=</span><span class="sh_string">"delete"</span> parameterType<span class="sh_symbol">=</span><span class="sh_string">"java.lang.Integer"</span><span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">delete</span> from t_emp where empno<span class="sh_symbol">=</span>#<span class="sh_cbracket">{</span>id<span class="sh_cbracket">}</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span><span class="sh_keyword">delete</span><span class="sh_symbol">&gt;</span>&nbsp;&nbsp;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;</li><li><span class="sh_symbol">&lt;/</span>mapper<span class="sh_symbol">&gt;</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;  
&lt;!DOCTYPE mapper PUBLIC "-//ibatis.apache.org//DTD Mapper 3.0//EN"      
 "http://ibatis.apache.org/dtd/ibatis-3-mapper.dtd"&gt;

&lt;mapper namespace="com.tarena.dao.EmpDao"&gt;

	&lt;!-- 查询全部的员工 --&gt;
	&lt;select id="findAll" 
		resultType="com.tarena.entity.Emp"&gt;
		select * from t_emp
	&lt;/select&gt;
	
	&lt;!-- 保存一条员工数据 --&gt;
	&lt;insert id="save"
		parameterType="com.tarena.entity.Emp"&gt;
		insert into t_emp values(
			emp_seq.nextval,
			#{ename,jdbcType=VARCHAR},
			#{job,jdbcType=VARCHAR},
			#{mgr,jdbcType=NUMERIC},
			#{hiredate,jdbcType=DATE},
			#{sal,jdbcType=NUMERIC},
			#{comm,jdbcType=NUMERIC},
			#{deptno,jdbcType=NUMERIC}
		)
	&lt;/insert&gt;	
	
	&lt;!-- 根据ID查询员工 --&gt;
	&lt;select id="findById"
		parameterType="java.lang.Integer"
		resultType="com.tarena.entity.Emp"&gt;
		select * from t_emp where empno=#{id}
	&lt;/select&gt;	
	
	&lt;!-- 修改员工 --&gt;
	&lt;update id="update" parameterType="com.tarena.entity.Emp"&gt;
		update t_emp set
			ename=#{ename,jdbcType=VARCHAR},
			job=#{job,jdbcType=VARCHAR},
			sal=#{sal,jdbcType=NUMERIC}
		where empno=#{empno,jdbcType=NUMERIC}
	&lt;/update&gt;
	
	&lt;!-- 删除员工 --&gt;
	&lt;delete id="delete" parameterType="java.lang.Integer"&gt;
		delete from t_emp where empno=#{id}
	&lt;/delete&gt;	
	
&lt;/mapper&gt;
</pre></div></div>
      <p>EmpController代码如下：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS02/DAY06/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS02/DAY06/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS02/DAY06/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li>package com<span class="sh_symbol">.</span>tarena<span class="sh_symbol">.</span>controller<span class="sh_symbol">;</span></li><li><span style="display:none;">&nbsp;</span></li><li>import java<span class="sh_symbol">.</span>util<span class="sh_symbol">.</span>List<span class="sh_symbol">;</span></li><li>import javax<span class="sh_symbol">.</span>annotation<span class="sh_symbol">.</span>Resource<span class="sh_symbol">;</span></li><li>import org<span class="sh_symbol">.</span>springframework<span class="sh_symbol">.</span>stereotype<span class="sh_symbol">.</span>Controller<span class="sh_symbol">;</span></li><li>import org<span class="sh_symbol">.</span>springframework<span class="sh_symbol">.</span>ui<span class="sh_symbol">.</span>Model<span class="sh_symbol">;</span></li><li>import org<span class="sh_symbol">.</span>springframework<span class="sh_symbol">.</span>web<span class="sh_symbol">.</span>bind<span class="sh_symbol">.</span>annotation<span class="sh_symbol">.</span>RequestMapping<span class="sh_symbol">;</span></li><li>import org<span class="sh_symbol">.</span>springframework<span class="sh_symbol">.</span>web<span class="sh_symbol">.</span>bind<span class="sh_symbol">.</span>annotation<span class="sh_symbol">.</span>RequestParam<span class="sh_symbol">;</span></li><li>import com<span class="sh_symbol">.</span>tarena<span class="sh_symbol">.</span>dao<span class="sh_symbol">.</span>EmpDao<span class="sh_symbol">;</span></li><li>import com<span class="sh_symbol">.</span>tarena<span class="sh_symbol">.</span>entity<span class="sh_symbol">.</span>Emp<span class="sh_symbol">;</span></li><li><span style="display:none;">&nbsp;</span></li><li>@Controller</li><li>@<span class="sh_function">RequestMapping</span><span class="sh_symbol">(</span><span class="sh_string">"/emp"</span><span class="sh_symbol">)</span></li><li><span class="sh_keyword">public</span> <span class="sh_keyword">class</span> EmpController <span class="sh_cbracket">{</span></li><li><span style="display:none;">&nbsp;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;@Resource</li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">private</span> EmpDao empDao<span class="sh_symbol">;</span></li><li><span style="display:none;">&nbsp;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;@<span class="sh_function">RequestMapping</span><span class="sh_symbol">(</span><span class="sh_string">"/findEmp.do"</span><span class="sh_symbol">)</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">public</span> <span class="sh_predef_func">String</span> <span class="sh_function">find</span><span class="sh_symbol">(</span>Model model<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;List<span class="sh_symbol">&lt;</span>Emp<span class="sh_symbol">&gt;</span> list <span class="sh_symbol">=</span> empDao<span class="sh_symbol">.</span><span class="sh_function">findAll</span><span class="sh_symbol">();</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;model<span class="sh_symbol">.</span><span class="sh_function">addAttribute</span><span class="sh_symbol">(</span><span class="sh_string">"emps"</span><span class="sh_symbol">,</span> list<span class="sh_symbol">);</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">return</span> <span class="sh_string">"emp/emp_list"</span><span class="sh_symbol">;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_cbracket">}</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_comment">/**</span></li><li><span class="sh_comment">&nbsp;&nbsp;&nbsp;&nbsp; * 打开新增页面</span></li><li><span class="sh_comment">&nbsp;&nbsp;&nbsp;&nbsp; */</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;@<span class="sh_function">RequestMapping</span><span class="sh_symbol">(</span><span class="sh_string">"/toAddEmp.do"</span><span class="sh_symbol">)</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">public</span> <span class="sh_predef_func">String</span> <span class="sh_function">toAdd</span><span class="sh_symbol">()</span> <span class="sh_cbracket">{</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">return</span> <span class="sh_string">"emp/add_emp"</span><span class="sh_symbol">;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_cbracket">}</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_comment">/**</span></li><li><span class="sh_comment">&nbsp;&nbsp;&nbsp;&nbsp; * 新增保存</span></li><li><span class="sh_comment">&nbsp;&nbsp;&nbsp;&nbsp; */</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;@<span class="sh_function">RequestMapping</span><span class="sh_symbol">(</span><span class="sh_string">"/addEmp.do"</span><span class="sh_symbol">)</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">public</span> <span class="sh_predef_func">String</span> <span class="sh_function">add</span><span class="sh_symbol">(</span>Emp emp<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;empDao<span class="sh_symbol">.</span><span class="sh_function">save</span><span class="sh_symbol">(</span>emp<span class="sh_symbol">);</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">return</span> <span class="sh_string">"redirect:findEmp.do"</span><span class="sh_symbol">;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_cbracket">}</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_comment">/**</span></li><li><span class="sh_comment">&nbsp;&nbsp;&nbsp;&nbsp; * 打开修改页面</span></li><li><span class="sh_comment">&nbsp;&nbsp;&nbsp;&nbsp; */</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;@<span class="sh_function">RequestMapping</span><span class="sh_symbol">(</span><span class="sh_string">"/toUpdateEmp.do"</span><span class="sh_symbol">)</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">public</span> <span class="sh_predef_func">String</span> <span class="sh_function">toUpdate</span><span class="sh_symbol">(</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="sh_function">RequestParam</span><span class="sh_symbol">(</span><span class="sh_string">"id"</span><span class="sh_symbol">)</span> int id<span class="sh_symbol">,</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Model model<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Emp e <span class="sh_symbol">=</span> empDao<span class="sh_symbol">.</span><span class="sh_function">findById</span><span class="sh_symbol">(</span>id<span class="sh_symbol">);</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;model<span class="sh_symbol">.</span><span class="sh_function">addAttribute</span><span class="sh_symbol">(</span><span class="sh_string">"emp"</span><span class="sh_symbol">,</span> e<span class="sh_symbol">);</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">return</span> <span class="sh_string">"emp/update_emp"</span><span class="sh_symbol">;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_cbracket">}</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_comment">/**</span></li><li><span class="sh_comment">&nbsp;&nbsp;&nbsp;&nbsp; * 修改保存</span></li><li><span class="sh_comment">&nbsp;&nbsp;&nbsp;&nbsp; */</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;@<span class="sh_function">RequestMapping</span><span class="sh_symbol">(</span><span class="sh_string">"/updateEmp.do"</span><span class="sh_symbol">)</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">public</span> <span class="sh_predef_func">String</span> <span class="sh_function">update</span><span class="sh_symbol">(</span>Emp emp<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;empDao<span class="sh_symbol">.</span><span class="sh_function">update</span><span class="sh_symbol">(</span>emp<span class="sh_symbol">);</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">return</span> <span class="sh_string">"redirect:findEmp.do"</span><span class="sh_symbol">;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_cbracket">}</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_comment">/**</span></li><li><span class="sh_comment">&nbsp;&nbsp;&nbsp;&nbsp; * 删除</span></li><li><span class="sh_comment">&nbsp;&nbsp;&nbsp;&nbsp; */</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;@<span class="sh_function">RequestMapping</span><span class="sh_symbol">(</span><span class="sh_string">"/deleteEmp.do"</span><span class="sh_symbol">)</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">public</span> <span class="sh_predef_func">String</span> <span class="sh_keyword">delete</span><span class="sh_symbol">(</span>@<span class="sh_function">RequestParam</span><span class="sh_symbol">(</span><span class="sh_string">"id"</span><span class="sh_symbol">)</span> int id<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;empDao<span class="sh_symbol">.</span><span class="sh_keyword">delete</span><span class="sh_symbol">(</span>id<span class="sh_symbol">);</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">return</span> <span class="sh_string">"redirect:findEmp.do"</span><span class="sh_symbol">;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_cbracket">}</span></li><li><span style="display:none;">&nbsp;</span></li><li><span class="sh_cbracket">}</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">package com.tarena.controller;

import java.util.List;
import javax.annotation.Resource;
import org.springframework.stereotype.Controller;
import org.springframework.ui.Model;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestParam;
import com.tarena.dao.EmpDao;
import com.tarena.entity.Emp;

@Controller
@RequestMapping("/emp")
public class EmpController {

	@Resource
	private EmpDao empDao;

	@RequestMapping("/findEmp.do")
	public String find(Model model) {
		List&lt;Emp&gt; list = empDao.findAll();
		model.addAttribute("emps", list);
		return "emp/emp_list";
	}
	
	/**
	 * 打开新增页面
	 */
	@RequestMapping("/toAddEmp.do")
	public String toAdd() {
		return "emp/add_emp";
	}
	
	/**
	 * 新增保存
	 */
	@RequestMapping("/addEmp.do")
	public String add(Emp emp) {
		empDao.save(emp);
		return "redirect:findEmp.do";
	}
	
	/**
	 * 打开修改页面
	 */
	@RequestMapping("/toUpdateEmp.do")
	public String toUpdate(
			@RequestParam("id") int id,
			Model model) {
		Emp e = empDao.findById(id);
		model.addAttribute("emp", e);
		return "emp/update_emp";
	}
	
	/**
	 * 修改保存
	 */
	@RequestMapping("/updateEmp.do")
	public String update(Emp emp) {
		empDao.update(emp);
		return "redirect:findEmp.do";
	}
	
	/**
	 * 删除
	 */
	@RequestMapping("/deleteEmp.do")
	public String delete(@RequestParam("id") int id) {
		empDao.delete(id);
		return "redirect:findEmp.do";
	}

}
</pre></div></div>
      <p>员工列表页面emp_list.jsp代码如下：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS02/DAY06/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS02/DAY06/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS02/DAY06/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">&lt;%</span>@page pageEncoding<span class="sh_symbol">=</span><span class="sh_string">"utf-8"</span><span class="sh_symbol">%&gt;</span></li><li><span class="sh_symbol">&lt;%</span>@taglib uri<span class="sh_symbol">=</span><span class="sh_string">"http://java.sun.com/jsp/jstl/core"</span> prefix<span class="sh_symbol">=</span><span class="sh_string">"c"</span><span class="sh_symbol">%&gt;</span></li><li><span class="sh_symbol">&lt;</span>html<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;</span>head<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>script type<span class="sh_symbol">=</span><span class="sh_string">"text/javascript"</span> src<span class="sh_symbol">=</span><span class="sh_string">"../js/jquery-1.11.1.js"</span><span class="sh_symbol">&gt;&lt;/</span>script<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>script type<span class="sh_symbol">=</span><span class="sh_string">"text/javascript"</span><span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">function</span> <span class="sh_function">delete_emp</span><span class="sh_symbol">(</span>id<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">var</span> r <span class="sh_symbol">=</span> window<span class="sh_symbol">.</span><span class="sh_function">confirm</span><span class="sh_symbol">(</span><span class="sh_string">"确定要删除此数据吗？"</span><span class="sh_symbol">);</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">if</span><span class="sh_symbol">(</span>r<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;location<span class="sh_symbol">.</span>href <span class="sh_symbol">=</span> <span class="sh_string">"deleteEmp.do?id="</span><span class="sh_symbol">+</span>id<span class="sh_symbol">;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_cbracket">}</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_cbracket">}</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>script<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;/</span>head<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;</span>body<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>div align<span class="sh_symbol">=</span><span class="sh_string">"center"</span><span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>input type<span class="sh_symbol">=</span><span class="sh_string">"button"</span> value<span class="sh_symbol">=</span><span class="sh_string">"新增"</span> onclick<span class="sh_symbol">=</span><span class="sh_string">"location.href='toAddEmp.do'"</span><span class="sh_symbol">/&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>div<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>table width<span class="sh_symbol">=</span><span class="sh_string">"60%"</span> border<span class="sh_symbol">=</span><span class="sh_string">"1"</span> cellpadding<span class="sh_symbol">=</span><span class="sh_string">"2"</span> cellspacing<span class="sh_symbol">=</span><span class="sh_string">"0"</span> align<span class="sh_symbol">=</span><span class="sh_string">"center"</span><span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>tr<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>th<span class="sh_symbol">&gt;</span>EMPNO<span class="sh_symbol">&lt;/</span>th<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>th<span class="sh_symbol">&gt;</span>ENAME<span class="sh_symbol">&lt;/</span>th<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>th<span class="sh_symbol">&gt;</span>JOB<span class="sh_symbol">&lt;/</span>th<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>th<span class="sh_symbol">&gt;</span>MGR<span class="sh_symbol">&lt;/</span>th<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>th<span class="sh_symbol">&gt;</span>HIREDATE<span class="sh_symbol">&lt;/</span>th<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>th<span class="sh_symbol">&gt;</span>SAL<span class="sh_symbol">&lt;/</span>th<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>th<span class="sh_symbol">&gt;</span>COMM<span class="sh_symbol">&lt;/</span>th<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>th<span class="sh_symbol">&gt;</span>DEPTNO<span class="sh_symbol">&lt;/</span>th<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>th<span class="sh_symbol">&gt;&lt;/</span>th<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>tr<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>c<span class="sh_symbol">:</span>forEach items<span class="sh_symbol">=</span><span class="sh_string">"${emps }"</span> <span class="sh_keyword">var</span><span class="sh_symbol">=</span><span class="sh_string">"emp"</span><span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>tr<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>td<span class="sh_symbol">&gt;</span>$<span class="sh_cbracket">{</span>emp<span class="sh_symbol">.</span>empno <span class="sh_cbracket">}</span><span class="sh_symbol">&lt;/</span>td<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>td<span class="sh_symbol">&gt;</span>$<span class="sh_cbracket">{</span>emp<span class="sh_symbol">.</span>ename <span class="sh_cbracket">}</span><span class="sh_symbol">&lt;/</span>td<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>td<span class="sh_symbol">&gt;</span>$<span class="sh_cbracket">{</span>emp<span class="sh_symbol">.</span>job <span class="sh_cbracket">}</span><span class="sh_symbol">&lt;/</span>td<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>td<span class="sh_symbol">&gt;</span>$<span class="sh_cbracket">{</span>emp<span class="sh_symbol">.</span>mgr <span class="sh_cbracket">}</span><span class="sh_symbol">&lt;/</span>td<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>td<span class="sh_symbol">&gt;</span>$<span class="sh_cbracket">{</span>emp<span class="sh_symbol">.</span>hiredate <span class="sh_cbracket">}</span><span class="sh_symbol">&lt;/</span>td<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>td<span class="sh_symbol">&gt;</span>$<span class="sh_cbracket">{</span>emp<span class="sh_symbol">.</span>sal <span class="sh_cbracket">}</span><span class="sh_symbol">&lt;/</span>td<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>td<span class="sh_symbol">&gt;</span>$<span class="sh_cbracket">{</span>emp<span class="sh_symbol">.</span>comm <span class="sh_cbracket">}</span><span class="sh_symbol">&lt;/</span>td<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>td<span class="sh_symbol">&gt;</span>$<span class="sh_cbracket">{</span>emp<span class="sh_symbol">.</span>deptno <span class="sh_cbracket">}</span><span class="sh_symbol">&lt;/</span>td<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>td<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>input type<span class="sh_symbol">=</span><span class="sh_string">"button"</span> value<span class="sh_symbol">=</span><span class="sh_string">"修改"</span> onclick<span class="sh_symbol">=</span><span class="sh_string">"location.href='toUpdateEmp.do?id=${emp.empno }'"</span><span class="sh_symbol">/&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>input type<span class="sh_symbol">=</span><span class="sh_string">"button"</span> value<span class="sh_symbol">=</span><span class="sh_string">"删除"</span> onclick<span class="sh_symbol">=</span><span class="sh_string">"delete_emp(${emp.empno });"</span><span class="sh_symbol">/&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>td<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>tr<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>c<span class="sh_symbol">:</span>forEach<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>table<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;/</span>body<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;/</span>html<span class="sh_symbol">&gt;</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">&lt;%@page pageEncoding="utf-8"%&gt;
&lt;%@taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%&gt;
&lt;html&gt;
&lt;head&gt;
	&lt;script type="text/javascript" src="../js/jquery-1.11.1.js"&gt;&lt;/script&gt;
	&lt;script type="text/javascript"&gt;
		function delete_emp(id) {
			var r = window.confirm("确定要删除此数据吗？");
			if(r) {
				location.href = "deleteEmp.do?id="+id;
			}
		}
	&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
	&lt;div align="center"&gt;
		&lt;input type="button" value="新增" onclick="location.href='toAddEmp.do'"/&gt;
	&lt;/div&gt;
	&lt;table width="60%" border="1" cellpadding="2" cellspacing="0" align="center"&gt;
		&lt;tr&gt;
			&lt;th&gt;EMPNO&lt;/th&gt;
			&lt;th&gt;ENAME&lt;/th&gt;
			&lt;th&gt;JOB&lt;/th&gt;
			&lt;th&gt;MGR&lt;/th&gt;
			&lt;th&gt;HIREDATE&lt;/th&gt;
			&lt;th&gt;SAL&lt;/th&gt;
			&lt;th&gt;COMM&lt;/th&gt;
			&lt;th&gt;DEPTNO&lt;/th&gt;
			&lt;th&gt;&lt;/th&gt;
		&lt;/tr&gt;
		&lt;c:forEach items="${emps }" var="emp"&gt;
			&lt;tr&gt;
				&lt;td&gt;${emp.empno }&lt;/td&gt;
				&lt;td&gt;${emp.ename }&lt;/td&gt;
				&lt;td&gt;${emp.job }&lt;/td&gt;
				&lt;td&gt;${emp.mgr }&lt;/td&gt;
				&lt;td&gt;${emp.hiredate }&lt;/td&gt;
				&lt;td&gt;${emp.sal }&lt;/td&gt;
				&lt;td&gt;${emp.comm }&lt;/td&gt;
				&lt;td&gt;${emp.deptno }&lt;/td&gt;
				&lt;td&gt;
					&lt;input type="button" value="修改" onclick="location.href='toUpdateEmp.do?id=${emp.empno }'"/&gt;
					&lt;input type="button" value="删除" onclick="delete_emp(${emp.empno });"/&gt;
				&lt;/td&gt;
			&lt;/tr&gt;
		&lt;/c:forEach&gt;
	&lt;/table&gt;
&lt;/body&gt;
&lt;/html&gt;
</pre></div></div>
      <p>员工新增页面add_emp.jsp代码如下：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS02/DAY06/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS02/DAY06/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS02/DAY06/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">&lt;%</span>@page pageEncoding<span class="sh_symbol">=</span><span class="sh_string">"utf-8"</span><span class="sh_symbol">%&gt;</span></li><li><span class="sh_symbol">&lt;%</span>@taglib uri<span class="sh_symbol">=</span><span class="sh_string">"http://java.sun.com/jsp/jstl/core"</span> prefix<span class="sh_symbol">=</span><span class="sh_string">"c"</span><span class="sh_symbol">%&gt;</span></li><li><span class="sh_symbol">&lt;</span>html<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;</span>head<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;/</span>head<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;</span>body<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>form action<span class="sh_symbol">=</span><span class="sh_string">"addEmp.do"</span> method<span class="sh_symbol">=</span><span class="sh_string">"post"</span><span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>table width<span class="sh_symbol">=</span><span class="sh_string">"40%"</span> border<span class="sh_symbol">=</span><span class="sh_string">"1"</span> cellpadding<span class="sh_symbol">=</span><span class="sh_string">"2"</span> cellspacing<span class="sh_symbol">=</span><span class="sh_string">"0"</span> align<span class="sh_symbol">=</span><span class="sh_string">"center"</span><span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>tr<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>td<span class="sh_symbol">&gt;</span>姓名：<span class="sh_symbol">&lt;/</span>td<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>td<span class="sh_symbol">&gt;&lt;</span>input type<span class="sh_symbol">=</span><span class="sh_string">"text"</span> name<span class="sh_symbol">=</span><span class="sh_string">"ename"</span><span class="sh_regexp">/&gt;&lt;/</span>td<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>tr<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>tr<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>td<span class="sh_symbol">&gt;</span>岗位：<span class="sh_symbol">&lt;/</span>td<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>td<span class="sh_symbol">&gt;&lt;</span>input type<span class="sh_symbol">=</span><span class="sh_string">"text"</span> name<span class="sh_symbol">=</span><span class="sh_string">"job"</span><span class="sh_regexp">/&gt;&lt;/</span>td<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>tr<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>tr<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>td<span class="sh_symbol">&gt;</span>工资：<span class="sh_symbol">&lt;/</span>td<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>td<span class="sh_symbol">&gt;&lt;</span>input type<span class="sh_symbol">=</span><span class="sh_string">"text"</span> name<span class="sh_symbol">=</span><span class="sh_string">"sal"</span><span class="sh_regexp">/&gt;&lt;/</span>td<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>tr<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>tr<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>td colspan<span class="sh_symbol">=</span><span class="sh_string">"2"</span><span class="sh_symbol">&gt;&lt;</span>input type<span class="sh_symbol">=</span><span class="sh_string">"submit"</span> value<span class="sh_symbol">=</span><span class="sh_string">"保存"</span><span class="sh_regexp">/&gt;&lt;/</span>td<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>tr<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>table<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>form<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;/</span>body<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;/</span>html<span class="sh_symbol">&gt;</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">&lt;%@page pageEncoding="utf-8"%&gt;
&lt;%@taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%&gt;
&lt;html&gt;
&lt;head&gt;
&lt;/head&gt;
&lt;body&gt;
	&lt;form action="addEmp.do" method="post"&gt;
		&lt;table width="40%" border="1" cellpadding="2" cellspacing="0" align="center"&gt;
			&lt;tr&gt;
				&lt;td&gt;姓名：&lt;/td&gt;
				&lt;td&gt;&lt;input type="text" name="ename"/&gt;&lt;/td&gt;
			&lt;/tr&gt;
			&lt;tr&gt;
				&lt;td&gt;岗位：&lt;/td&gt;
				&lt;td&gt;&lt;input type="text" name="job"/&gt;&lt;/td&gt;
			&lt;/tr&gt;
			&lt;tr&gt;
				&lt;td&gt;工资：&lt;/td&gt;
				&lt;td&gt;&lt;input type="text" name="sal"/&gt;&lt;/td&gt;
			&lt;/tr&gt;
			&lt;tr&gt;
				&lt;td colspan="2"&gt;&lt;input type="submit" value="保存"/&gt;&lt;/td&gt;
			&lt;/tr&gt;
		&lt;/table&gt;
	&lt;/form&gt;
&lt;/body&gt;
&lt;/html&gt;
</pre></div></div>
      <p>员工修改页面update_emp.jsp代码如下：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS02/DAY06/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS02/DAY06/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS02/DAY06/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">&lt;%</span>@page pageEncoding<span class="sh_symbol">=</span><span class="sh_string">"utf-8"</span><span class="sh_symbol">%&gt;</span></li><li><span class="sh_symbol">&lt;%</span>@taglib uri<span class="sh_symbol">=</span><span class="sh_string">"http://java.sun.com/jsp/jstl/core"</span> prefix<span class="sh_symbol">=</span><span class="sh_string">"c"</span><span class="sh_symbol">%&gt;</span></li><li><span class="sh_symbol">&lt;</span>html<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;</span>head<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;/</span>head<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;</span>body<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>form action<span class="sh_symbol">=</span><span class="sh_string">"updateEmp.do"</span> method<span class="sh_symbol">=</span><span class="sh_string">"post"</span><span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>table width<span class="sh_symbol">=</span><span class="sh_string">"40%"</span> border<span class="sh_symbol">=</span><span class="sh_string">"1"</span> cellpadding<span class="sh_symbol">=</span><span class="sh_string">"2"</span> cellspacing<span class="sh_symbol">=</span><span class="sh_string">"0"</span> align<span class="sh_symbol">=</span><span class="sh_string">"center"</span><span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>tr<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>td<span class="sh_symbol">&gt;</span>EMPNO：<span class="sh_symbol">&lt;/</span>td<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>td<span class="sh_symbol">&gt;&lt;</span>input type<span class="sh_symbol">=</span><span class="sh_string">"text"</span> name<span class="sh_symbol">=</span><span class="sh_string">"empno"</span> value<span class="sh_symbol">=</span><span class="sh_string">"${emp.empno }"</span><span class="sh_regexp">/&gt;&lt;/</span>td<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>tr<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>tr<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>td<span class="sh_symbol">&gt;</span>姓名：<span class="sh_symbol">&lt;/</span>td<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>td<span class="sh_symbol">&gt;&lt;</span>input type<span class="sh_symbol">=</span><span class="sh_string">"text"</span> name<span class="sh_symbol">=</span><span class="sh_string">"ename"</span> value<span class="sh_symbol">=</span><span class="sh_string">"${emp.ename }"</span><span class="sh_regexp">/&gt;&lt;/</span>td<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>tr<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>tr<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>td<span class="sh_symbol">&gt;</span>岗位：<span class="sh_symbol">&lt;/</span>td<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>td<span class="sh_symbol">&gt;&lt;</span>input type<span class="sh_symbol">=</span><span class="sh_string">"text"</span> name<span class="sh_symbol">=</span><span class="sh_string">"job"</span> value<span class="sh_symbol">=</span><span class="sh_string">"${emp.job }"</span><span class="sh_regexp">/&gt;&lt;/</span>td<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>tr<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>tr<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>td<span class="sh_symbol">&gt;</span>工资：<span class="sh_symbol">&lt;/</span>td<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>td<span class="sh_symbol">&gt;&lt;</span>input type<span class="sh_symbol">=</span><span class="sh_string">"text"</span> name<span class="sh_symbol">=</span><span class="sh_string">"sal"</span> value<span class="sh_symbol">=</span><span class="sh_string">"${emp.sal }"</span><span class="sh_regexp">/&gt;&lt;/</span>td<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>tr<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>tr<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>td colspan<span class="sh_symbol">=</span><span class="sh_string">"2"</span><span class="sh_symbol">&gt;&lt;</span>input type<span class="sh_symbol">=</span><span class="sh_string">"submit"</span> value<span class="sh_symbol">=</span><span class="sh_string">"保存"</span><span class="sh_regexp">/&gt;&lt;/</span>td<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>tr<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>table<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>form<span class="sh_symbol">&gt;</span>&nbsp;&nbsp;&nbsp;&nbsp;</li><li><span class="sh_symbol">&lt;/</span>body<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;/</span>html<span class="sh_symbol">&gt;</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">&lt;%@page pageEncoding="utf-8"%&gt;
&lt;%@taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%&gt;
&lt;html&gt;
&lt;head&gt;
&lt;/head&gt;
&lt;body&gt;
	&lt;form action="updateEmp.do" method="post"&gt;
		&lt;table width="40%" border="1" cellpadding="2" cellspacing="0" align="center"&gt;
			&lt;tr&gt;
				&lt;td&gt;EMPNO：&lt;/td&gt;
				&lt;td&gt;&lt;input type="text" name="empno" value="${emp.empno }"/&gt;&lt;/td&gt;
			&lt;/tr&gt;
			&lt;tr&gt;
				&lt;td&gt;姓名：&lt;/td&gt;
				&lt;td&gt;&lt;input type="text" name="ename" value="${emp.ename }"/&gt;&lt;/td&gt;
			&lt;/tr&gt;
			&lt;tr&gt;
				&lt;td&gt;岗位：&lt;/td&gt;
				&lt;td&gt;&lt;input type="text" name="job" value="${emp.job }"/&gt;&lt;/td&gt;
			&lt;/tr&gt;
			&lt;tr&gt;
				&lt;td&gt;工资：&lt;/td&gt;
				&lt;td&gt;&lt;input type="text" name="sal" value="${emp.sal }"/&gt;&lt;/td&gt;
			&lt;/tr&gt;
			&lt;tr&gt;
				&lt;td colspan="2"&gt;&lt;input type="submit" value="保存"/&gt;&lt;/td&gt;
			&lt;/tr&gt;
		&lt;/table&gt;
	&lt;/form&gt;	
&lt;/body&gt;
&lt;/html&gt;
</pre></div></div>
      <p>部署项目并启动tomcat，测试通过员工的增删改查功能。</p>
      <p class="number">步骤二：启用RESTful</p>
      <p>修改web.xml，将*.do改为/，代码如下：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS02/DAY06/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS02/DAY06/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS02/DAY06/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">&lt;?</span>xml version<span class="sh_symbol">=</span><span class="sh_string">"1.0"</span> encoding<span class="sh_symbol">=</span><span class="sh_string">"UTF-8"</span><span class="sh_symbol">?&gt;</span></li><li><span class="sh_symbol">&lt;</span>web<span class="sh_symbol">-</span>app version<span class="sh_symbol">=</span><span class="sh_string">"2.5"</span> </li><li>&nbsp;&nbsp;&nbsp;&nbsp;xmlns<span class="sh_symbol">=</span><span class="sh_string">"http://java.sun.com/xml/ns/javaee"</span> </li><li>&nbsp;&nbsp;&nbsp;&nbsp;xmlns<span class="sh_symbol">:</span>xsi<span class="sh_symbol">=</span><span class="sh_string">"http://www.w3.org/2001/XMLSchema-instance"</span> </li><li>&nbsp;&nbsp;&nbsp;&nbsp;xsi<span class="sh_symbol">:</span>schemaLocation<span class="sh_symbol">=</span><span class="sh_string">"http://java.sun.com/xml/ns/javaee </span></li><li><span class="sh_string">&nbsp;&nbsp;&nbsp;&nbsp;http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"</span><span class="sh_symbol">&gt;</span></li><li>  <span class="sh_symbol">&lt;</span>display<span class="sh_symbol">-</span>name<span class="sh_symbol">&gt;&lt;/</span>display<span class="sh_symbol">-</span>name<span class="sh_symbol">&gt;</span>&nbsp;&nbsp;&nbsp;&nbsp;</li><li>  <span class="sh_symbol">&lt;</span>welcome<span class="sh_symbol">-</span>file<span class="sh_symbol">-</span>list<span class="sh_symbol">&gt;</span></li><li>    <span class="sh_symbol">&lt;</span>welcome<span class="sh_symbol">-</span>file<span class="sh_symbol">&gt;</span>index<span class="sh_symbol">.</span>jsp<span class="sh_symbol">&lt;/</span>welcome<span class="sh_symbol">-</span>file<span class="sh_symbol">&gt;</span></li><li>  <span class="sh_symbol">&lt;/</span>welcome<span class="sh_symbol">-</span>file<span class="sh_symbol">-</span>list<span class="sh_symbol">&gt;</span></li><li>  &nbsp;&nbsp;&nbsp;&nbsp;</li><li> <span class="sh_symbol">&lt;!--</span> Spring前端控制器 <span class="sh_symbol">--&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>servlet<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>servlet<span class="sh_symbol">-</span>name<span class="sh_symbol">&gt;</span>SpringMVC<span class="sh_symbol">&lt;/</span>servlet<span class="sh_symbol">-</span>name<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>servlet<span class="sh_symbol">-</span><span class="sh_keyword">class</span><span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;org<span class="sh_symbol">.</span>springframework<span class="sh_symbol">.</span>web<span class="sh_symbol">.</span>servlet<span class="sh_symbol">.</span>DispatcherServlet</li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>servlet<span class="sh_symbol">-</span><span class="sh_keyword">class</span><span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>init<span class="sh_symbol">-</span>param<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>param<span class="sh_symbol">-</span>name<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;contextConfigLocation</li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>param<span class="sh_symbol">-</span>name<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>param<span class="sh_symbol">-</span>value<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;classpath<span class="sh_symbol">:</span>applicationContext<span class="sh_symbol">.</span>xml</li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>param<span class="sh_symbol">-</span>value<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>init<span class="sh_symbol">-</span>param<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>servlet<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>servlet<span class="sh_symbol">-</span>mapping<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>servlet<span class="sh_symbol">-</span>name<span class="sh_symbol">&gt;</span>SpringMVC<span class="sh_symbol">&lt;/</span>servlet<span class="sh_symbol">-</span>name<span class="sh_symbol">&gt;</span></li><li class="bold_code">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>url<span class="sh_symbol">-</span>pattern<span class="sh_symbol">&gt;</span><span class="sh_regexp">/&lt;/</span>url<span class="sh_symbol">-</span>pattern<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>servlet<span class="sh_symbol">-</span>mapping<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;!--</span> 使用Filter解决中文乱码问题 <span class="sh_symbol">--&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>filter<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;    <span class="sh_symbol">&lt;</span>filter<span class="sh_symbol">-</span>name<span class="sh_symbol">&gt;</span>encodingFilter<span class="sh_symbol">&lt;/</span>filter<span class="sh_symbol">-</span>name<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;    <span class="sh_symbol">&lt;</span>filter<span class="sh_symbol">-</span><span class="sh_keyword">class</span><span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;    &nbsp;&nbsp;&nbsp;&nbsp;org<span class="sh_symbol">.</span>springframework<span class="sh_symbol">.</span>web<span class="sh_symbol">.</span>filter<span class="sh_symbol">.</span>CharacterEncodingFilter</li><li>&nbsp;&nbsp;&nbsp;&nbsp;    <span class="sh_symbol">&lt;/</span>filter<span class="sh_symbol">-</span><span class="sh_keyword">class</span><span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;    <span class="sh_symbol">&lt;</span>init<span class="sh_symbol">-</span>param<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;        <span class="sh_symbol">&lt;</span>param<span class="sh_symbol">-</span>name<span class="sh_symbol">&gt;</span>encoding<span class="sh_symbol">&lt;/</span>param<span class="sh_symbol">-</span>name<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;        <span class="sh_symbol">&lt;</span>param<span class="sh_symbol">-</span>value<span class="sh_symbol">&gt;</span>UTF<span class="sh_number">-8</span><span class="sh_symbol">&lt;/</span>param<span class="sh_symbol">-</span>value<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;    <span class="sh_symbol">&lt;/</span>init<span class="sh_symbol">-</span>param<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>filter<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>filter<span class="sh_symbol">-</span>mapping<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;    <span class="sh_symbol">&lt;</span>filter<span class="sh_symbol">-</span>name<span class="sh_symbol">&gt;</span>encodingFilter<span class="sh_symbol">&lt;/</span>filter<span class="sh_symbol">-</span>name<span class="sh_symbol">&gt;</span></li><li class="bold_code">&nbsp;&nbsp;&nbsp;&nbsp;    <span class="sh_symbol">&lt;</span>url<span class="sh_symbol">-</span>pattern<span class="sh_symbol">&gt;</span><span class="sh_comment">/*&lt;/url-pattern&gt;</span></li><li><span class="sh_comment">&nbsp;&nbsp;&nbsp;&nbsp;&lt;/filter-mapping&gt;  </span></li><li><span class="sh_comment">  </span></li><li><span class="sh_comment">&lt;/web-app&gt;</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;web-app version="2.5" 
	xmlns="http://java.sun.com/xml/ns/javaee" 
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
	xsi:schemaLocation="http://java.sun.com/xml/ns/javaee 
	http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"&gt;
  &lt;display-name&gt;&lt;/display-name&gt;	
  &lt;welcome-file-list&gt;
    &lt;welcome-file&gt;index.jsp&lt;/welcome-file&gt;
  &lt;/welcome-file-list&gt;
  	
 &lt;!-- Spring前端控制器 --&gt;
	&lt;servlet&gt;
		&lt;servlet-name&gt;SpringMVC&lt;/servlet-name&gt;
		&lt;servlet-class&gt;
			org.springframework.web.servlet.DispatcherServlet
		&lt;/servlet-class&gt;
		&lt;init-param&gt;
			&lt;param-name&gt;
				contextConfigLocation
			&lt;/param-name&gt;
			&lt;param-value&gt;
				classpath:applicationContext.xml
			&lt;/param-value&gt;
		&lt;/init-param&gt;
	&lt;/servlet&gt;
	&lt;servlet-mapping&gt;
		&lt;servlet-name&gt;SpringMVC&lt;/servlet-name&gt;
#cold_bold		&lt;url-pattern&gt;/&lt;/url-pattern&gt;
	&lt;/servlet-mapping&gt;
	&lt;!-- 使用Filter解决中文乱码问题 --&gt;
	&lt;filter&gt;
	    &lt;filter-name&gt;encodingFilter&lt;/filter-name&gt;
	    &lt;filter-class&gt;
	    	org.springframework.web.filter.CharacterEncodingFilter
	    &lt;/filter-class&gt;
	    &lt;init-param&gt;
	        &lt;param-name&gt;encoding&lt;/param-name&gt;
	        &lt;param-value&gt;UTF-8&lt;/param-value&gt;
	    &lt;/init-param&gt;
	&lt;/filter&gt;
	&lt;filter-mapping&gt;
	    &lt;filter-name&gt;encodingFilter&lt;/filter-name&gt;
#cold_bold	    &lt;url-pattern&gt;/*&lt;/url-pattern&gt;
	&lt;/filter-mapping&gt;  
  
&lt;/web-app&gt;
</pre></div></div>
      <p>修改applicationContext.xml，增加支持RESTful访问静态资源的配置，关键代码如下：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS02/DAY06/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS02/DAY06/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS02/DAY06/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li class="bold_code">&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;!--</span> 支持RESTful访问静态资源 <span class="sh_symbol">--&gt;</span></li><li class="bold_code">&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>mvc<span class="sh_symbol">:</span><span class="sh_keyword">default</span><span class="sh_symbol">-</span>servlet<span class="sh_symbol">-</span><span class="sh_normal">handler </span><span class="sh_symbol">/&gt;</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">#cold_bold	&lt;!-- 支持RESTful访问静态资源 --&gt;
#cold_bold	&lt;mvc:default-servlet-handler /&gt;
</pre></div></div>
      <p>导入Spring中使用Ajax所需的3个开发包，如下图：</p>
      <div class="image">
        <img src="./CASE_files/image007.png">
        <p>图-7</p>
      </div>
      <p class="number">步骤三：使用RESTful重构Controller</p>
      <p>修改EmpController，使用RESTful设计访问URI，代码如下：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS02/DAY06/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS02/DAY06/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS02/DAY06/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li>package com<span class="sh_symbol">.</span>tarena<span class="sh_symbol">.</span>controller<span class="sh_symbol">;</span></li><li><span style="display:none;">&nbsp;</span></li><li>import java<span class="sh_symbol">.</span>util<span class="sh_symbol">.</span>List<span class="sh_symbol">;</span></li><li>import javax<span class="sh_symbol">.</span>annotation<span class="sh_symbol">.</span>Resource<span class="sh_symbol">;</span></li><li>import org<span class="sh_symbol">.</span>springframework<span class="sh_symbol">.</span>stereotype<span class="sh_symbol">.</span>Controller<span class="sh_symbol">;</span></li><li>import org<span class="sh_symbol">.</span>springframework<span class="sh_symbol">.</span>ui<span class="sh_symbol">.</span>Model<span class="sh_symbol">;</span></li><li>import org<span class="sh_symbol">.</span>springframework<span class="sh_symbol">.</span>web<span class="sh_symbol">.</span>bind<span class="sh_symbol">.</span>annotation<span class="sh_symbol">.</span>PathVariable<span class="sh_symbol">;</span></li><li>import org<span class="sh_symbol">.</span>springframework<span class="sh_symbol">.</span>web<span class="sh_symbol">.</span>bind<span class="sh_symbol">.</span>annotation<span class="sh_symbol">.</span>RequestBody<span class="sh_symbol">;</span></li><li>import org<span class="sh_symbol">.</span>springframework<span class="sh_symbol">.</span>web<span class="sh_symbol">.</span>bind<span class="sh_symbol">.</span>annotation<span class="sh_symbol">.</span>RequestMapping<span class="sh_symbol">;</span></li><li>import org<span class="sh_symbol">.</span>springframework<span class="sh_symbol">.</span>web<span class="sh_symbol">.</span>bind<span class="sh_symbol">.</span>annotation<span class="sh_symbol">.</span>RequestMethod<span class="sh_symbol">;</span></li><li>import org<span class="sh_symbol">.</span>springframework<span class="sh_symbol">.</span>web<span class="sh_symbol">.</span>bind<span class="sh_symbol">.</span>annotation<span class="sh_symbol">.</span>ResponseBody<span class="sh_symbol">;</span></li><li>import com<span class="sh_symbol">.</span>tarena<span class="sh_symbol">.</span>dao<span class="sh_symbol">.</span>EmpDao<span class="sh_symbol">;</span></li><li>import com<span class="sh_symbol">.</span>tarena<span class="sh_symbol">.</span>entity<span class="sh_symbol">.</span>Emp<span class="sh_symbol">;</span></li><li><span style="display:none;">&nbsp;</span></li><li>@Controller</li><li>@<span class="sh_function">RequestMapping</span><span class="sh_symbol">(</span><span class="sh_string">"/emp"</span><span class="sh_symbol">)</span></li><li><span class="sh_keyword">public</span> <span class="sh_keyword">class</span> EmpController <span class="sh_cbracket">{</span></li><li><span style="display:none;">&nbsp;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;@Resource</li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">private</span> EmpDao empDao<span class="sh_symbol">;</span></li><li><span style="display:none;">&nbsp;</span></li><li class="bold_code">&nbsp;&nbsp;&nbsp;&nbsp;@<span class="sh_function">RequestMapping</span><span class="sh_symbol">(</span>value<span class="sh_symbol">=</span><span class="sh_string">"/find"</span><span class="sh_symbol">,</span>method<span class="sh_symbol">=</span>RequestMethod<span class="sh_symbol">.</span>GET<span class="sh_symbol">)</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">public</span> <span class="sh_predef_func">String</span> <span class="sh_function">find</span><span class="sh_symbol">(</span>Model model<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;List<span class="sh_symbol">&lt;</span>Emp<span class="sh_symbol">&gt;</span> list <span class="sh_symbol">=</span> empDao<span class="sh_symbol">.</span><span class="sh_function">findAll</span><span class="sh_symbol">();</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;model<span class="sh_symbol">.</span><span class="sh_function">addAttribute</span><span class="sh_symbol">(</span><span class="sh_string">"emps"</span><span class="sh_symbol">,</span> list<span class="sh_symbol">);</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">return</span> <span class="sh_string">"emp/emp_list"</span><span class="sh_symbol">;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_cbracket">}</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_comment">/**</span></li><li><span class="sh_comment">&nbsp;&nbsp;&nbsp;&nbsp; * 打开新增页面</span></li><li><span class="sh_comment">&nbsp;&nbsp;&nbsp;&nbsp; */</span></li><li class="bold_code">&nbsp;&nbsp;&nbsp;&nbsp;@<span class="sh_function">RequestMapping</span><span class="sh_symbol">(</span>value<span class="sh_symbol">=</span><span class="sh_string">"/toAdd"</span><span class="sh_symbol">,</span>method<span class="sh_symbol">=</span>RequestMethod<span class="sh_symbol">.</span>GET<span class="sh_symbol">)</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">public</span> <span class="sh_predef_func">String</span> <span class="sh_function">toAdd</span><span class="sh_symbol">()</span> <span class="sh_cbracket">{</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">return</span> <span class="sh_string">"emp/add_emp"</span><span class="sh_symbol">;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_cbracket">}</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_comment">/**</span></li><li><span class="sh_comment">&nbsp;&nbsp;&nbsp;&nbsp; * 新增保存</span></li><li><span class="sh_comment">&nbsp;&nbsp;&nbsp;&nbsp; */</span></li><li class="bold_code">&nbsp;&nbsp;&nbsp;&nbsp;@<span class="sh_function">RequestMapping</span><span class="sh_symbol">(</span>value<span class="sh_symbol">=</span><span class="sh_string">"/add"</span><span class="sh_symbol">,</span>method<span class="sh_symbol">=</span>RequestMethod<span class="sh_symbol">.</span>POST<span class="sh_symbol">)</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">public</span> <span class="sh_predef_func">String</span> <span class="sh_function">add</span><span class="sh_symbol">(</span>Emp emp<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;empDao<span class="sh_symbol">.</span><span class="sh_function">save</span><span class="sh_symbol">(</span>emp<span class="sh_symbol">);</span></li><li class="bold_code">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">return</span> <span class="sh_string">"redirect:find"</span><span class="sh_symbol">;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_cbracket">}</span>&nbsp;&nbsp;&nbsp;&nbsp;</li><li><span style="display:none;">&nbsp;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_comment">/**</span></li><li><span class="sh_comment">&nbsp;&nbsp;&nbsp;&nbsp; * 打开修改页面</span></li><li><span class="sh_comment">&nbsp;&nbsp;&nbsp;&nbsp; */</span></li><li class="bold_code">&nbsp;&nbsp;&nbsp;&nbsp;@<span class="sh_function">RequestMapping</span><span class="sh_symbol">(</span>value<span class="sh_symbol">=</span><span class="sh_string">"/toUpdate/{id}"</span><span class="sh_symbol">,</span>method<span class="sh_symbol">=</span>RequestMethod<span class="sh_symbol">.</span>GET<span class="sh_symbol">)</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">public</span> <span class="sh_predef_func">String</span> <span class="sh_function">toUpdate</span><span class="sh_symbol">(</span></li><li class="bold_code">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="sh_function">PathVariable</span><span class="sh_symbol">(</span><span class="sh_string">"id"</span><span class="sh_symbol">)</span> int id<span class="sh_symbol">,</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Model model<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Emp e <span class="sh_symbol">=</span> empDao<span class="sh_symbol">.</span><span class="sh_function">findById</span><span class="sh_symbol">(</span>id<span class="sh_symbol">);</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;model<span class="sh_symbol">.</span><span class="sh_function">addAttribute</span><span class="sh_symbol">(</span><span class="sh_string">"emp"</span><span class="sh_symbol">,</span> e<span class="sh_symbol">);</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">return</span> <span class="sh_string">"emp/update_emp"</span><span class="sh_symbol">;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_cbracket">}</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_comment">/**</span></li><li><span class="sh_comment">&nbsp;&nbsp;&nbsp;&nbsp; * 修改保存</span></li><li><span class="sh_comment">&nbsp;&nbsp;&nbsp;&nbsp; */</span></li><li class="bold_code">&nbsp;&nbsp;&nbsp;&nbsp;@<span class="sh_function">RequestMapping</span><span class="sh_symbol">(</span>value<span class="sh_symbol">=</span><span class="sh_string">"/update"</span><span class="sh_symbol">,</span>method<span class="sh_symbol">=</span>RequestMethod<span class="sh_symbol">.</span>PUT<span class="sh_symbol">)</span></li><li class="bold_code">&nbsp;&nbsp;&nbsp;&nbsp;@ResponseBody</li><li class="bold_code">&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">public</span> boolean <span class="sh_function">update</span><span class="sh_symbol">(</span>@RequestBody Emp emp<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span></li><li class="bold_code">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;empDao<span class="sh_symbol">.</span><span class="sh_function">update</span><span class="sh_symbol">(</span>emp<span class="sh_symbol">);</span></li><li class="bold_code">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">return</span> <span class="sh_keyword">true</span><span class="sh_symbol">;</span></li><li class="bold_code">&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_cbracket">}</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_comment">/**</span></li><li><span class="sh_comment">&nbsp;&nbsp;&nbsp;&nbsp; * 删除</span></li><li><span class="sh_comment">&nbsp;&nbsp;&nbsp;&nbsp; */</span></li><li class="bold_code">&nbsp;&nbsp;&nbsp;&nbsp;@<span class="sh_function">RequestMapping</span><span class="sh_symbol">(</span>value<span class="sh_symbol">=</span><span class="sh_string">"/{id}"</span><span class="sh_symbol">,</span>method<span class="sh_symbol">=</span>RequestMethod<span class="sh_symbol">.</span>DELETE<span class="sh_symbol">)</span></li><li class="bold_code">&nbsp;&nbsp;&nbsp;&nbsp;@ResponseBody</li><li class="bold_code">&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">public</span> boolean <span class="sh_keyword">delete</span><span class="sh_symbol">(</span>@<span class="sh_function">PathVariable</span><span class="sh_symbol">(</span><span class="sh_string">"id"</span><span class="sh_symbol">)</span> int id<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span></li><li class="bold_code">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;empDao<span class="sh_symbol">.</span><span class="sh_keyword">delete</span><span class="sh_symbol">(</span>id<span class="sh_symbol">);</span></li><li class="bold_code">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">return</span> <span class="sh_keyword">true</span><span class="sh_symbol">;</span></li><li class="bold_code">&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_cbracket">}</span></li><li><span style="display:none;">&nbsp;</span></li><li><span class="sh_cbracket">}</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">package com.tarena.controller;

import java.util.List;
import javax.annotation.Resource;
import org.springframework.stereotype.Controller;
import org.springframework.ui.Model;
import org.springframework.web.bind.annotation.PathVariable;
import org.springframework.web.bind.annotation.RequestBody;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;
import org.springframework.web.bind.annotation.ResponseBody;
import com.tarena.dao.EmpDao;
import com.tarena.entity.Emp;

@Controller
@RequestMapping("/emp")
public class EmpController {

	@Resource
	private EmpDao empDao;

#cold_bold	@RequestMapping(value="/find",method=RequestMethod.GET)
	public String find(Model model) {
		List&lt;Emp&gt; list = empDao.findAll();
		model.addAttribute("emps", list);
		return "emp/emp_list";
	}
	
	/**
	 * 打开新增页面
	 */
#cold_bold	@RequestMapping(value="/toAdd",method=RequestMethod.GET)
	public String toAdd() {
		return "emp/add_emp";
	}
	
	/**
	 * 新增保存
	 */
#cold_bold	@RequestMapping(value="/add",method=RequestMethod.POST)
	public String add(Emp emp) {
		empDao.save(emp);
#cold_bold		return "redirect:find";
	}	

	/**
	 * 打开修改页面
	 */
#cold_bold	@RequestMapping(value="/toUpdate/{id}",method=RequestMethod.GET)
	public String toUpdate(
#cold_bold			@PathVariable("id") int id,
			Model model) {
		Emp e = empDao.findById(id);
		model.addAttribute("emp", e);
		return "emp/update_emp";
	}
	
	/**
	 * 修改保存
	 */
#cold_bold	@RequestMapping(value="/update",method=RequestMethod.PUT)
#cold_bold	@ResponseBody
#cold_bold	public boolean update(@RequestBody Emp emp) {
#cold_bold		empDao.update(emp);
#cold_bold		return true;
#cold_bold	}
	
	/**
	 * 删除
	 */
#cold_bold	@RequestMapping(value="/{id}",method=RequestMethod.DELETE)
#cold_bold	@ResponseBody
#cold_bold	public boolean delete(@PathVariable("id") int id) {
#cold_bold		empDao.delete(id);
#cold_bold		return true;
#cold_bold	}

}
</pre></div></div>
      <p class="number">步骤四：修改页面发请求的方式</p>
      <p>在WebRoot/js文件夹下创建json.js，用于将表单数据转换成json对象，代码如下：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS02/DAY06/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS02/DAY06/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS02/DAY06/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_comment">// 将表单数据转换成json对象</span></li><li>$<span class="sh_symbol">.</span>fn<span class="sh_symbol">.</span>serializeObject <span class="sh_symbol">=</span> <span class="sh_keyword">function</span><span class="sh_symbol">()</span> <span class="sh_cbracket">{</span>    </li><li>   <span class="sh_keyword">var</span> o <span class="sh_symbol">=</span> <span class="sh_cbracket">{}</span><span class="sh_symbol">;</span>    </li><li>   <span class="sh_keyword">var</span> a <span class="sh_symbol">=</span> <span class="sh_keyword">this</span><span class="sh_symbol">.</span><span class="sh_function">serializeArray</span><span class="sh_symbol">();</span></li><li>   $<span class="sh_symbol">.</span><span class="sh_function">each</span><span class="sh_symbol">(</span>a<span class="sh_symbol">,</span> <span class="sh_keyword">function</span><span class="sh_symbol">()</span> <span class="sh_cbracket">{</span></li><li>       <span class="sh_keyword">if</span> <span class="sh_symbol">(</span>o<span class="sh_symbol">[</span><span class="sh_keyword">this</span><span class="sh_symbol">.</span>name<span class="sh_symbol">])</span> <span class="sh_cbracket">{</span></li><li>           <span class="sh_keyword">if</span> <span class="sh_symbol">(!</span>o<span class="sh_symbol">[</span><span class="sh_keyword">this</span><span class="sh_symbol">.</span>name<span class="sh_symbol">].</span>push<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span></li><li>               o<span class="sh_symbol">[</span><span class="sh_keyword">this</span><span class="sh_symbol">.</span>name<span class="sh_symbol">]</span> <span class="sh_symbol">=</span> <span class="sh_symbol">[</span>o<span class="sh_symbol">[</span><span class="sh_keyword">this</span><span class="sh_symbol">.</span>name<span class="sh_symbol">]];</span></li><li>           <span class="sh_cbracket">}</span></li><li>           o<span class="sh_symbol">[</span><span class="sh_keyword">this</span><span class="sh_symbol">.</span>name<span class="sh_symbol">].</span><span class="sh_function">push</span><span class="sh_symbol">(</span><span class="sh_keyword">this</span><span class="sh_symbol">.</span>value <span class="sh_symbol">||</span> <span class="sh_string">''</span><span class="sh_symbol">);</span></li><li>       <span class="sh_cbracket">}</span> <span class="sh_keyword">else</span> <span class="sh_cbracket">{</span></li><li>           o<span class="sh_symbol">[</span><span class="sh_keyword">this</span><span class="sh_symbol">.</span>name<span class="sh_symbol">]</span> <span class="sh_symbol">=</span> <span class="sh_keyword">this</span><span class="sh_symbol">.</span>value <span class="sh_symbol">||</span> <span class="sh_string">''</span><span class="sh_symbol">;</span></li><li>       <span class="sh_cbracket">}</span>    </li><li>   <span class="sh_cbracket">}</span><span class="sh_symbol">);</span></li><li>   <span class="sh_keyword">return</span> o<span class="sh_symbol">;</span> </li><li><span class="sh_cbracket">}</span><span class="sh_symbol">;</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">// 将表单数据转换成json对象
$.fn.serializeObject = function() {    
   var o = {};    
   var a = this.serializeArray();
   $.each(a, function() {
       if (o[this.name]) {
           if (!o[this.name].push) {
               o[this.name] = [o[this.name]];
           }
           o[this.name].push(this.value || '');
       } else {
           o[this.name] = this.value || '';
       }    
   });
   return o; 
};
</pre></div></div>
      <p>在emp_list.jsp中，对新增、修改按钮的URL进行修改，并将删除按钮改为RESTful的删除提交方式，代码如下：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS02/DAY06/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS02/DAY06/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS02/DAY06/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">&lt;%</span>@page pageEncoding<span class="sh_symbol">=</span><span class="sh_string">"utf-8"</span><span class="sh_symbol">%&gt;</span></li><li><span class="sh_symbol">&lt;%</span>@taglib uri<span class="sh_symbol">=</span><span class="sh_string">"http://java.sun.com/jsp/jstl/core"</span> prefix<span class="sh_symbol">=</span><span class="sh_string">"c"</span><span class="sh_symbol">%&gt;</span></li><li><span class="sh_symbol">&lt;</span>html<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;</span>head<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>script type<span class="sh_symbol">=</span><span class="sh_string">"text/javascript"</span> src<span class="sh_symbol">=</span><span class="sh_string">"../js/jquery-1.11.1.js"</span><span class="sh_symbol">&gt;&lt;/</span>script<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>script type<span class="sh_symbol">=</span><span class="sh_string">"text/javascript"</span><span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">function</span> <span class="sh_function">delete_emp</span><span class="sh_symbol">(</span>id<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">var</span> r <span class="sh_symbol">=</span> window<span class="sh_symbol">.</span><span class="sh_function">confirm</span><span class="sh_symbol">(</span><span class="sh_string">"确定要删除此数据吗？"</span><span class="sh_symbol">);</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">if</span><span class="sh_symbol">(</span>r<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span></li><li class="bold_code">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_comment">//location.href = "deleteEmp.do?id="+id;</span></li><li class="bold_code">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$<span class="sh_symbol">.</span><span class="sh_function">ajax</span><span class="sh_symbol">(</span><span class="sh_cbracket">{</span></li><li class="bold_code">            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type<span class="sh_symbol">:</span><span class="sh_string">"DELETE"</span><span class="sh_symbol">,</span></li><li class="bold_code">            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;url<span class="sh_symbol">:</span><span class="sh_string">"/SpringRestful/emp/"</span><span class="sh_symbol">+</span>id<span class="sh_symbol">,</span></li><li class="bold_code">            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dataType<span class="sh_symbol">:</span><span class="sh_string">"json"</span><span class="sh_symbol">,</span></li><li class="bold_code">            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;success<span class="sh_symbol">:</span><span class="sh_keyword">function</span><span class="sh_symbol">(</span>data<span class="sh_symbol">)</span><span class="sh_cbracket">{</span></li><li class="bold_code">            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;location<span class="sh_symbol">.</span>href <span class="sh_symbol">=</span> <span class="sh_string">"/SpringRestful/emp/find"</span><span class="sh_symbol">;</span></li><li class="bold_code">            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_cbracket">}</span></li><li class="bold_code">&nbsp;&nbsp;&nbsp;&nbsp;            <span class="sh_cbracket">}</span><span class="sh_symbol">);</span>  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_cbracket">}</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_cbracket">}</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>script<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;/</span>head<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;</span>body<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>div align<span class="sh_symbol">=</span><span class="sh_string">"center"</span><span class="sh_symbol">&gt;</span></li><li class="bold_code">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>input type<span class="sh_symbol">=</span><span class="sh_string">"button"</span> value<span class="sh_symbol">=</span><span class="sh_string">"新增"</span> onclick<span class="sh_symbol">=</span><span class="sh_string">"location.href='toAdd'"</span><span class="sh_symbol">/&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>div<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>table width<span class="sh_symbol">=</span><span class="sh_string">"60%"</span> border<span class="sh_symbol">=</span><span class="sh_string">"1"</span> cellpadding<span class="sh_symbol">=</span><span class="sh_string">"2"</span> cellspacing<span class="sh_symbol">=</span><span class="sh_string">"0"</span> align<span class="sh_symbol">=</span><span class="sh_string">"center"</span><span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>tr<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>th<span class="sh_symbol">&gt;</span>EMPNO<span class="sh_symbol">&lt;/</span>th<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>th<span class="sh_symbol">&gt;</span>ENAME<span class="sh_symbol">&lt;/</span>th<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>th<span class="sh_symbol">&gt;</span>JOB<span class="sh_symbol">&lt;/</span>th<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>th<span class="sh_symbol">&gt;</span>MGR<span class="sh_symbol">&lt;/</span>th<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>th<span class="sh_symbol">&gt;</span>HIREDATE<span class="sh_symbol">&lt;/</span>th<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>th<span class="sh_symbol">&gt;</span>SAL<span class="sh_symbol">&lt;/</span>th<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>th<span class="sh_symbol">&gt;</span>COMM<span class="sh_symbol">&lt;/</span>th<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>th<span class="sh_symbol">&gt;</span>DEPTNO<span class="sh_symbol">&lt;/</span>th<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>th<span class="sh_symbol">&gt;&lt;/</span>th<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>tr<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>c<span class="sh_symbol">:</span>forEach items<span class="sh_symbol">=</span><span class="sh_string">"${emps }"</span> <span class="sh_keyword">var</span><span class="sh_symbol">=</span><span class="sh_string">"emp"</span><span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>tr<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>td<span class="sh_symbol">&gt;</span>$<span class="sh_cbracket">{</span>emp<span class="sh_symbol">.</span>empno <span class="sh_cbracket">}</span><span class="sh_symbol">&lt;/</span>td<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>td<span class="sh_symbol">&gt;</span>$<span class="sh_cbracket">{</span>emp<span class="sh_symbol">.</span>ename <span class="sh_cbracket">}</span><span class="sh_symbol">&lt;/</span>td<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>td<span class="sh_symbol">&gt;</span>$<span class="sh_cbracket">{</span>emp<span class="sh_symbol">.</span>job <span class="sh_cbracket">}</span><span class="sh_symbol">&lt;/</span>td<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>td<span class="sh_symbol">&gt;</span>$<span class="sh_cbracket">{</span>emp<span class="sh_symbol">.</span>mgr <span class="sh_cbracket">}</span><span class="sh_symbol">&lt;/</span>td<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>td<span class="sh_symbol">&gt;</span>$<span class="sh_cbracket">{</span>emp<span class="sh_symbol">.</span>hiredate <span class="sh_cbracket">}</span><span class="sh_symbol">&lt;/</span>td<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>td<span class="sh_symbol">&gt;</span>$<span class="sh_cbracket">{</span>emp<span class="sh_symbol">.</span>sal <span class="sh_cbracket">}</span><span class="sh_symbol">&lt;/</span>td<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>td<span class="sh_symbol">&gt;</span>$<span class="sh_cbracket">{</span>emp<span class="sh_symbol">.</span>comm <span class="sh_cbracket">}</span><span class="sh_symbol">&lt;/</span>td<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>td<span class="sh_symbol">&gt;</span>$<span class="sh_cbracket">{</span>emp<span class="sh_symbol">.</span>deptno <span class="sh_cbracket">}</span><span class="sh_symbol">&lt;/</span>td<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>td<span class="sh_symbol">&gt;</span></li><li class="bold_code">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>input type<span class="sh_symbol">=</span><span class="sh_string">"button"</span> value<span class="sh_symbol">=</span><span class="sh_string">"修改"</span> onclick<span class="sh_symbol">=</span><span class="sh_string">"location.href='toUpdate/${emp.empno }'"</span><span class="sh_symbol">/&gt;</span></li><li class="bold_code">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>input type<span class="sh_symbol">=</span><span class="sh_string">"button"</span> value<span class="sh_symbol">=</span><span class="sh_string">"删除"</span> onclick<span class="sh_symbol">=</span><span class="sh_string">"delete_emp(${emp.empno });"</span><span class="sh_symbol">/&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>td<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>tr<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>c<span class="sh_symbol">:</span>forEach<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>table<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;/</span>body<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;/</span>html<span class="sh_symbol">&gt;</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">&lt;%@page pageEncoding="utf-8"%&gt;
&lt;%@taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%&gt;
&lt;html&gt;
&lt;head&gt;
	&lt;script type="text/javascript" src="../js/jquery-1.11.1.js"&gt;&lt;/script&gt;
	&lt;script type="text/javascript"&gt;
		function delete_emp(id) {
			var r = window.confirm("确定要删除此数据吗？");
			if(r) {
#cold_bold				//location.href = "deleteEmp.do?id="+id;
#cold_bold				$.ajax({
#cold_bold            		type:"DELETE",
#cold_bold            		url:"/SpringRestful/emp/"+id,
#cold_bold            		dataType:"json",
#cold_bold            		success:function(data){
#cold_bold            			location.href = "/SpringRestful/emp/find";
#cold_bold            		}
#cold_bold	            });  				
			}
		}
	&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
	&lt;div align="center"&gt;
#cold_bold		&lt;input type="button" value="新增" onclick="location.href='toAdd'"/&gt;
	&lt;/div&gt;
	&lt;table width="60%" border="1" cellpadding="2" cellspacing="0" align="center"&gt;
		&lt;tr&gt;
			&lt;th&gt;EMPNO&lt;/th&gt;
			&lt;th&gt;ENAME&lt;/th&gt;
			&lt;th&gt;JOB&lt;/th&gt;
			&lt;th&gt;MGR&lt;/th&gt;
			&lt;th&gt;HIREDATE&lt;/th&gt;
			&lt;th&gt;SAL&lt;/th&gt;
			&lt;th&gt;COMM&lt;/th&gt;
			&lt;th&gt;DEPTNO&lt;/th&gt;
			&lt;th&gt;&lt;/th&gt;
		&lt;/tr&gt;
		&lt;c:forEach items="${emps }" var="emp"&gt;
			&lt;tr&gt;
				&lt;td&gt;${emp.empno }&lt;/td&gt;
				&lt;td&gt;${emp.ename }&lt;/td&gt;
				&lt;td&gt;${emp.job }&lt;/td&gt;
				&lt;td&gt;${emp.mgr }&lt;/td&gt;
				&lt;td&gt;${emp.hiredate }&lt;/td&gt;
				&lt;td&gt;${emp.sal }&lt;/td&gt;
				&lt;td&gt;${emp.comm }&lt;/td&gt;
				&lt;td&gt;${emp.deptno }&lt;/td&gt;
				&lt;td&gt;
#cold_bold					&lt;input type="button" value="修改" onclick="location.href='toUpdate/${emp.empno }'"/&gt;
#cold_bold					&lt;input type="button" value="删除" onclick="delete_emp(${emp.empno });"/&gt;
				&lt;/td&gt;
			&lt;/tr&gt;
		&lt;/c:forEach&gt;
	&lt;/table&gt;
&lt;/body&gt;
&lt;/html&gt;
</pre></div></div>
      <p>修改add_emp.jsp表单的提交路径，代码如下：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS02/DAY06/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS02/DAY06/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS02/DAY06/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">&lt;%</span>@page pageEncoding<span class="sh_symbol">=</span><span class="sh_string">"utf-8"</span><span class="sh_symbol">%&gt;</span></li><li><span class="sh_symbol">&lt;%</span>@taglib uri<span class="sh_symbol">=</span><span class="sh_string">"http://java.sun.com/jsp/jstl/core"</span> prefix<span class="sh_symbol">=</span><span class="sh_string">"c"</span><span class="sh_symbol">%&gt;</span></li><li><span class="sh_symbol">&lt;</span>html<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;</span>head<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;/</span>head<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;</span>body<span class="sh_symbol">&gt;</span></li><li class="bold_code">&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>form action<span class="sh_symbol">=</span><span class="sh_string">"add"</span> method<span class="sh_symbol">=</span><span class="sh_string">"post"</span><span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>table width<span class="sh_symbol">=</span><span class="sh_string">"40%"</span> border<span class="sh_symbol">=</span><span class="sh_string">"1"</span> cellpadding<span class="sh_symbol">=</span><span class="sh_string">"2"</span> cellspacing<span class="sh_symbol">=</span><span class="sh_string">"0"</span> align<span class="sh_symbol">=</span><span class="sh_string">"center"</span><span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>tr<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>td<span class="sh_symbol">&gt;</span>姓名：<span class="sh_symbol">&lt;/</span>td<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>td<span class="sh_symbol">&gt;&lt;</span>input type<span class="sh_symbol">=</span><span class="sh_string">"text"</span> name<span class="sh_symbol">=</span><span class="sh_string">"ename"</span><span class="sh_regexp">/&gt;&lt;/</span>td<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>tr<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>tr<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>td<span class="sh_symbol">&gt;</span>岗位：<span class="sh_symbol">&lt;/</span>td<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>td<span class="sh_symbol">&gt;&lt;</span>input type<span class="sh_symbol">=</span><span class="sh_string">"text"</span> name<span class="sh_symbol">=</span><span class="sh_string">"job"</span><span class="sh_regexp">/&gt;&lt;/</span>td<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>tr<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>tr<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>td<span class="sh_symbol">&gt;</span>工资：<span class="sh_symbol">&lt;/</span>td<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>td<span class="sh_symbol">&gt;&lt;</span>input type<span class="sh_symbol">=</span><span class="sh_string">"text"</span> name<span class="sh_symbol">=</span><span class="sh_string">"sal"</span><span class="sh_regexp">/&gt;&lt;/</span>td<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>tr<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>tr<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>td colspan<span class="sh_symbol">=</span><span class="sh_string">"2"</span><span class="sh_symbol">&gt;&lt;</span>input type<span class="sh_symbol">=</span><span class="sh_string">"submit"</span> value<span class="sh_symbol">=</span><span class="sh_string">"保存"</span> <span class="sh_regexp">/&gt;&lt;/</span>td<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>tr<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>table<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>form<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;/</span>body<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;/</span>html<span class="sh_symbol">&gt;</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">&lt;%@page pageEncoding="utf-8"%&gt;
&lt;%@taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%&gt;
&lt;html&gt;
&lt;head&gt;
&lt;/head&gt;
&lt;body&gt;
#cold_bold	&lt;form action="add" method="post"&gt;
		&lt;table width="40%" border="1" cellpadding="2" cellspacing="0" align="center"&gt;
			&lt;tr&gt;
				&lt;td&gt;姓名：&lt;/td&gt;
				&lt;td&gt;&lt;input type="text" name="ename"/&gt;&lt;/td&gt;
			&lt;/tr&gt;
			&lt;tr&gt;
				&lt;td&gt;岗位：&lt;/td&gt;
				&lt;td&gt;&lt;input type="text" name="job"/&gt;&lt;/td&gt;
			&lt;/tr&gt;
			&lt;tr&gt;
				&lt;td&gt;工资：&lt;/td&gt;
				&lt;td&gt;&lt;input type="text" name="sal"/&gt;&lt;/td&gt;
			&lt;/tr&gt;
			&lt;tr&gt;
				&lt;td colspan="2"&gt;&lt;input type="submit" value="保存" /&gt;&lt;/td&gt;
			&lt;/tr&gt;
		&lt;/table&gt;
	&lt;/form&gt;
&lt;/body&gt;
&lt;/html&gt;
</pre></div></div>
      <p>修改update_emp.jsp中表单提交的方式和路径，代码如下：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS02/DAY06/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS02/DAY06/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS02/DAY06/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">&lt;%</span>@page pageEncoding<span class="sh_symbol">=</span><span class="sh_string">"utf-8"</span><span class="sh_symbol">%&gt;</span></li><li><span class="sh_symbol">&lt;%</span>@taglib uri<span class="sh_symbol">=</span><span class="sh_string">"http://java.sun.com/jsp/jstl/core"</span> prefix<span class="sh_symbol">=</span><span class="sh_string">"c"</span><span class="sh_symbol">%&gt;</span></li><li><span class="sh_symbol">&lt;</span>html<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;</span>head<span class="sh_symbol">&gt;</span></li><li class="bold_code">&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>script type<span class="sh_symbol">=</span><span class="sh_string">"text/javascript"</span> src<span class="sh_symbol">=</span><span class="sh_string">"../../js/jquery-1.11.1.js"</span><span class="sh_symbol">&gt;&lt;/</span>script<span class="sh_symbol">&gt;</span></li><li class="bold_code">&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>script type<span class="sh_symbol">=</span><span class="sh_string">"text/javascript"</span> src<span class="sh_symbol">=</span><span class="sh_string">"../../js/json.js"</span><span class="sh_symbol">&gt;&lt;/</span>script<span class="sh_symbol">&gt;</span></li><li class="bold_code">&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>script type<span class="sh_symbol">=</span><span class="sh_string">"text/javascript"</span><span class="sh_symbol">&gt;</span></li><li class="bold_code">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">function</span> <span class="sh_function">save</span><span class="sh_symbol">()</span> <span class="sh_cbracket">{</span></li><li class="bold_code">           &nbsp;&nbsp;&nbsp;&nbsp;$<span class="sh_symbol">.</span><span class="sh_function">ajax</span><span class="sh_symbol">(</span><span class="sh_cbracket">{</span></li><li class="bold_code">           &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type<span class="sh_symbol">:</span><span class="sh_string">"PUT"</span><span class="sh_symbol">,</span></li><li class="bold_code">           &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;url<span class="sh_symbol">:</span><span class="sh_string">"/SpringRestful/emp/update"</span><span class="sh_symbol">,</span></li><li class="bold_code">           &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;data<span class="sh_symbol">:</span>JSON<span class="sh_symbol">.</span><span class="sh_function">stringify</span><span class="sh_symbol">(</span>$<span class="sh_symbol">(</span><span class="sh_string">"#myform"</span><span class="sh_symbol">).</span><span class="sh_function">serializeObject</span><span class="sh_symbol">()),</span></li><li class="bold_code">           &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dataType<span class="sh_symbol">:</span><span class="sh_string">"json"</span><span class="sh_symbol">,</span></li><li class="bold_code">           &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;contentType<span class="sh_symbol">:</span><span class="sh_string">"application/json"</span><span class="sh_symbol">,</span></li><li class="bold_code">           &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;success<span class="sh_symbol">:</span><span class="sh_keyword">function</span><span class="sh_symbol">(</span>data<span class="sh_symbol">)</span><span class="sh_cbracket">{</span></li><li class="bold_code">           &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;location<span class="sh_symbol">.</span>href <span class="sh_symbol">=</span> <span class="sh_string">"/SpringRestful/emp/find"</span><span class="sh_symbol">;</span></li><li class="bold_code">           &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_cbracket">}</span></li><li class="bold_code">           &nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_cbracket">}</span><span class="sh_symbol">);</span></li><li class="bold_code">           <span class="sh_cbracket">}</span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</li><li class="bold_code">&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>script<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;/</span>head<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;</span>body<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>form action<span class="sh_symbol">=</span><span class="sh_string">"updateEmp.do"</span> method<span class="sh_symbol">=</span><span class="sh_string">"post"</span> id<span class="sh_symbol">=</span><span class="sh_string">"myform"</span><span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>table width<span class="sh_symbol">=</span><span class="sh_string">"40%"</span> border<span class="sh_symbol">=</span><span class="sh_string">"1"</span> cellpadding<span class="sh_symbol">=</span><span class="sh_string">"2"</span> cellspacing<span class="sh_symbol">=</span><span class="sh_string">"0"</span> align<span class="sh_symbol">=</span><span class="sh_string">"center"</span><span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>tr<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>td<span class="sh_symbol">&gt;</span>EMPNO：<span class="sh_symbol">&lt;/</span>td<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>td<span class="sh_symbol">&gt;&lt;</span>input type<span class="sh_symbol">=</span><span class="sh_string">"text"</span> name<span class="sh_symbol">=</span><span class="sh_string">"empno"</span> value<span class="sh_symbol">=</span><span class="sh_string">"${emp.empno }"</span><span class="sh_regexp">/&gt;&lt;/</span>td<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>tr<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>tr<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>td<span class="sh_symbol">&gt;</span>姓名：<span class="sh_symbol">&lt;/</span>td<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>td<span class="sh_symbol">&gt;&lt;</span>input type<span class="sh_symbol">=</span><span class="sh_string">"text"</span> name<span class="sh_symbol">=</span><span class="sh_string">"ename"</span> value<span class="sh_symbol">=</span><span class="sh_string">"${emp.ename }"</span><span class="sh_regexp">/&gt;&lt;/</span>td<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>tr<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>tr<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>td<span class="sh_symbol">&gt;</span>岗位：<span class="sh_symbol">&lt;/</span>td<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>td<span class="sh_symbol">&gt;&lt;</span>input type<span class="sh_symbol">=</span><span class="sh_string">"text"</span> name<span class="sh_symbol">=</span><span class="sh_string">"job"</span> value<span class="sh_symbol">=</span><span class="sh_string">"${emp.job }"</span><span class="sh_regexp">/&gt;&lt;/</span>td<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>tr<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>tr<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>td<span class="sh_symbol">&gt;</span>工资：<span class="sh_symbol">&lt;/</span>td<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>td<span class="sh_symbol">&gt;&lt;</span>input type<span class="sh_symbol">=</span><span class="sh_string">"text"</span> name<span class="sh_symbol">=</span><span class="sh_string">"sal"</span> value<span class="sh_symbol">=</span><span class="sh_string">"${emp.sal }"</span><span class="sh_regexp">/&gt;&lt;/</span>td<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>tr<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>tr<span class="sh_symbol">&gt;</span></li><li class="bold_code">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>td colspan<span class="sh_symbol">=</span><span class="sh_string">"2"</span><span class="sh_symbol">&gt;&lt;</span>input type<span class="sh_symbol">=</span><span class="sh_string">"button"</span> value<span class="sh_symbol">=</span><span class="sh_string">"保存"</span> onclick<span class="sh_symbol">=</span><span class="sh_string">"save();"</span><span class="sh_regexp">/&gt;&lt;/</span>td<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>tr<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>table<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>form<span class="sh_symbol">&gt;</span>&nbsp;&nbsp;&nbsp;&nbsp;</li><li><span class="sh_symbol">&lt;/</span>body<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;/</span>html<span class="sh_symbol">&gt;</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">&lt;%@page pageEncoding="utf-8"%&gt;
&lt;%@taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%&gt;
&lt;html&gt;
&lt;head&gt;
#cold_bold	&lt;script type="text/javascript" src="../../js/jquery-1.11.1.js"&gt;&lt;/script&gt;
#cold_bold	&lt;script type="text/javascript" src="../../js/json.js"&gt;&lt;/script&gt;
#cold_bold	&lt;script type="text/javascript"&gt;
#cold_bold		function save() {
#cold_bold           	$.ajax({
#cold_bold           		type:"PUT",
#cold_bold           		url:"/SpringRestful/emp/update",
#cold_bold           		data:JSON.stringify($("#myform").serializeObject()),
#cold_bold           		dataType:"json",
#cold_bold           		contentType:"application/json",
#cold_bold           		success:function(data){
#cold_bold           			location.href = "/SpringRestful/emp/find";
#cold_bold           		}
#cold_bold           	});
#cold_bold           } 		
#cold_bold	&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
	&lt;form action="updateEmp.do" method="post" id="myform"&gt;
		&lt;table width="40%" border="1" cellpadding="2" cellspacing="0" align="center"&gt;
			&lt;tr&gt;
				&lt;td&gt;EMPNO：&lt;/td&gt;
				&lt;td&gt;&lt;input type="text" name="empno" value="${emp.empno }"/&gt;&lt;/td&gt;
			&lt;/tr&gt;
			&lt;tr&gt;
				&lt;td&gt;姓名：&lt;/td&gt;
				&lt;td&gt;&lt;input type="text" name="ename" value="${emp.ename }"/&gt;&lt;/td&gt;
			&lt;/tr&gt;
			&lt;tr&gt;
				&lt;td&gt;岗位：&lt;/td&gt;
				&lt;td&gt;&lt;input type="text" name="job" value="${emp.job }"/&gt;&lt;/td&gt;
			&lt;/tr&gt;
			&lt;tr&gt;
				&lt;td&gt;工资：&lt;/td&gt;
				&lt;td&gt;&lt;input type="text" name="sal" value="${emp.sal }"/&gt;&lt;/td&gt;
			&lt;/tr&gt;
			&lt;tr&gt;
#cold_bold				&lt;td colspan="2"&gt;&lt;input type="button" value="保存" onclick="save();"/&gt;&lt;/td&gt;
			&lt;/tr&gt;
		&lt;/table&gt;
	&lt;/form&gt;	
&lt;/body&gt;
&lt;/html&gt;
</pre></div></div>
      <p class="number">步骤五：测试</p>
      <p>重新部署并启动tomcat，测试通过员工的增删改查功能。</p>
      <h3>4.4 完整代码</h3>
      <p>本案例的完整代码如下所示：</p>
      <p>EmpDao完整代码如下：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap" style="display: none;"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS02/DAY06/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS02/DAY06/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS02/DAY06/CASE/01/index.html#">pop-up</a></pre></div><pre class="hide sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li>package com<span class="sh_symbol">.</span>tarena<span class="sh_symbol">.</span>dao<span class="sh_symbol">;</span></li><li><span style="display:none;">&nbsp;</span></li><li>import java<span class="sh_symbol">.</span>util<span class="sh_symbol">.</span>List<span class="sh_symbol">;</span></li><li>import com<span class="sh_symbol">.</span>tarena<span class="sh_symbol">.</span>annotation<span class="sh_symbol">.</span>MyBatisRepository<span class="sh_symbol">;</span></li><li>import com<span class="sh_symbol">.</span>tarena<span class="sh_symbol">.</span>entity<span class="sh_symbol">.</span>Emp<span class="sh_symbol">;</span></li><li><span style="display:none;">&nbsp;</span></li><li><span class="sh_comment">/**</span></li><li><span class="sh_comment"> * 员工表的DAO组件</span></li><li><span class="sh_comment"> */</span></li><li>@MyBatisRepository</li><li><span class="sh_keyword">public</span> <span class="sh_keyword">interface</span> EmpDao <span class="sh_cbracket">{</span></li><li><span style="display:none;">&nbsp;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;List<span class="sh_symbol">&lt;</span>Emp<span class="sh_symbol">&gt;</span> <span class="sh_function">findAll</span><span class="sh_symbol">();</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;void <span class="sh_function">save</span><span class="sh_symbol">(</span>Emp emp<span class="sh_symbol">);</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;Emp <span class="sh_function">findById</span><span class="sh_symbol">(</span>int id<span class="sh_symbol">);</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;void <span class="sh_function">update</span><span class="sh_symbol">(</span>Emp emp<span class="sh_symbol">);</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;void <span class="sh_keyword">delete</span><span class="sh_symbol">(</span>int id<span class="sh_symbol">);</span></li><li><span style="display:none;">&nbsp;</span></li><li><span class="sh_cbracket">}</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">package com.tarena.dao;

import java.util.List;
import com.tarena.annotation.MyBatisRepository;
import com.tarena.entity.Emp;

/**
 * 员工表的DAO组件
 */
@MyBatisRepository
public interface EmpDao {

	List&lt;Emp&gt; findAll();
	
	void save(Emp emp);
	
	Emp findById(int id);
	
	void update(Emp emp);
	
	void delete(int id);

}
</pre><div class="sh_sourceCode snippet-hide"><pre><a href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS02/DAY06/CASE/01/index.html#" class="snippet-revealed snippet-toggle sh_url">隐藏</a></pre></div></div><div class="snippet-reveal sh_acid snippet-wrap"><pre class="sh_sourceCode"><a href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS02/DAY06/CASE/01/index.html#" class="snippet-toggle sh_url">代码</a></pre></div></div>
      <p>EmpMapper.xml完整代码如下：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap" style="display: none;"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS02/DAY06/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS02/DAY06/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS02/DAY06/CASE/01/index.html#">pop-up</a></pre></div><pre class="hide sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">&lt;?</span>xml version<span class="sh_symbol">=</span><span class="sh_string">"1.0"</span> encoding<span class="sh_symbol">=</span><span class="sh_string">"UTF-8"</span> <span class="sh_symbol">?&gt;</span>  </li><li><span class="sh_symbol">&lt;!</span>DOCTYPE mapper PUBLIC <span class="sh_string">"-//ibatis.apache.org//DTD Mapper 3.0//EN"</span>      </li><li> <span class="sh_string">"http://ibatis.apache.org/dtd/ibatis-3-mapper.dtd"</span><span class="sh_symbol">&gt;</span></li><li><span style="display:none;">&nbsp;</span></li><li><span class="sh_symbol">&lt;</span>mapper namespace<span class="sh_symbol">=</span><span class="sh_string">"com.tarena.dao.EmpDao"</span><span class="sh_symbol">&gt;</span></li><li><span style="display:none;">&nbsp;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;!--</span> 查询全部的员工 <span class="sh_symbol">--&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>select id<span class="sh_symbol">=</span><span class="sh_string">"findAll"</span> </li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;resultType<span class="sh_symbol">=</span><span class="sh_string">"com.tarena.entity.Emp"</span><span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;select <span class="sh_symbol">*</span> from t_emp</li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>select<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;!--</span> 保存一条员工数据 <span class="sh_symbol">--&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>insert id<span class="sh_symbol">=</span><span class="sh_string">"save"</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;parameterType<span class="sh_symbol">=</span><span class="sh_string">"com.tarena.entity.Emp"</span><span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;insert into t_emp <span class="sh_function">values</span><span class="sh_symbol">(</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;emp_seq<span class="sh_symbol">.</span>nextval<span class="sh_symbol">,</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#<span class="sh_cbracket">{</span>ename<span class="sh_symbol">,</span>jdbcType<span class="sh_symbol">=</span>VARCHAR<span class="sh_cbracket">}</span><span class="sh_symbol">,</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#<span class="sh_cbracket">{</span>job<span class="sh_symbol">,</span>jdbcType<span class="sh_symbol">=</span>VARCHAR<span class="sh_cbracket">}</span><span class="sh_symbol">,</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#<span class="sh_cbracket">{</span>mgr<span class="sh_symbol">,</span>jdbcType<span class="sh_symbol">=</span>NUMERIC<span class="sh_cbracket">}</span><span class="sh_symbol">,</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#<span class="sh_cbracket">{</span>hiredate<span class="sh_symbol">,</span>jdbcType<span class="sh_symbol">=</span>DATE<span class="sh_cbracket">}</span><span class="sh_symbol">,</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#<span class="sh_cbracket">{</span>sal<span class="sh_symbol">,</span>jdbcType<span class="sh_symbol">=</span>NUMERIC<span class="sh_cbracket">}</span><span class="sh_symbol">,</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#<span class="sh_cbracket">{</span>comm<span class="sh_symbol">,</span>jdbcType<span class="sh_symbol">=</span>NUMERIC<span class="sh_cbracket">}</span><span class="sh_symbol">,</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#<span class="sh_cbracket">{</span>deptno<span class="sh_symbol">,</span>jdbcType<span class="sh_symbol">=</span>NUMERIC<span class="sh_cbracket">}</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">)</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>insert<span class="sh_symbol">&gt;</span>&nbsp;&nbsp;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;!--</span> 根据ID查询员工 <span class="sh_symbol">--&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>select id<span class="sh_symbol">=</span><span class="sh_string">"findById"</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;parameterType<span class="sh_symbol">=</span><span class="sh_string">"java.lang.Integer"</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;resultType<span class="sh_symbol">=</span><span class="sh_string">"com.tarena.entity.Emp"</span><span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;select <span class="sh_symbol">*</span> from t_emp where empno<span class="sh_symbol">=</span>#<span class="sh_cbracket">{</span>id<span class="sh_cbracket">}</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>select<span class="sh_symbol">&gt;</span>&nbsp;&nbsp;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;!--</span> 修改员工 <span class="sh_symbol">--&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>update id<span class="sh_symbol">=</span><span class="sh_string">"update"</span> parameterType<span class="sh_symbol">=</span><span class="sh_string">"com.tarena.entity.Emp"</span><span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;update t_emp set</li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ename<span class="sh_symbol">=</span>#<span class="sh_cbracket">{</span>ename<span class="sh_symbol">,</span>jdbcType<span class="sh_symbol">=</span>VARCHAR<span class="sh_cbracket">}</span><span class="sh_symbol">,</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;job<span class="sh_symbol">=</span>#<span class="sh_cbracket">{</span>job<span class="sh_symbol">,</span>jdbcType<span class="sh_symbol">=</span>VARCHAR<span class="sh_cbracket">}</span><span class="sh_symbol">,</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sal<span class="sh_symbol">=</span>#<span class="sh_cbracket">{</span>sal<span class="sh_symbol">,</span>jdbcType<span class="sh_symbol">=</span>NUMERIC<span class="sh_cbracket">}</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;where empno<span class="sh_symbol">=</span>#<span class="sh_cbracket">{</span>empno<span class="sh_symbol">,</span>jdbcType<span class="sh_symbol">=</span>NUMERIC<span class="sh_cbracket">}</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>update<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;!--</span> 删除员工 <span class="sh_symbol">--&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span><span class="sh_keyword">delete</span> id<span class="sh_symbol">=</span><span class="sh_string">"delete"</span> parameterType<span class="sh_symbol">=</span><span class="sh_string">"java.lang.Integer"</span><span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">delete</span> from t_emp where empno<span class="sh_symbol">=</span>#<span class="sh_cbracket">{</span>id<span class="sh_cbracket">}</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span><span class="sh_keyword">delete</span><span class="sh_symbol">&gt;</span>&nbsp;&nbsp;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;</li><li><span class="sh_symbol">&lt;/</span>mapper<span class="sh_symbol">&gt;</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;  
&lt;!DOCTYPE mapper PUBLIC "-//ibatis.apache.org//DTD Mapper 3.0//EN"      
 "http://ibatis.apache.org/dtd/ibatis-3-mapper.dtd"&gt;

&lt;mapper namespace="com.tarena.dao.EmpDao"&gt;

	&lt;!-- 查询全部的员工 --&gt;
	&lt;select id="findAll" 
		resultType="com.tarena.entity.Emp"&gt;
		select * from t_emp
	&lt;/select&gt;
	
	&lt;!-- 保存一条员工数据 --&gt;
	&lt;insert id="save"
		parameterType="com.tarena.entity.Emp"&gt;
		insert into t_emp values(
			emp_seq.nextval,
			#{ename,jdbcType=VARCHAR},
			#{job,jdbcType=VARCHAR},
			#{mgr,jdbcType=NUMERIC},
			#{hiredate,jdbcType=DATE},
			#{sal,jdbcType=NUMERIC},
			#{comm,jdbcType=NUMERIC},
			#{deptno,jdbcType=NUMERIC}
		)
	&lt;/insert&gt;	
	
	&lt;!-- 根据ID查询员工 --&gt;
	&lt;select id="findById"
		parameterType="java.lang.Integer"
		resultType="com.tarena.entity.Emp"&gt;
		select * from t_emp where empno=#{id}
	&lt;/select&gt;	
	
	&lt;!-- 修改员工 --&gt;
	&lt;update id="update" parameterType="com.tarena.entity.Emp"&gt;
		update t_emp set
			ename=#{ename,jdbcType=VARCHAR},
			job=#{job,jdbcType=VARCHAR},
			sal=#{sal,jdbcType=NUMERIC}
		where empno=#{empno,jdbcType=NUMERIC}
	&lt;/update&gt;
	
	&lt;!-- 删除员工 --&gt;
	&lt;delete id="delete" parameterType="java.lang.Integer"&gt;
		delete from t_emp where empno=#{id}
	&lt;/delete&gt;	
	
&lt;/mapper&gt;
</pre><div class="sh_sourceCode snippet-hide"><pre><a href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS02/DAY06/CASE/01/index.html#" class="snippet-revealed snippet-toggle sh_url">隐藏</a></pre></div></div><div class="snippet-reveal sh_acid snippet-wrap"><pre class="sh_sourceCode"><a href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS02/DAY06/CASE/01/index.html#" class="snippet-toggle sh_url">代码</a></pre></div></div>
      <p>web.xml完整代码如下：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap" style="display: none;"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS02/DAY06/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS02/DAY06/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS02/DAY06/CASE/01/index.html#">pop-up</a></pre></div><pre class="hide sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">&lt;?</span>xml version<span class="sh_symbol">=</span><span class="sh_string">"1.0"</span> encoding<span class="sh_symbol">=</span><span class="sh_string">"UTF-8"</span><span class="sh_symbol">?&gt;</span></li><li><span class="sh_symbol">&lt;</span>web<span class="sh_symbol">-</span>app version<span class="sh_symbol">=</span><span class="sh_string">"2.5"</span> </li><li>&nbsp;&nbsp;&nbsp;&nbsp;xmlns<span class="sh_symbol">=</span><span class="sh_string">"http://java.sun.com/xml/ns/javaee"</span> </li><li>&nbsp;&nbsp;&nbsp;&nbsp;xmlns<span class="sh_symbol">:</span>xsi<span class="sh_symbol">=</span><span class="sh_string">"http://www.w3.org/2001/XMLSchema-instance"</span> </li><li>&nbsp;&nbsp;&nbsp;&nbsp;xsi<span class="sh_symbol">:</span>schemaLocation<span class="sh_symbol">=</span><span class="sh_string">"http://java.sun.com/xml/ns/javaee </span></li><li><span class="sh_string">&nbsp;&nbsp;&nbsp;&nbsp;http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"</span><span class="sh_symbol">&gt;</span></li><li>  <span class="sh_symbol">&lt;</span>display<span class="sh_symbol">-</span>name<span class="sh_symbol">&gt;&lt;/</span>display<span class="sh_symbol">-</span>name<span class="sh_symbol">&gt;</span>&nbsp;&nbsp;&nbsp;&nbsp;</li><li>  <span class="sh_symbol">&lt;</span>welcome<span class="sh_symbol">-</span>file<span class="sh_symbol">-</span>list<span class="sh_symbol">&gt;</span></li><li>    <span class="sh_symbol">&lt;</span>welcome<span class="sh_symbol">-</span>file<span class="sh_symbol">&gt;</span>index<span class="sh_symbol">.</span>jsp<span class="sh_symbol">&lt;/</span>welcome<span class="sh_symbol">-</span>file<span class="sh_symbol">&gt;</span></li><li>  <span class="sh_symbol">&lt;/</span>welcome<span class="sh_symbol">-</span>file<span class="sh_symbol">-</span>list<span class="sh_symbol">&gt;</span></li><li>  &nbsp;&nbsp;&nbsp;&nbsp;</li><li>  &nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;!--</span> Spring前端控制器 <span class="sh_symbol">--&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>servlet<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>servlet<span class="sh_symbol">-</span>name<span class="sh_symbol">&gt;</span>SpringMVC<span class="sh_symbol">&lt;/</span>servlet<span class="sh_symbol">-</span>name<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>servlet<span class="sh_symbol">-</span><span class="sh_keyword">class</span><span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;org<span class="sh_symbol">.</span>springframework<span class="sh_symbol">.</span>web<span class="sh_symbol">.</span>servlet<span class="sh_symbol">.</span>DispatcherServlet</li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>servlet<span class="sh_symbol">-</span><span class="sh_keyword">class</span><span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>init<span class="sh_symbol">-</span>param<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>param<span class="sh_symbol">-</span>name<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;contextConfigLocation</li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>param<span class="sh_symbol">-</span>name<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>param<span class="sh_symbol">-</span>value<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;classpath<span class="sh_symbol">:</span>applicationContext<span class="sh_symbol">.</span>xml</li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>param<span class="sh_symbol">-</span>value<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>init<span class="sh_symbol">-</span>param<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>servlet<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>servlet<span class="sh_symbol">-</span>mapping<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>servlet<span class="sh_symbol">-</span>name<span class="sh_symbol">&gt;</span>SpringMVC<span class="sh_symbol">&lt;/</span>servlet<span class="sh_symbol">-</span>name<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>url<span class="sh_symbol">-</span>pattern<span class="sh_symbol">&gt;</span><span class="sh_regexp">/&lt;/</span>url<span class="sh_symbol">-</span>pattern<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>servlet<span class="sh_symbol">-</span>mapping<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;!--</span> 使用Filter解决中文乱码问题 <span class="sh_symbol">--&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>filter<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;    <span class="sh_symbol">&lt;</span>filter<span class="sh_symbol">-</span>name<span class="sh_symbol">&gt;</span>encodingFilter<span class="sh_symbol">&lt;/</span>filter<span class="sh_symbol">-</span>name<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;    <span class="sh_symbol">&lt;</span>filter<span class="sh_symbol">-</span><span class="sh_keyword">class</span><span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;    &nbsp;&nbsp;&nbsp;&nbsp;org<span class="sh_symbol">.</span>springframework<span class="sh_symbol">.</span>web<span class="sh_symbol">.</span>filter<span class="sh_symbol">.</span>CharacterEncodingFilter</li><li>&nbsp;&nbsp;&nbsp;&nbsp;    <span class="sh_symbol">&lt;/</span>filter<span class="sh_symbol">-</span><span class="sh_keyword">class</span><span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;    <span class="sh_symbol">&lt;</span>init<span class="sh_symbol">-</span>param<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;        <span class="sh_symbol">&lt;</span>param<span class="sh_symbol">-</span>name<span class="sh_symbol">&gt;</span>encoding<span class="sh_symbol">&lt;/</span>param<span class="sh_symbol">-</span>name<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;        <span class="sh_symbol">&lt;</span>param<span class="sh_symbol">-</span>value<span class="sh_symbol">&gt;</span>UTF<span class="sh_number">-8</span><span class="sh_symbol">&lt;/</span>param<span class="sh_symbol">-</span>value<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;    <span class="sh_symbol">&lt;/</span>init<span class="sh_symbol">-</span>param<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>filter<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>filter<span class="sh_symbol">-</span>mapping<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;    <span class="sh_symbol">&lt;</span>filter<span class="sh_symbol">-</span>name<span class="sh_symbol">&gt;</span>encodingFilter<span class="sh_symbol">&lt;/</span>filter<span class="sh_symbol">-</span>name<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;    <span class="sh_symbol">&lt;</span>url<span class="sh_symbol">-</span>pattern<span class="sh_symbol">&gt;</span><span class="sh_comment">/*&lt;/url-pattern&gt;</span></li><li><span class="sh_comment">&nbsp;&nbsp;&nbsp;&nbsp;&lt;/filter-mapping&gt;  </span></li><li><span class="sh_comment">  </span></li><li><span class="sh_comment">&lt;/web-app&gt;</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;web-app version="2.5" 
	xmlns="http://java.sun.com/xml/ns/javaee" 
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
	xsi:schemaLocation="http://java.sun.com/xml/ns/javaee 
	http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"&gt;
  &lt;display-name&gt;&lt;/display-name&gt;	
  &lt;welcome-file-list&gt;
    &lt;welcome-file&gt;index.jsp&lt;/welcome-file&gt;
  &lt;/welcome-file-list&gt;
  	
  	&lt;!-- Spring前端控制器 --&gt;
	&lt;servlet&gt;
		&lt;servlet-name&gt;SpringMVC&lt;/servlet-name&gt;
		&lt;servlet-class&gt;
			org.springframework.web.servlet.DispatcherServlet
		&lt;/servlet-class&gt;
		&lt;init-param&gt;
			&lt;param-name&gt;
				contextConfigLocation
			&lt;/param-name&gt;
			&lt;param-value&gt;
				classpath:applicationContext.xml
			&lt;/param-value&gt;
		&lt;/init-param&gt;
	&lt;/servlet&gt;
	&lt;servlet-mapping&gt;
		&lt;servlet-name&gt;SpringMVC&lt;/servlet-name&gt;
		&lt;url-pattern&gt;/&lt;/url-pattern&gt;
	&lt;/servlet-mapping&gt;
	&lt;!-- 使用Filter解决中文乱码问题 --&gt;
	&lt;filter&gt;
	    &lt;filter-name&gt;encodingFilter&lt;/filter-name&gt;
	    &lt;filter-class&gt;
	    	org.springframework.web.filter.CharacterEncodingFilter
	    &lt;/filter-class&gt;
	    &lt;init-param&gt;
	        &lt;param-name&gt;encoding&lt;/param-name&gt;
	        &lt;param-value&gt;UTF-8&lt;/param-value&gt;
	    &lt;/init-param&gt;
	&lt;/filter&gt;
	&lt;filter-mapping&gt;
	    &lt;filter-name&gt;encodingFilter&lt;/filter-name&gt;
	    &lt;url-pattern&gt;/*&lt;/url-pattern&gt;
	&lt;/filter-mapping&gt;  
  
&lt;/web-app&gt;
</pre><div class="sh_sourceCode snippet-hide"><pre><a href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS02/DAY06/CASE/01/index.html#" class="snippet-revealed snippet-toggle sh_url">隐藏</a></pre></div></div><div class="snippet-reveal sh_acid snippet-wrap"><pre class="sh_sourceCode"><a href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS02/DAY06/CASE/01/index.html#" class="snippet-toggle sh_url">代码</a></pre></div></div>
      <p>applicationContext.xml完整代码如下：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap" style="display: none;"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS02/DAY06/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS02/DAY06/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS02/DAY06/CASE/01/index.html#">pop-up</a></pre></div><pre class="hide sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">&lt;?</span>xml version<span class="sh_symbol">=</span><span class="sh_string">"1.0"</span> encoding<span class="sh_symbol">=</span><span class="sh_string">"UTF-8"</span><span class="sh_symbol">?&gt;</span></li><li><span class="sh_symbol">&lt;</span>beans xmlns<span class="sh_symbol">=</span><span class="sh_string">"http://www.springframework.org/schema/beans"</span> </li><li>&nbsp;&nbsp;&nbsp;&nbsp;xmlns<span class="sh_symbol">:</span>xsi<span class="sh_symbol">=</span><span class="sh_string">"http://www.w3.org/2001/XMLSchema-instance"</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;xmlns<span class="sh_symbol">:</span>context<span class="sh_symbol">=</span><span class="sh_string">"http://www.springframework.org/schema/context"</span> </li><li>&nbsp;&nbsp;&nbsp;&nbsp;xmlns<span class="sh_symbol">:</span>jdbc<span class="sh_symbol">=</span><span class="sh_string">"http://www.springframework.org/schema/jdbc"</span>  </li><li>&nbsp;&nbsp;&nbsp;&nbsp;xmlns<span class="sh_symbol">:</span>jee<span class="sh_symbol">=</span><span class="sh_string">"http://www.springframework.org/schema/jee"</span> </li><li>&nbsp;&nbsp;&nbsp;&nbsp;xmlns<span class="sh_symbol">:</span>tx<span class="sh_symbol">=</span><span class="sh_string">"http://www.springframework.org/schema/tx"</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;xmlns<span class="sh_symbol">:</span>aop<span class="sh_symbol">=</span><span class="sh_string">"http://www.springframework.org/schema/aop"</span> </li><li>&nbsp;&nbsp;&nbsp;&nbsp;xmlns<span class="sh_symbol">:</span>mvc<span class="sh_symbol">=</span><span class="sh_string">"http://www.springframework.org/schema/mvc"</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;xmlns<span class="sh_symbol">:</span>jpa<span class="sh_symbol">=</span><span class="sh_string">"http://www.springframework.org/schema/data/jpa"</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;xsi<span class="sh_symbol">:</span>schemaLocation<span class="sh_symbol">=</span><span class="sh_string">"</span></li><li><span class="sh_string">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.2.xsd</span></li><li><span class="sh_string">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.2.xsd</span></li><li><span class="sh_string">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http://www.springframework.org/schema/jdbc http://www.springframework.org/schema/jdbc/spring-jdbc-3.2.xsd</span></li><li><span class="sh_string">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http://www.springframework.org/schema/jee http://www.springframework.org/schema/jee/spring-jee-3.2.xsd</span></li><li><span class="sh_string">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.2.xsd</span></li><li><span class="sh_string">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http://www.springframework.org/schema/data/jpa http://www.springframework.org/schema/data/jpa/spring-jpa-1.3.xsd</span></li><li><span class="sh_string">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-3.2.xsd</span></li><li><span class="sh_string">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.2.xsd"</span><span class="sh_symbol">&gt;</span></li><li><span style="display:none;">&nbsp;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;!--</span> 配置数据源 <span class="sh_symbol">--&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>bean id<span class="sh_symbol">=</span><span class="sh_string">"ds"</span> <span class="sh_keyword">class</span><span class="sh_symbol">=</span><span class="sh_string">"org.apache.commons.dbcp.BasicDataSource"</span><span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>property name<span class="sh_symbol">=</span><span class="sh_string">"url"</span> value<span class="sh_symbol">=</span><span class="sh_string">"jdbc:oracle:thin:@localhost:1521:xe"</span> <span class="sh_symbol">/&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>property name<span class="sh_symbol">=</span><span class="sh_string">"driverClassName"</span> value<span class="sh_symbol">=</span><span class="sh_string">"oracle.jdbc.OracleDriver"</span> <span class="sh_symbol">/&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>property name<span class="sh_symbol">=</span><span class="sh_string">"username"</span> value<span class="sh_symbol">=</span><span class="sh_string">"lhh"</span> <span class="sh_symbol">/&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>property name<span class="sh_symbol">=</span><span class="sh_string">"password"</span> value<span class="sh_symbol">=</span><span class="sh_string">"123456"</span> <span class="sh_symbol">/&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>bean<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;!--</span> 配置SqlSessionFactory <span class="sh_symbol">--&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>bean id<span class="sh_symbol">=</span><span class="sh_string">"sqlSessionFactory"</span> <span class="sh_keyword">class</span><span class="sh_symbol">=</span><span class="sh_string">"org.mybatis.spring.SqlSessionFactoryBean"</span><span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>property name<span class="sh_symbol">=</span><span class="sh_string">"dataSource"</span> ref<span class="sh_symbol">=</span><span class="sh_string">"ds"</span> <span class="sh_symbol">/&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>property name<span class="sh_symbol">=</span><span class="sh_string">"mapperLocations"</span> value<span class="sh_symbol">=</span><span class="sh_string">"classpath:com/tarena/entity/*.xml"</span> <span class="sh_symbol">/&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>bean<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;!--</span> 配置MyBatis注解 <span class="sh_symbol">--&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>bean <span class="sh_keyword">class</span><span class="sh_symbol">=</span><span class="sh_string">"org.mybatis.spring.mapper.MapperScannerConfigurer"</span><span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>property name<span class="sh_symbol">=</span><span class="sh_string">"basePackage"</span> value<span class="sh_symbol">=</span><span class="sh_string">"com.tarena.dao"</span> <span class="sh_symbol">/&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>property name<span class="sh_symbol">=</span><span class="sh_string">"annotationClass"</span> value<span class="sh_symbol">=</span><span class="sh_string">"com.tarena.annotation.MyBatisRepository"</span> <span class="sh_symbol">/&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>bean<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;!--</span> 开启注解扫描 <span class="sh_symbol">--&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>context<span class="sh_symbol">:</span>component<span class="sh_symbol">-</span>scan base<span class="sh_symbol">-</span>package<span class="sh_symbol">=</span><span class="sh_string">"com.tarena"</span> <span class="sh_symbol">/&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;!--</span> 开启RequestMapping注解 <span class="sh_symbol">--&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>mvc<span class="sh_symbol">:</span>annotation<span class="sh_symbol">-</span><span class="sh_normal">driven </span><span class="sh_symbol">/&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;!--</span> 处理请求转发 <span class="sh_symbol">--&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>bean <span class="sh_keyword">class</span><span class="sh_symbol">=</span><span class="sh_string">"org.springframework.web.servlet.view.InternalResourceViewResolver"</span><span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>property name<span class="sh_symbol">=</span><span class="sh_string">"prefix"</span> value<span class="sh_symbol">=</span><span class="sh_string">"/WEB-INF/"</span><span class="sh_symbol">/&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>property name<span class="sh_symbol">=</span><span class="sh_string">"suffix"</span> value<span class="sh_symbol">=</span><span class="sh_string">".jsp"</span><span class="sh_symbol">/&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>bean<span class="sh_symbol">&gt;</span>&nbsp;&nbsp;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;!--</span> 支持RESTful访问静态资源 <span class="sh_symbol">--&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>mvc<span class="sh_symbol">:</span><span class="sh_keyword">default</span><span class="sh_symbol">-</span>servlet<span class="sh_symbol">-</span><span class="sh_normal">handler </span><span class="sh_symbol">/&gt;</span></li><li><span style="display:none;">&nbsp;</span></li><li><span class="sh_symbol">&lt;/</span>beans<span class="sh_symbol">&gt;</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;beans xmlns="http://www.springframework.org/schema/beans" 
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xmlns:context="http://www.springframework.org/schema/context" 
	xmlns:jdbc="http://www.springframework.org/schema/jdbc"  
	xmlns:jee="http://www.springframework.org/schema/jee" 
	xmlns:tx="http://www.springframework.org/schema/tx"
	xmlns:aop="http://www.springframework.org/schema/aop" 
	xmlns:mvc="http://www.springframework.org/schema/mvc"
	xmlns:jpa="http://www.springframework.org/schema/data/jpa"
	xsi:schemaLocation="
		http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.2.xsd
		http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.2.xsd
		http://www.springframework.org/schema/jdbc http://www.springframework.org/schema/jdbc/spring-jdbc-3.2.xsd
		http://www.springframework.org/schema/jee http://www.springframework.org/schema/jee/spring-jee-3.2.xsd
		http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.2.xsd
		http://www.springframework.org/schema/data/jpa http://www.springframework.org/schema/data/jpa/spring-jpa-1.3.xsd
		http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-3.2.xsd
		http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.2.xsd"&gt;

	&lt;!-- 配置数据源 --&gt;
	&lt;bean id="ds" class="org.apache.commons.dbcp.BasicDataSource"&gt;
		&lt;property name="url" value="jdbc:oracle:thin:@localhost:1521:xe" /&gt;
		&lt;property name="driverClassName" value="oracle.jdbc.OracleDriver" /&gt;
		&lt;property name="username" value="lhh" /&gt;
		&lt;property name="password" value="123456" /&gt;
	&lt;/bean&gt;
	
	&lt;!-- 配置SqlSessionFactory --&gt;
	&lt;bean id="sqlSessionFactory" class="org.mybatis.spring.SqlSessionFactoryBean"&gt;
		&lt;property name="dataSource" ref="ds" /&gt;
		&lt;property name="mapperLocations" value="classpath:com/tarena/entity/*.xml" /&gt;
	&lt;/bean&gt;
	
	&lt;!-- 配置MyBatis注解 --&gt;
	&lt;bean class="org.mybatis.spring.mapper.MapperScannerConfigurer"&gt;
		&lt;property name="basePackage" value="com.tarena.dao" /&gt;
		&lt;property name="annotationClass" value="com.tarena.annotation.MyBatisRepository" /&gt;
	&lt;/bean&gt;
	
	&lt;!-- 开启注解扫描 --&gt;
	&lt;context:component-scan base-package="com.tarena" /&gt;
	
	&lt;!-- 开启RequestMapping注解 --&gt;
	&lt;mvc:annotation-driven /&gt;
	
	&lt;!-- 处理请求转发 --&gt;
	&lt;bean class="org.springframework.web.servlet.view.InternalResourceViewResolver"&gt;
		&lt;property name="prefix" value="/WEB-INF/"/&gt;
		&lt;property name="suffix" value=".jsp"/&gt;
	&lt;/bean&gt;	
	
	&lt;!-- 支持RESTful访问静态资源 --&gt;
	&lt;mvc:default-servlet-handler /&gt;

&lt;/beans&gt;
</pre><div class="sh_sourceCode snippet-hide"><pre><a href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS02/DAY06/CASE/01/index.html#" class="snippet-revealed snippet-toggle sh_url">隐藏</a></pre></div></div><div class="snippet-reveal sh_acid snippet-wrap"><pre class="sh_sourceCode"><a href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS02/DAY06/CASE/01/index.html#" class="snippet-toggle sh_url">代码</a></pre></div></div>
      <p>EmpController完整代码如下：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap" style="display: none;"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS02/DAY06/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS02/DAY06/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS02/DAY06/CASE/01/index.html#">pop-up</a></pre></div><pre class="hide sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li>package com<span class="sh_symbol">.</span>tarena<span class="sh_symbol">.</span>controller<span class="sh_symbol">;</span></li><li><span style="display:none;">&nbsp;</span></li><li>import java<span class="sh_symbol">.</span>util<span class="sh_symbol">.</span>List<span class="sh_symbol">;</span></li><li>import javax<span class="sh_symbol">.</span>annotation<span class="sh_symbol">.</span>Resource<span class="sh_symbol">;</span></li><li>import org<span class="sh_symbol">.</span>springframework<span class="sh_symbol">.</span>stereotype<span class="sh_symbol">.</span>Controller<span class="sh_symbol">;</span></li><li>import org<span class="sh_symbol">.</span>springframework<span class="sh_symbol">.</span>ui<span class="sh_symbol">.</span>Model<span class="sh_symbol">;</span></li><li>import org<span class="sh_symbol">.</span>springframework<span class="sh_symbol">.</span>web<span class="sh_symbol">.</span>bind<span class="sh_symbol">.</span>annotation<span class="sh_symbol">.</span>PathVariable<span class="sh_symbol">;</span></li><li>import org<span class="sh_symbol">.</span>springframework<span class="sh_symbol">.</span>web<span class="sh_symbol">.</span>bind<span class="sh_symbol">.</span>annotation<span class="sh_symbol">.</span>RequestBody<span class="sh_symbol">;</span></li><li>import org<span class="sh_symbol">.</span>springframework<span class="sh_symbol">.</span>web<span class="sh_symbol">.</span>bind<span class="sh_symbol">.</span>annotation<span class="sh_symbol">.</span>RequestMapping<span class="sh_symbol">;</span></li><li>import org<span class="sh_symbol">.</span>springframework<span class="sh_symbol">.</span>web<span class="sh_symbol">.</span>bind<span class="sh_symbol">.</span>annotation<span class="sh_symbol">.</span>RequestMethod<span class="sh_symbol">;</span></li><li>import org<span class="sh_symbol">.</span>springframework<span class="sh_symbol">.</span>web<span class="sh_symbol">.</span>bind<span class="sh_symbol">.</span>annotation<span class="sh_symbol">.</span>ResponseBody<span class="sh_symbol">;</span></li><li>import com<span class="sh_symbol">.</span>tarena<span class="sh_symbol">.</span>dao<span class="sh_symbol">.</span>EmpDao<span class="sh_symbol">;</span></li><li>import com<span class="sh_symbol">.</span>tarena<span class="sh_symbol">.</span>entity<span class="sh_symbol">.</span>Emp<span class="sh_symbol">;</span></li><li><span style="display:none;">&nbsp;</span></li><li>@Controller</li><li>@<span class="sh_function">RequestMapping</span><span class="sh_symbol">(</span><span class="sh_string">"/emp"</span><span class="sh_symbol">)</span></li><li><span class="sh_keyword">public</span> <span class="sh_keyword">class</span> EmpController <span class="sh_cbracket">{</span></li><li><span style="display:none;">&nbsp;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;@Resource</li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">private</span> EmpDao empDao<span class="sh_symbol">;</span></li><li><span style="display:none;">&nbsp;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;@<span class="sh_function">RequestMapping</span><span class="sh_symbol">(</span>value<span class="sh_symbol">=</span><span class="sh_string">"/find"</span><span class="sh_symbol">,</span>method<span class="sh_symbol">=</span>RequestMethod<span class="sh_symbol">.</span>GET<span class="sh_symbol">)</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">public</span> <span class="sh_predef_func">String</span> <span class="sh_function">find</span><span class="sh_symbol">(</span>Model model<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;List<span class="sh_symbol">&lt;</span>Emp<span class="sh_symbol">&gt;</span> list <span class="sh_symbol">=</span> empDao<span class="sh_symbol">.</span><span class="sh_function">findAll</span><span class="sh_symbol">();</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;model<span class="sh_symbol">.</span><span class="sh_function">addAttribute</span><span class="sh_symbol">(</span><span class="sh_string">"emps"</span><span class="sh_symbol">,</span> list<span class="sh_symbol">);</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">return</span> <span class="sh_string">"emp/emp_list"</span><span class="sh_symbol">;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_cbracket">}</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_comment">/**</span></li><li><span class="sh_comment">&nbsp;&nbsp;&nbsp;&nbsp; * 打开新增页面</span></li><li><span class="sh_comment">&nbsp;&nbsp;&nbsp;&nbsp; */</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;@<span class="sh_function">RequestMapping</span><span class="sh_symbol">(</span>value<span class="sh_symbol">=</span><span class="sh_string">"/toAdd"</span><span class="sh_symbol">,</span>method<span class="sh_symbol">=</span>RequestMethod<span class="sh_symbol">.</span>GET<span class="sh_symbol">)</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">public</span> <span class="sh_predef_func">String</span> <span class="sh_function">toAdd</span><span class="sh_symbol">()</span> <span class="sh_cbracket">{</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">return</span> <span class="sh_string">"emp/add_emp"</span><span class="sh_symbol">;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_cbracket">}</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_comment">/**</span></li><li><span class="sh_comment">&nbsp;&nbsp;&nbsp;&nbsp; * 新增保存</span></li><li><span class="sh_comment">&nbsp;&nbsp;&nbsp;&nbsp; */</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;@<span class="sh_function">RequestMapping</span><span class="sh_symbol">(</span>value<span class="sh_symbol">=</span><span class="sh_string">"/add"</span><span class="sh_symbol">,</span>method<span class="sh_symbol">=</span>RequestMethod<span class="sh_symbol">.</span>POST<span class="sh_symbol">)</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">public</span> <span class="sh_predef_func">String</span> <span class="sh_function">add</span><span class="sh_symbol">(</span>Emp emp<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;empDao<span class="sh_symbol">.</span><span class="sh_function">save</span><span class="sh_symbol">(</span>emp<span class="sh_symbol">);</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">return</span> <span class="sh_string">"redirect:find"</span><span class="sh_symbol">;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_cbracket">}</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_comment">/**</span></li><li><span class="sh_comment">&nbsp;&nbsp;&nbsp;&nbsp; * 打开修改页面</span></li><li><span class="sh_comment">&nbsp;&nbsp;&nbsp;&nbsp; */</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;@<span class="sh_function">RequestMapping</span><span class="sh_symbol">(</span>value<span class="sh_symbol">=</span><span class="sh_string">"/toUpdate/{id}"</span><span class="sh_symbol">,</span>method<span class="sh_symbol">=</span>RequestMethod<span class="sh_symbol">.</span>GET<span class="sh_symbol">)</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">public</span> <span class="sh_predef_func">String</span> <span class="sh_function">toUpdate</span><span class="sh_symbol">(</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="sh_function">PathVariable</span><span class="sh_symbol">(</span><span class="sh_string">"id"</span><span class="sh_symbol">)</span> int id<span class="sh_symbol">,</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Model model<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Emp e <span class="sh_symbol">=</span> empDao<span class="sh_symbol">.</span><span class="sh_function">findById</span><span class="sh_symbol">(</span>id<span class="sh_symbol">);</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;model<span class="sh_symbol">.</span><span class="sh_function">addAttribute</span><span class="sh_symbol">(</span><span class="sh_string">"emp"</span><span class="sh_symbol">,</span> e<span class="sh_symbol">);</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">return</span> <span class="sh_string">"emp/update_emp"</span><span class="sh_symbol">;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_cbracket">}</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_comment">/**</span></li><li><span class="sh_comment">&nbsp;&nbsp;&nbsp;&nbsp; * 修改保存</span></li><li><span class="sh_comment">&nbsp;&nbsp;&nbsp;&nbsp; */</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;@<span class="sh_function">RequestMapping</span><span class="sh_symbol">(</span>value<span class="sh_symbol">=</span><span class="sh_string">"/update"</span><span class="sh_symbol">,</span>method<span class="sh_symbol">=</span>RequestMethod<span class="sh_symbol">.</span>PUT<span class="sh_symbol">)</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;@ResponseBody</li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">public</span> boolean <span class="sh_function">update</span><span class="sh_symbol">(</span>@RequestBody Emp emp<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;empDao<span class="sh_symbol">.</span><span class="sh_function">update</span><span class="sh_symbol">(</span>emp<span class="sh_symbol">);</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">return</span> <span class="sh_keyword">true</span><span class="sh_symbol">;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_cbracket">}</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_comment">/**</span></li><li><span class="sh_comment">&nbsp;&nbsp;&nbsp;&nbsp; * 删除</span></li><li><span class="sh_comment">&nbsp;&nbsp;&nbsp;&nbsp; */</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;@<span class="sh_function">RequestMapping</span><span class="sh_symbol">(</span>value<span class="sh_symbol">=</span><span class="sh_string">"/{id}"</span><span class="sh_symbol">,</span>method<span class="sh_symbol">=</span>RequestMethod<span class="sh_symbol">.</span>DELETE<span class="sh_symbol">)</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;@ResponseBody</li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">public</span> boolean <span class="sh_keyword">delete</span><span class="sh_symbol">(</span>@<span class="sh_function">PathVariable</span><span class="sh_symbol">(</span><span class="sh_string">"id"</span><span class="sh_symbol">)</span> int id<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;empDao<span class="sh_symbol">.</span><span class="sh_keyword">delete</span><span class="sh_symbol">(</span>id<span class="sh_symbol">);</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">return</span> <span class="sh_keyword">true</span><span class="sh_symbol">;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_cbracket">}</span></li><li><span style="display:none;">&nbsp;</span></li><li><span class="sh_cbracket">}</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">package com.tarena.controller;

import java.util.List;
import javax.annotation.Resource;
import org.springframework.stereotype.Controller;
import org.springframework.ui.Model;
import org.springframework.web.bind.annotation.PathVariable;
import org.springframework.web.bind.annotation.RequestBody;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;
import org.springframework.web.bind.annotation.ResponseBody;
import com.tarena.dao.EmpDao;
import com.tarena.entity.Emp;

@Controller
@RequestMapping("/emp")
public class EmpController {

	@Resource
	private EmpDao empDao;

	@RequestMapping(value="/find",method=RequestMethod.GET)
	public String find(Model model) {
		List&lt;Emp&gt; list = empDao.findAll();
		model.addAttribute("emps", list);
		return "emp/emp_list";
	}
	
	/**
	 * 打开新增页面
	 */
	@RequestMapping(value="/toAdd",method=RequestMethod.GET)
	public String toAdd() {
		return "emp/add_emp";
	}
	
	/**
	 * 新增保存
	 */
	@RequestMapping(value="/add",method=RequestMethod.POST)
	public String add(Emp emp) {
		empDao.save(emp);
		return "redirect:find";
	}
	
	/**
	 * 打开修改页面
	 */
	@RequestMapping(value="/toUpdate/{id}",method=RequestMethod.GET)
	public String toUpdate(
			@PathVariable("id") int id,
			Model model) {
		Emp e = empDao.findById(id);
		model.addAttribute("emp", e);
		return "emp/update_emp";
	}
	
	/**
	 * 修改保存
	 */
	@RequestMapping(value="/update",method=RequestMethod.PUT)
	@ResponseBody
	public boolean update(@RequestBody Emp emp) {
		empDao.update(emp);
		return true;
	}
	
	/**
	 * 删除
	 */
	@RequestMapping(value="/{id}",method=RequestMethod.DELETE)
	@ResponseBody
	public boolean delete(@PathVariable("id") int id) {
		empDao.delete(id);
		return true;
	}

}
</pre><div class="sh_sourceCode snippet-hide"><pre><a href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS02/DAY06/CASE/01/index.html#" class="snippet-revealed snippet-toggle sh_url">隐藏</a></pre></div></div><div class="snippet-reveal sh_acid snippet-wrap"><pre class="sh_sourceCode"><a href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS02/DAY06/CASE/01/index.html#" class="snippet-toggle sh_url">代码</a></pre></div></div>
      <p>json.js完整代码如下：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap" style="display: none;"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS02/DAY06/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS02/DAY06/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS02/DAY06/CASE/01/index.html#">pop-up</a></pre></div><pre class="hide sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_comment">// 将表单数据转换成json对象</span></li><li>$<span class="sh_symbol">.</span>fn<span class="sh_symbol">.</span>serializeObject <span class="sh_symbol">=</span> <span class="sh_keyword">function</span><span class="sh_symbol">()</span> <span class="sh_cbracket">{</span>    </li><li>   <span class="sh_keyword">var</span> o <span class="sh_symbol">=</span> <span class="sh_cbracket">{}</span><span class="sh_symbol">;</span>    </li><li>   <span class="sh_keyword">var</span> a <span class="sh_symbol">=</span> <span class="sh_keyword">this</span><span class="sh_symbol">.</span><span class="sh_function">serializeArray</span><span class="sh_symbol">();</span></li><li>   $<span class="sh_symbol">.</span><span class="sh_function">each</span><span class="sh_symbol">(</span>a<span class="sh_symbol">,</span> <span class="sh_keyword">function</span><span class="sh_symbol">()</span> <span class="sh_cbracket">{</span></li><li>       <span class="sh_keyword">if</span> <span class="sh_symbol">(</span>o<span class="sh_symbol">[</span><span class="sh_keyword">this</span><span class="sh_symbol">.</span>name<span class="sh_symbol">])</span> <span class="sh_cbracket">{</span></li><li>           <span class="sh_keyword">if</span> <span class="sh_symbol">(!</span>o<span class="sh_symbol">[</span><span class="sh_keyword">this</span><span class="sh_symbol">.</span>name<span class="sh_symbol">].</span>push<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span></li><li>               o<span class="sh_symbol">[</span><span class="sh_keyword">this</span><span class="sh_symbol">.</span>name<span class="sh_symbol">]</span> <span class="sh_symbol">=</span> <span class="sh_symbol">[</span>o<span class="sh_symbol">[</span><span class="sh_keyword">this</span><span class="sh_symbol">.</span>name<span class="sh_symbol">]];</span></li><li>           <span class="sh_cbracket">}</span></li><li>           o<span class="sh_symbol">[</span><span class="sh_keyword">this</span><span class="sh_symbol">.</span>name<span class="sh_symbol">].</span><span class="sh_function">push</span><span class="sh_symbol">(</span><span class="sh_keyword">this</span><span class="sh_symbol">.</span>value <span class="sh_symbol">||</span> <span class="sh_string">''</span><span class="sh_symbol">);</span></li><li>       <span class="sh_cbracket">}</span> <span class="sh_keyword">else</span> <span class="sh_cbracket">{</span></li><li>           o<span class="sh_symbol">[</span><span class="sh_keyword">this</span><span class="sh_symbol">.</span>name<span class="sh_symbol">]</span> <span class="sh_symbol">=</span> <span class="sh_keyword">this</span><span class="sh_symbol">.</span>value <span class="sh_symbol">||</span> <span class="sh_string">''</span><span class="sh_symbol">;</span></li><li>       <span class="sh_cbracket">}</span>    </li><li>   <span class="sh_cbracket">}</span><span class="sh_symbol">);</span></li><li>   <span class="sh_keyword">return</span> o<span class="sh_symbol">;</span> </li><li><span class="sh_cbracket">}</span><span class="sh_symbol">;</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">// 将表单数据转换成json对象
$.fn.serializeObject = function() {    
   var o = {};    
   var a = this.serializeArray();
   $.each(a, function() {
       if (o[this.name]) {
           if (!o[this.name].push) {
               o[this.name] = [o[this.name]];
           }
           o[this.name].push(this.value || '');
       } else {
           o[this.name] = this.value || '';
       }    
   });
   return o; 
};
</pre><div class="sh_sourceCode snippet-hide"><pre><a href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS02/DAY06/CASE/01/index.html#" class="snippet-revealed snippet-toggle sh_url">隐藏</a></pre></div></div><div class="snippet-reveal sh_acid snippet-wrap"><pre class="sh_sourceCode"><a href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS02/DAY06/CASE/01/index.html#" class="snippet-toggle sh_url">代码</a></pre></div></div>
      <p>emp_list.jsp完整代码如下：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap" style="display: none;"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS02/DAY06/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS02/DAY06/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS02/DAY06/CASE/01/index.html#">pop-up</a></pre></div><pre class="hide sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">&lt;%</span>@page pageEncoding<span class="sh_symbol">=</span><span class="sh_string">"utf-8"</span><span class="sh_symbol">%&gt;</span></li><li><span class="sh_symbol">&lt;%</span>@taglib uri<span class="sh_symbol">=</span><span class="sh_string">"http://java.sun.com/jsp/jstl/core"</span> prefix<span class="sh_symbol">=</span><span class="sh_string">"c"</span><span class="sh_symbol">%&gt;</span></li><li><span class="sh_symbol">&lt;</span>html<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;</span>head<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>script type<span class="sh_symbol">=</span><span class="sh_string">"text/javascript"</span> src<span class="sh_symbol">=</span><span class="sh_string">"../js/jquery-1.11.1.js"</span><span class="sh_symbol">&gt;&lt;/</span>script<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>script type<span class="sh_symbol">=</span><span class="sh_string">"text/javascript"</span><span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">function</span> <span class="sh_function">delete_emp</span><span class="sh_symbol">(</span>id<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">var</span> r <span class="sh_symbol">=</span> window<span class="sh_symbol">.</span><span class="sh_function">confirm</span><span class="sh_symbol">(</span><span class="sh_string">"确定要删除此数据吗？"</span><span class="sh_symbol">);</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">if</span><span class="sh_symbol">(</span>r<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_comment">//location.href = "deleteEmp.do?id="+id;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$<span class="sh_symbol">.</span><span class="sh_function">ajax</span><span class="sh_symbol">(</span><span class="sh_cbracket">{</span></li><li>            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type<span class="sh_symbol">:</span><span class="sh_string">"DELETE"</span><span class="sh_symbol">,</span></li><li>            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;url<span class="sh_symbol">:</span><span class="sh_string">"/SpringRestful/emp/"</span><span class="sh_symbol">+</span>id<span class="sh_symbol">,</span></li><li>            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dataType<span class="sh_symbol">:</span><span class="sh_string">"json"</span><span class="sh_symbol">,</span></li><li>            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;success<span class="sh_symbol">:</span><span class="sh_keyword">function</span><span class="sh_symbol">(</span>data<span class="sh_symbol">)</span><span class="sh_cbracket">{</span></li><li>            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;location<span class="sh_symbol">.</span>href <span class="sh_symbol">=</span> <span class="sh_string">"/SpringRestful/emp/find"</span><span class="sh_symbol">;</span></li><li>            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_cbracket">}</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;            <span class="sh_cbracket">}</span><span class="sh_symbol">);</span>  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_cbracket">}</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_cbracket">}</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>script<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;/</span>head<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;</span>body<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>div align<span class="sh_symbol">=</span><span class="sh_string">"center"</span><span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>input type<span class="sh_symbol">=</span><span class="sh_string">"button"</span> value<span class="sh_symbol">=</span><span class="sh_string">"新增"</span> onclick<span class="sh_symbol">=</span><span class="sh_string">"location.href='toAdd'"</span><span class="sh_symbol">/&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>div<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>table width<span class="sh_symbol">=</span><span class="sh_string">"60%"</span> border<span class="sh_symbol">=</span><span class="sh_string">"1"</span> cellpadding<span class="sh_symbol">=</span><span class="sh_string">"2"</span> cellspacing<span class="sh_symbol">=</span><span class="sh_string">"0"</span> align<span class="sh_symbol">=</span><span class="sh_string">"center"</span><span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>tr<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>th<span class="sh_symbol">&gt;</span>EMPNO<span class="sh_symbol">&lt;/</span>th<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>th<span class="sh_symbol">&gt;</span>ENAME<span class="sh_symbol">&lt;/</span>th<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>th<span class="sh_symbol">&gt;</span>JOB<span class="sh_symbol">&lt;/</span>th<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>th<span class="sh_symbol">&gt;</span>MGR<span class="sh_symbol">&lt;/</span>th<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>th<span class="sh_symbol">&gt;</span>HIREDATE<span class="sh_symbol">&lt;/</span>th<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>th<span class="sh_symbol">&gt;</span>SAL<span class="sh_symbol">&lt;/</span>th<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>th<span class="sh_symbol">&gt;</span>COMM<span class="sh_symbol">&lt;/</span>th<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>th<span class="sh_symbol">&gt;</span>DEPTNO<span class="sh_symbol">&lt;/</span>th<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>th<span class="sh_symbol">&gt;&lt;/</span>th<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>tr<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>c<span class="sh_symbol">:</span>forEach items<span class="sh_symbol">=</span><span class="sh_string">"${emps }"</span> <span class="sh_keyword">var</span><span class="sh_symbol">=</span><span class="sh_string">"emp"</span><span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>tr<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>td<span class="sh_symbol">&gt;</span>$<span class="sh_cbracket">{</span>emp<span class="sh_symbol">.</span>empno <span class="sh_cbracket">}</span><span class="sh_symbol">&lt;/</span>td<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>td<span class="sh_symbol">&gt;</span>$<span class="sh_cbracket">{</span>emp<span class="sh_symbol">.</span>ename <span class="sh_cbracket">}</span><span class="sh_symbol">&lt;/</span>td<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>td<span class="sh_symbol">&gt;</span>$<span class="sh_cbracket">{</span>emp<span class="sh_symbol">.</span>job <span class="sh_cbracket">}</span><span class="sh_symbol">&lt;/</span>td<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>td<span class="sh_symbol">&gt;</span>$<span class="sh_cbracket">{</span>emp<span class="sh_symbol">.</span>mgr <span class="sh_cbracket">}</span><span class="sh_symbol">&lt;/</span>td<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>td<span class="sh_symbol">&gt;</span>$<span class="sh_cbracket">{</span>emp<span class="sh_symbol">.</span>hiredate <span class="sh_cbracket">}</span><span class="sh_symbol">&lt;/</span>td<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>td<span class="sh_symbol">&gt;</span>$<span class="sh_cbracket">{</span>emp<span class="sh_symbol">.</span>sal <span class="sh_cbracket">}</span><span class="sh_symbol">&lt;/</span>td<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>td<span class="sh_symbol">&gt;</span>$<span class="sh_cbracket">{</span>emp<span class="sh_symbol">.</span>comm <span class="sh_cbracket">}</span><span class="sh_symbol">&lt;/</span>td<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>td<span class="sh_symbol">&gt;</span>$<span class="sh_cbracket">{</span>emp<span class="sh_symbol">.</span>deptno <span class="sh_cbracket">}</span><span class="sh_symbol">&lt;/</span>td<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>td<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>input type<span class="sh_symbol">=</span><span class="sh_string">"button"</span> value<span class="sh_symbol">=</span><span class="sh_string">"修改"</span> onclick<span class="sh_symbol">=</span><span class="sh_string">"location.href='toUpdate/${emp.empno }'"</span><span class="sh_symbol">/&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>input type<span class="sh_symbol">=</span><span class="sh_string">"button"</span> value<span class="sh_symbol">=</span><span class="sh_string">"删除"</span> onclick<span class="sh_symbol">=</span><span class="sh_string">"delete_emp(${emp.empno });"</span><span class="sh_symbol">/&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>td<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>tr<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>c<span class="sh_symbol">:</span>forEach<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>table<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;/</span>body<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;/</span>html<span class="sh_symbol">&gt;</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">&lt;%@page pageEncoding="utf-8"%&gt;
&lt;%@taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%&gt;
&lt;html&gt;
&lt;head&gt;
	&lt;script type="text/javascript" src="../js/jquery-1.11.1.js"&gt;&lt;/script&gt;
	&lt;script type="text/javascript"&gt;
		function delete_emp(id) {
			var r = window.confirm("确定要删除此数据吗？");
			if(r) {
				//location.href = "deleteEmp.do?id="+id;
				$.ajax({
            		type:"DELETE",
            		url:"/SpringRestful/emp/"+id,
            		dataType:"json",
            		success:function(data){
            			location.href = "/SpringRestful/emp/find";
            		}
	            });  				
			}
		}
	&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
	&lt;div align="center"&gt;
		&lt;input type="button" value="新增" onclick="location.href='toAdd'"/&gt;
	&lt;/div&gt;
	&lt;table width="60%" border="1" cellpadding="2" cellspacing="0" align="center"&gt;
		&lt;tr&gt;
			&lt;th&gt;EMPNO&lt;/th&gt;
			&lt;th&gt;ENAME&lt;/th&gt;
			&lt;th&gt;JOB&lt;/th&gt;
			&lt;th&gt;MGR&lt;/th&gt;
			&lt;th&gt;HIREDATE&lt;/th&gt;
			&lt;th&gt;SAL&lt;/th&gt;
			&lt;th&gt;COMM&lt;/th&gt;
			&lt;th&gt;DEPTNO&lt;/th&gt;
			&lt;th&gt;&lt;/th&gt;
		&lt;/tr&gt;
		&lt;c:forEach items="${emps }" var="emp"&gt;
			&lt;tr&gt;
				&lt;td&gt;${emp.empno }&lt;/td&gt;
				&lt;td&gt;${emp.ename }&lt;/td&gt;
				&lt;td&gt;${emp.job }&lt;/td&gt;
				&lt;td&gt;${emp.mgr }&lt;/td&gt;
				&lt;td&gt;${emp.hiredate }&lt;/td&gt;
				&lt;td&gt;${emp.sal }&lt;/td&gt;
				&lt;td&gt;${emp.comm }&lt;/td&gt;
				&lt;td&gt;${emp.deptno }&lt;/td&gt;
				&lt;td&gt;
					&lt;input type="button" value="修改" onclick="location.href='toUpdate/${emp.empno }'"/&gt;
					&lt;input type="button" value="删除" onclick="delete_emp(${emp.empno });"/&gt;
				&lt;/td&gt;
			&lt;/tr&gt;
		&lt;/c:forEach&gt;
	&lt;/table&gt;
&lt;/body&gt;
&lt;/html&gt;
</pre><div class="sh_sourceCode snippet-hide"><pre><a href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS02/DAY06/CASE/01/index.html#" class="snippet-revealed snippet-toggle sh_url">隐藏</a></pre></div></div><div class="snippet-reveal sh_acid snippet-wrap"><pre class="sh_sourceCode"><a href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS02/DAY06/CASE/01/index.html#" class="snippet-toggle sh_url">代码</a></pre></div></div>
      <p>add_emp.jsp完整代码如下：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap" style="display: none;"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS02/DAY06/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS02/DAY06/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS02/DAY06/CASE/01/index.html#">pop-up</a></pre></div><pre class="hide sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">&lt;%</span>@page pageEncoding<span class="sh_symbol">=</span><span class="sh_string">"utf-8"</span><span class="sh_symbol">%&gt;</span></li><li><span class="sh_symbol">&lt;%</span>@taglib uri<span class="sh_symbol">=</span><span class="sh_string">"http://java.sun.com/jsp/jstl/core"</span> prefix<span class="sh_symbol">=</span><span class="sh_string">"c"</span><span class="sh_symbol">%&gt;</span></li><li><span class="sh_symbol">&lt;</span>html<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;</span>head<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;/</span>head<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;</span>body<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>form action<span class="sh_symbol">=</span><span class="sh_string">"add"</span> method<span class="sh_symbol">=</span><span class="sh_string">"post"</span><span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>table width<span class="sh_symbol">=</span><span class="sh_string">"40%"</span> border<span class="sh_symbol">=</span><span class="sh_string">"1"</span> cellpadding<span class="sh_symbol">=</span><span class="sh_string">"2"</span> cellspacing<span class="sh_symbol">=</span><span class="sh_string">"0"</span> align<span class="sh_symbol">=</span><span class="sh_string">"center"</span><span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>tr<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>td<span class="sh_symbol">&gt;</span>姓名：<span class="sh_symbol">&lt;/</span>td<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>td<span class="sh_symbol">&gt;&lt;</span>input type<span class="sh_symbol">=</span><span class="sh_string">"text"</span> name<span class="sh_symbol">=</span><span class="sh_string">"ename"</span><span class="sh_regexp">/&gt;&lt;/</span>td<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>tr<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>tr<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>td<span class="sh_symbol">&gt;</span>岗位：<span class="sh_symbol">&lt;/</span>td<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>td<span class="sh_symbol">&gt;&lt;</span>input type<span class="sh_symbol">=</span><span class="sh_string">"text"</span> name<span class="sh_symbol">=</span><span class="sh_string">"job"</span><span class="sh_regexp">/&gt;&lt;/</span>td<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>tr<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>tr<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>td<span class="sh_symbol">&gt;</span>工资：<span class="sh_symbol">&lt;/</span>td<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>td<span class="sh_symbol">&gt;&lt;</span>input type<span class="sh_symbol">=</span><span class="sh_string">"text"</span> name<span class="sh_symbol">=</span><span class="sh_string">"sal"</span><span class="sh_regexp">/&gt;&lt;/</span>td<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>tr<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>tr<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>td colspan<span class="sh_symbol">=</span><span class="sh_string">"2"</span><span class="sh_symbol">&gt;&lt;</span>input type<span class="sh_symbol">=</span><span class="sh_string">"submit"</span> value<span class="sh_symbol">=</span><span class="sh_string">"保存"</span> <span class="sh_regexp">/&gt;&lt;/</span>td<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>tr<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>table<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>form<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;/</span>body<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;/</span>html<span class="sh_symbol">&gt;</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">&lt;%@page pageEncoding="utf-8"%&gt;
&lt;%@taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%&gt;
&lt;html&gt;
&lt;head&gt;
&lt;/head&gt;
&lt;body&gt;
	&lt;form action="add" method="post"&gt;
		&lt;table width="40%" border="1" cellpadding="2" cellspacing="0" align="center"&gt;
			&lt;tr&gt;
				&lt;td&gt;姓名：&lt;/td&gt;
				&lt;td&gt;&lt;input type="text" name="ename"/&gt;&lt;/td&gt;
			&lt;/tr&gt;
			&lt;tr&gt;
				&lt;td&gt;岗位：&lt;/td&gt;
				&lt;td&gt;&lt;input type="text" name="job"/&gt;&lt;/td&gt;
			&lt;/tr&gt;
			&lt;tr&gt;
				&lt;td&gt;工资：&lt;/td&gt;
				&lt;td&gt;&lt;input type="text" name="sal"/&gt;&lt;/td&gt;
			&lt;/tr&gt;
			&lt;tr&gt;
				&lt;td colspan="2"&gt;&lt;input type="submit" value="保存" /&gt;&lt;/td&gt;
			&lt;/tr&gt;
		&lt;/table&gt;
	&lt;/form&gt;
&lt;/body&gt;
&lt;/html&gt;
</pre><div class="sh_sourceCode snippet-hide"><pre><a href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS02/DAY06/CASE/01/index.html#" class="snippet-revealed snippet-toggle sh_url">隐藏</a></pre></div></div><div class="snippet-reveal sh_acid snippet-wrap"><pre class="sh_sourceCode"><a href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS02/DAY06/CASE/01/index.html#" class="snippet-toggle sh_url">代码</a></pre></div></div>
      <p>update_emp.jsp完整代码如下：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap" style="display: none;"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS02/DAY06/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS02/DAY06/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS02/DAY06/CASE/01/index.html#">pop-up</a></pre></div><pre class="hide sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">&lt;%</span>@page pageEncoding<span class="sh_symbol">=</span><span class="sh_string">"utf-8"</span><span class="sh_symbol">%&gt;</span></li><li><span class="sh_symbol">&lt;%</span>@taglib uri<span class="sh_symbol">=</span><span class="sh_string">"http://java.sun.com/jsp/jstl/core"</span> prefix<span class="sh_symbol">=</span><span class="sh_string">"c"</span><span class="sh_symbol">%&gt;</span></li><li><span class="sh_symbol">&lt;</span>html<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;</span>head<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>script type<span class="sh_symbol">=</span><span class="sh_string">"text/javascript"</span> src<span class="sh_symbol">=</span><span class="sh_string">"../../js/jquery-1.11.1.js"</span><span class="sh_symbol">&gt;&lt;/</span>script<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>script type<span class="sh_symbol">=</span><span class="sh_string">"text/javascript"</span> src<span class="sh_symbol">=</span><span class="sh_string">"../../js/json.js"</span><span class="sh_symbol">&gt;&lt;/</span>script<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>script type<span class="sh_symbol">=</span><span class="sh_string">"text/javascript"</span><span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">function</span> <span class="sh_function">save</span><span class="sh_symbol">()</span> <span class="sh_cbracket">{</span></li><li>           &nbsp;&nbsp;&nbsp;&nbsp;$<span class="sh_symbol">.</span><span class="sh_function">ajax</span><span class="sh_symbol">(</span><span class="sh_cbracket">{</span></li><li>           &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type<span class="sh_symbol">:</span><span class="sh_string">"PUT"</span><span class="sh_symbol">,</span></li><li>           &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;url<span class="sh_symbol">:</span><span class="sh_string">"/SpringRestful/emp/update"</span><span class="sh_symbol">,</span></li><li>           &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;data<span class="sh_symbol">:</span>JSON<span class="sh_symbol">.</span><span class="sh_function">stringify</span><span class="sh_symbol">(</span>$<span class="sh_symbol">(</span><span class="sh_string">"#myform"</span><span class="sh_symbol">).</span><span class="sh_function">serializeObject</span><span class="sh_symbol">()),</span></li><li>           &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dataType<span class="sh_symbol">:</span><span class="sh_string">"json"</span><span class="sh_symbol">,</span></li><li>           &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;contentType<span class="sh_symbol">:</span><span class="sh_string">"application/json"</span><span class="sh_symbol">,</span></li><li>           &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;success<span class="sh_symbol">:</span><span class="sh_keyword">function</span><span class="sh_symbol">(</span>data<span class="sh_symbol">)</span><span class="sh_cbracket">{</span></li><li>           &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;location<span class="sh_symbol">.</span>href <span class="sh_symbol">=</span> <span class="sh_string">"/SpringRestful/emp/find"</span><span class="sh_symbol">;</span></li><li>           &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_cbracket">}</span></li><li>           &nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_cbracket">}</span><span class="sh_symbol">);</span></li><li>           <span class="sh_cbracket">}</span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>script<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;/</span>head<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;</span>body<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>form action<span class="sh_symbol">=</span><span class="sh_string">"updateEmp.do"</span> method<span class="sh_symbol">=</span><span class="sh_string">"post"</span> id<span class="sh_symbol">=</span><span class="sh_string">"myform"</span><span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>table width<span class="sh_symbol">=</span><span class="sh_string">"40%"</span> border<span class="sh_symbol">=</span><span class="sh_string">"1"</span> cellpadding<span class="sh_symbol">=</span><span class="sh_string">"2"</span> cellspacing<span class="sh_symbol">=</span><span class="sh_string">"0"</span> align<span class="sh_symbol">=</span><span class="sh_string">"center"</span><span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>tr<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>td<span class="sh_symbol">&gt;</span>EMPNO：<span class="sh_symbol">&lt;/</span>td<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>td<span class="sh_symbol">&gt;&lt;</span>input type<span class="sh_symbol">=</span><span class="sh_string">"text"</span> name<span class="sh_symbol">=</span><span class="sh_string">"empno"</span> value<span class="sh_symbol">=</span><span class="sh_string">"${emp.empno }"</span><span class="sh_regexp">/&gt;&lt;/</span>td<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>tr<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>tr<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>td<span class="sh_symbol">&gt;</span>姓名：<span class="sh_symbol">&lt;/</span>td<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>td<span class="sh_symbol">&gt;&lt;</span>input type<span class="sh_symbol">=</span><span class="sh_string">"text"</span> name<span class="sh_symbol">=</span><span class="sh_string">"ename"</span> value<span class="sh_symbol">=</span><span class="sh_string">"${emp.ename }"</span><span class="sh_regexp">/&gt;&lt;/</span>td<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>tr<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>tr<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>td<span class="sh_symbol">&gt;</span>岗位：<span class="sh_symbol">&lt;/</span>td<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>td<span class="sh_symbol">&gt;&lt;</span>input type<span class="sh_symbol">=</span><span class="sh_string">"text"</span> name<span class="sh_symbol">=</span><span class="sh_string">"job"</span> value<span class="sh_symbol">=</span><span class="sh_string">"${emp.job }"</span><span class="sh_regexp">/&gt;&lt;/</span>td<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>tr<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>tr<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>td<span class="sh_symbol">&gt;</span>工资：<span class="sh_symbol">&lt;/</span>td<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>td<span class="sh_symbol">&gt;&lt;</span>input type<span class="sh_symbol">=</span><span class="sh_string">"text"</span> name<span class="sh_symbol">=</span><span class="sh_string">"sal"</span> value<span class="sh_symbol">=</span><span class="sh_string">"${emp.sal }"</span><span class="sh_regexp">/&gt;&lt;/</span>td<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>tr<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>tr<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>td colspan<span class="sh_symbol">=</span><span class="sh_string">"2"</span><span class="sh_symbol">&gt;&lt;</span>input type<span class="sh_symbol">=</span><span class="sh_string">"button"</span> value<span class="sh_symbol">=</span><span class="sh_string">"保存"</span> onclick<span class="sh_symbol">=</span><span class="sh_string">"save();"</span><span class="sh_regexp">/&gt;&lt;/</span>td<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>tr<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>table<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>form<span class="sh_symbol">&gt;</span>&nbsp;&nbsp;&nbsp;&nbsp;</li><li><span class="sh_symbol">&lt;/</span>body<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;/</span>html<span class="sh_symbol">&gt;</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">&lt;%@page pageEncoding="utf-8"%&gt;
&lt;%@taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%&gt;
&lt;html&gt;
&lt;head&gt;
	&lt;script type="text/javascript" src="../../js/jquery-1.11.1.js"&gt;&lt;/script&gt;
	&lt;script type="text/javascript" src="../../js/json.js"&gt;&lt;/script&gt;
	&lt;script type="text/javascript"&gt;
		function save() {
           	$.ajax({
           		type:"PUT",
           		url:"/SpringRestful/emp/update",
           		data:JSON.stringify($("#myform").serializeObject()),
           		dataType:"json",
           		contentType:"application/json",
           		success:function(data){
           			location.href = "/SpringRestful/emp/find";
           		}
           	});
           } 		
	&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
	&lt;form action="updateEmp.do" method="post" id="myform"&gt;
		&lt;table width="40%" border="1" cellpadding="2" cellspacing="0" align="center"&gt;
			&lt;tr&gt;
				&lt;td&gt;EMPNO：&lt;/td&gt;
				&lt;td&gt;&lt;input type="text" name="empno" value="${emp.empno }"/&gt;&lt;/td&gt;
			&lt;/tr&gt;
			&lt;tr&gt;
				&lt;td&gt;姓名：&lt;/td&gt;
				&lt;td&gt;&lt;input type="text" name="ename" value="${emp.ename }"/&gt;&lt;/td&gt;
			&lt;/tr&gt;
			&lt;tr&gt;
				&lt;td&gt;岗位：&lt;/td&gt;
				&lt;td&gt;&lt;input type="text" name="job" value="${emp.job }"/&gt;&lt;/td&gt;
			&lt;/tr&gt;
			&lt;tr&gt;
				&lt;td&gt;工资：&lt;/td&gt;
				&lt;td&gt;&lt;input type="text" name="sal" value="${emp.sal }"/&gt;&lt;/td&gt;
			&lt;/tr&gt;
			&lt;tr&gt;
				&lt;td colspan="2"&gt;&lt;input type="button" value="保存" onclick="save();"/&gt;&lt;/td&gt;
			&lt;/tr&gt;
		&lt;/table&gt;
	&lt;/form&gt;	
&lt;/body&gt;
&lt;/html&gt;
</pre><div class="sh_sourceCode snippet-hide"><pre><a href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS02/DAY06/CASE/01/index.html#" class="snippet-revealed snippet-toggle sh_url">隐藏</a></pre></div></div><div class="snippet-reveal sh_acid snippet-wrap"><pre class="sh_sourceCode"><a href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS02/DAY06/CASE/01/index.html#" class="snippet-toggle sh_url">代码</a></pre></div></div>
    </div>
  
<div style="position: static; width: 0px; height: 0px; border: none; padding: 0px; margin: 0px;"><div id="trans-tooltip"><div id="tip-left-top" style="background: url(&quot;chrome-extension://ikkepelhgbcgmhhmcmpfkjmchccjblkd/imgs/map/tip-left-top.png&quot;);"></div><div id="tip-top" style="background: url(&quot;chrome-extension://ikkepelhgbcgmhhmcmpfkjmchccjblkd/imgs/map/tip-top.png&quot;) repeat-x;"></div><div id="tip-right-top" style="background: url(&quot;chrome-extension://ikkepelhgbcgmhhmcmpfkjmchccjblkd/imgs/map/tip-right-top.png&quot;);"></div><div id="tip-right" style="background: url(&quot;chrome-extension://ikkepelhgbcgmhhmcmpfkjmchccjblkd/imgs/map/tip-right.png&quot;) repeat-y;"></div><div id="tip-right-bottom" style="background: url(&quot;chrome-extension://ikkepelhgbcgmhhmcmpfkjmchccjblkd/imgs/map/tip-right-bottom.png&quot;);"></div><div id="tip-bottom" style="background: url(&quot;chrome-extension://ikkepelhgbcgmhhmcmpfkjmchccjblkd/imgs/map/tip-bottom.png&quot;) repeat-x;"></div><div id="tip-left-bottom" style="background: url(&quot;chrome-extension://ikkepelhgbcgmhhmcmpfkjmchccjblkd/imgs/map/tip-left-bottom.png&quot;);"></div><div id="tip-left" style="background: url(&quot;chrome-extension://ikkepelhgbcgmhhmcmpfkjmchccjblkd/imgs/map/tip-left.png&quot;);"></div><div id="trans-content"></div></div><div id="tip-arrow-bottom" style="background: url(&quot;chrome-extension://ikkepelhgbcgmhhmcmpfkjmchccjblkd/imgs/map/tip-arrow-bottom.png&quot;);"></div><div id="tip-arrow-top" style="background: url(&quot;chrome-extension://ikkepelhgbcgmhhmcmpfkjmchccjblkd/imgs/map/tip-arrow-top.png&quot;);"></div></div></body></html>