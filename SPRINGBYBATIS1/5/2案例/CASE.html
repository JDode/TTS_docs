
<!-- saved from url=(0099)http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html -->
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>CASE</title>
    
    <script type="text/javascript" src="./CASE_files/jquery.min.js">
    </script>
    <script type="text/javascript" src="./CASE_files/jquery.snippet.js">
    </script>
    <script type="text/javascript" src="./CASE_files/main.js">
    </script>
    <link type="text/css" href="./CASE_files/index.css" rel="Stylesheet">
    <link type="text/css" href="./CASE_files/jquery.snippet.css" rel="Stylesheet">
  </head><style type="text/css" id="8808854360"></style>
  <body>
    <div class="source_style_case">
      <a name="page_top_case" id="top_anchor">
      </a><a id="link_top" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#page_top_case">Top</a>
      <h1>JAVA Spring MyBatis DAY05</h1>
      <ol class="index">
        <li>
          <a href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#case1">中文乱码解决方案</a>
        </li>
        <li>
          <a href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#case2">异常处理</a>
        </li>
        <li>
          <a href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#case3">处理NETCTOSS项目中的异常</a>
        </li>
        <li>
          <a href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#case4">资费列表</a>
        </li>
        <li>
          <a href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#case5">拦截器案例</a>
        </li>
        <li>
          <a href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#case6">登录检查</a>
        </li>
      </ol>
      <a name="case1">
      </a>
      <h2>1 中文乱码解决方案</h2>
      <h3>1.1 问题</h3>
      <p>解决NETCTOSS登录时，输入中文的乱码问题。</p>
      <h3>1.2 方案</h3>
      <p>使用Spring提供的filter，指定编码为UTF-8。</p>
      <h3>1.3 步骤</h3>
      <p class="number">步骤一：问题演示</p>
      <p>打开NETCTOSS1登录页面，输入中文账号并点击登录，浏览器显示效果如下图：</p>
      <div class="image">
        <img src="./CASE_files/image001.png">
        <p>图-1</p>
      </div>
      <p class="number">步骤二：配置filter</p>
      <p>在web.xml中配置filter，指定编码为UTF-8，代码如下：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">&lt;?</span>xml version<span class="sh_symbol">=</span><span class="sh_string">"1.0"</span> encoding<span class="sh_symbol">=</span><span class="sh_string">"UTF-8"</span><span class="sh_symbol">?&gt;</span></li><li><span class="sh_symbol">&lt;</span>web<span class="sh_symbol">-</span>app version<span class="sh_symbol">=</span><span class="sh_string">"2.5"</span> </li><li>&nbsp;&nbsp;&nbsp;&nbsp;xmlns<span class="sh_symbol">=</span><span class="sh_string">"http://java.sun.com/xml/ns/javaee"</span> </li><li>&nbsp;&nbsp;&nbsp;&nbsp;xmlns<span class="sh_symbol">:</span>xsi<span class="sh_symbol">=</span><span class="sh_string">"http://www.w3.org/2001/XMLSchema-instance"</span> </li><li>&nbsp;&nbsp;&nbsp;&nbsp;xsi<span class="sh_symbol">:</span>schemaLocation<span class="sh_symbol">=</span><span class="sh_string">"http://java.sun.com/xml/ns/javaee </span></li><li><span class="sh_string">&nbsp;&nbsp;&nbsp;&nbsp;http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"</span><span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;</span>welcome<span class="sh_symbol">-</span>file<span class="sh_symbol">-</span>list<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;</span>welcome<span class="sh_symbol">-</span>file<span class="sh_symbol">&gt;</span>index<span class="sh_symbol">.</span>jsp<span class="sh_symbol">&lt;/</span>welcome<span class="sh_symbol">-</span>file<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;/</span>welcome<span class="sh_symbol">-</span>file<span class="sh_symbol">-</span>list<span class="sh_symbol">&gt;</span></li><li><span style="display:none;">&nbsp;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>servlet<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>servlet<span class="sh_symbol">-</span>name<span class="sh_symbol">&gt;</span>spring<span class="sh_symbol">&lt;/</span>servlet<span class="sh_symbol">-</span>name<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>servlet<span class="sh_symbol">-</span><span class="sh_keyword">class</span><span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;org<span class="sh_symbol">.</span>springframework<span class="sh_symbol">.</span>web<span class="sh_symbol">.</span>servlet<span class="sh_symbol">.</span>DispatcherServlet</li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>servlet<span class="sh_symbol">-</span><span class="sh_keyword">class</span><span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>init<span class="sh_symbol">-</span>param<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>param<span class="sh_symbol">-</span>name<span class="sh_symbol">&gt;</span>contextConfigLocation<span class="sh_symbol">&lt;/</span>param<span class="sh_symbol">-</span>name<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>param<span class="sh_symbol">-</span>value<span class="sh_symbol">&gt;</span>classpath<span class="sh_symbol">:</span>applicationContext<span class="sh_symbol">.</span>xml<span class="sh_symbol">&lt;/</span>param<span class="sh_symbol">-</span>value<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>init<span class="sh_symbol">-</span>param<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>load<span class="sh_symbol">-</span>on<span class="sh_symbol">-</span>startup<span class="sh_symbol">&gt;</span><span class="sh_number">1</span><span class="sh_symbol">&lt;/</span>load<span class="sh_symbol">-</span>on<span class="sh_symbol">-</span>startup<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>servlet<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>servlet<span class="sh_symbol">-</span>mapping<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>servlet<span class="sh_symbol">-</span>name<span class="sh_symbol">&gt;</span>spring<span class="sh_symbol">&lt;/</span>servlet<span class="sh_symbol">-</span>name<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>url<span class="sh_symbol">-</span>pattern<span class="sh_symbol">&gt;*.</span><span class="sh_keyword">do</span><span class="sh_symbol">&lt;/</span>url<span class="sh_symbol">-</span>pattern<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>servlet<span class="sh_symbol">-</span>mapping<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>filter<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>filter<span class="sh_symbol">-</span>name<span class="sh_symbol">&gt;</span>encodingFilter<span class="sh_symbol">&lt;/</span>filter<span class="sh_symbol">-</span>name<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>filter<span class="sh_symbol">-</span><span class="sh_keyword">class</span><span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;org<span class="sh_symbol">.</span>springframework<span class="sh_symbol">.</span>web<span class="sh_symbol">.</span>filter<span class="sh_symbol">.</span>CharacterEncodingFilter</li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>filter<span class="sh_symbol">-</span><span class="sh_keyword">class</span><span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>init<span class="sh_symbol">-</span>param<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>param<span class="sh_symbol">-</span>name<span class="sh_symbol">&gt;</span>encoding<span class="sh_symbol">&lt;/</span>param<span class="sh_symbol">-</span>name<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>param<span class="sh_symbol">-</span>value<span class="sh_symbol">&gt;</span>UTF<span class="sh_number">-8</span><span class="sh_symbol">&lt;/</span>param<span class="sh_symbol">-</span>value<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>init<span class="sh_symbol">-</span>param<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>filter<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>filter<span class="sh_symbol">-</span>mapping<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>filter<span class="sh_symbol">-</span>name<span class="sh_symbol">&gt;</span>encodingFilter<span class="sh_symbol">&lt;/</span>filter<span class="sh_symbol">-</span>name<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>url<span class="sh_symbol">-</span>pattern<span class="sh_symbol">&gt;</span><span class="sh_comment">/*&lt;/url-pattern&gt;</span></li><li><span class="sh_comment">&nbsp;&nbsp;&nbsp;&nbsp;&lt;/filter-mapping&gt;&nbsp;&nbsp;&nbsp;&nbsp;</span></li><li><span style="display:none;">&nbsp;</span></li><li><span class="sh_comment">&lt;/web-app&gt;</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;web-app version="2.5" 
	xmlns="http://java.sun.com/xml/ns/javaee" 
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
	xsi:schemaLocation="http://java.sun.com/xml/ns/javaee 
	http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"&gt;
&lt;welcome-file-list&gt;
&lt;welcome-file&gt;index.jsp&lt;/welcome-file&gt;
&lt;/welcome-file-list&gt;

	&lt;servlet&gt;
		&lt;servlet-name&gt;spring&lt;/servlet-name&gt;
		&lt;servlet-class&gt;
			org.springframework.web.servlet.DispatcherServlet
		&lt;/servlet-class&gt;
		&lt;init-param&gt;
			&lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;
			&lt;param-value&gt;classpath:applicationContext.xml&lt;/param-value&gt;
		&lt;/init-param&gt;
		&lt;load-on-startup&gt;1&lt;/load-on-startup&gt;
	&lt;/servlet&gt;
	&lt;servlet-mapping&gt;
		&lt;servlet-name&gt;spring&lt;/servlet-name&gt;
		&lt;url-pattern&gt;*.do&lt;/url-pattern&gt;
	&lt;/servlet-mapping&gt;
	
	&lt;filter&gt;
	&lt;filter-name&gt;encodingFilter&lt;/filter-name&gt;
	&lt;filter-class&gt;
		org.springframework.web.filter.CharacterEncodingFilter
	&lt;/filter-class&gt;
	&lt;init-param&gt;
	&lt;param-name&gt;encoding&lt;/param-name&gt;
	&lt;param-value&gt;UTF-8&lt;/param-value&gt;
	&lt;/init-param&gt;
	&lt;/filter&gt;
	&lt;filter-mapping&gt;
	&lt;filter-name&gt;encodingFilter&lt;/filter-name&gt;
	&lt;url-pattern&gt;/*&lt;/url-pattern&gt;
	&lt;/filter-mapping&gt;	

&lt;/web-app&gt;
</pre></div></div>
      <p class="number">步骤三：测试</p>
      <p>重新部署并启动项目，再次打开登录页面，输入中文账号登录，浏览器显示效果如下图：</p>
      <div class="image">
        <img src="./CASE_files/image002.png">
        <p>图-2</p>
      </div>
      <h3>1.4 完整代码</h3>
      <p>web.xml完整代码如下：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap" style="display: none;"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#">pop-up</a></pre></div><pre class="hide sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">&lt;?</span>xml version<span class="sh_symbol">=</span><span class="sh_string">"1.0"</span> encoding<span class="sh_symbol">=</span><span class="sh_string">"UTF-8"</span><span class="sh_symbol">?&gt;</span></li><li><span class="sh_symbol">&lt;</span>web<span class="sh_symbol">-</span>app version<span class="sh_symbol">=</span><span class="sh_string">"2.5"</span> </li><li>&nbsp;&nbsp;&nbsp;&nbsp;xmlns<span class="sh_symbol">=</span><span class="sh_string">"http://java.sun.com/xml/ns/javaee"</span> </li><li>&nbsp;&nbsp;&nbsp;&nbsp;xmlns<span class="sh_symbol">:</span>xsi<span class="sh_symbol">=</span><span class="sh_string">"http://www.w3.org/2001/XMLSchema-instance"</span> </li><li>&nbsp;&nbsp;&nbsp;&nbsp;xsi<span class="sh_symbol">:</span>schemaLocation<span class="sh_symbol">=</span><span class="sh_string">"http://java.sun.com/xml/ns/javaee </span></li><li><span class="sh_string">&nbsp;&nbsp;&nbsp;&nbsp;http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"</span><span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;</span>welcome<span class="sh_symbol">-</span>file<span class="sh_symbol">-</span>list<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;</span>welcome<span class="sh_symbol">-</span>file<span class="sh_symbol">&gt;</span>index<span class="sh_symbol">.</span>jsp<span class="sh_symbol">&lt;/</span>welcome<span class="sh_symbol">-</span>file<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;/</span>welcome<span class="sh_symbol">-</span>file<span class="sh_symbol">-</span>list<span class="sh_symbol">&gt;</span></li><li><span style="display:none;">&nbsp;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>servlet<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>servlet<span class="sh_symbol">-</span>name<span class="sh_symbol">&gt;</span>spring<span class="sh_symbol">&lt;/</span>servlet<span class="sh_symbol">-</span>name<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>servlet<span class="sh_symbol">-</span><span class="sh_keyword">class</span><span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;org<span class="sh_symbol">.</span>springframework<span class="sh_symbol">.</span>web<span class="sh_symbol">.</span>servlet<span class="sh_symbol">.</span>DispatcherServlet</li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>servlet<span class="sh_symbol">-</span><span class="sh_keyword">class</span><span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>init<span class="sh_symbol">-</span>param<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>param<span class="sh_symbol">-</span>name<span class="sh_symbol">&gt;</span>contextConfigLocation<span class="sh_symbol">&lt;/</span>param<span class="sh_symbol">-</span>name<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>param<span class="sh_symbol">-</span>value<span class="sh_symbol">&gt;</span>classpath<span class="sh_symbol">:</span>applicationContext<span class="sh_symbol">.</span>xml<span class="sh_symbol">&lt;/</span>param<span class="sh_symbol">-</span>value<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>init<span class="sh_symbol">-</span>param<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>load<span class="sh_symbol">-</span>on<span class="sh_symbol">-</span>startup<span class="sh_symbol">&gt;</span><span class="sh_number">1</span><span class="sh_symbol">&lt;/</span>load<span class="sh_symbol">-</span>on<span class="sh_symbol">-</span>startup<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>servlet<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>servlet<span class="sh_symbol">-</span>mapping<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>servlet<span class="sh_symbol">-</span>name<span class="sh_symbol">&gt;</span>spring<span class="sh_symbol">&lt;/</span>servlet<span class="sh_symbol">-</span>name<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>url<span class="sh_symbol">-</span>pattern<span class="sh_symbol">&gt;*.</span><span class="sh_keyword">do</span><span class="sh_symbol">&lt;/</span>url<span class="sh_symbol">-</span>pattern<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>servlet<span class="sh_symbol">-</span>mapping<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>filter<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>filter<span class="sh_symbol">-</span>name<span class="sh_symbol">&gt;</span>encodingFilter<span class="sh_symbol">&lt;/</span>filter<span class="sh_symbol">-</span>name<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>filter<span class="sh_symbol">-</span><span class="sh_keyword">class</span><span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;org<span class="sh_symbol">.</span>springframework<span class="sh_symbol">.</span>web<span class="sh_symbol">.</span>filter<span class="sh_symbol">.</span>CharacterEncodingFilter</li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>filter<span class="sh_symbol">-</span><span class="sh_keyword">class</span><span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>init<span class="sh_symbol">-</span>param<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>param<span class="sh_symbol">-</span>name<span class="sh_symbol">&gt;</span>encoding<span class="sh_symbol">&lt;/</span>param<span class="sh_symbol">-</span>name<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>param<span class="sh_symbol">-</span>value<span class="sh_symbol">&gt;</span>UTF<span class="sh_number">-8</span><span class="sh_symbol">&lt;/</span>param<span class="sh_symbol">-</span>value<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>init<span class="sh_symbol">-</span>param<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>filter<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>filter<span class="sh_symbol">-</span>mapping<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>filter<span class="sh_symbol">-</span>name<span class="sh_symbol">&gt;</span>encodingFilter<span class="sh_symbol">&lt;/</span>filter<span class="sh_symbol">-</span>name<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>url<span class="sh_symbol">-</span>pattern<span class="sh_symbol">&gt;</span><span class="sh_comment">/*&lt;/url-pattern&gt;</span></li><li><span class="sh_comment">&nbsp;&nbsp;&nbsp;&nbsp;&lt;/filter-mapping&gt;&nbsp;&nbsp;&nbsp;&nbsp;</span></li><li><span style="display:none;">&nbsp;</span></li><li><span class="sh_comment">&lt;/web-app&gt;</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;web-app version="2.5" 
	xmlns="http://java.sun.com/xml/ns/javaee" 
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
	xsi:schemaLocation="http://java.sun.com/xml/ns/javaee 
	http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"&gt;
&lt;welcome-file-list&gt;
&lt;welcome-file&gt;index.jsp&lt;/welcome-file&gt;
&lt;/welcome-file-list&gt;

	&lt;servlet&gt;
		&lt;servlet-name&gt;spring&lt;/servlet-name&gt;
		&lt;servlet-class&gt;
			org.springframework.web.servlet.DispatcherServlet
		&lt;/servlet-class&gt;
		&lt;init-param&gt;
			&lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;
			&lt;param-value&gt;classpath:applicationContext.xml&lt;/param-value&gt;
		&lt;/init-param&gt;
		&lt;load-on-startup&gt;1&lt;/load-on-startup&gt;
	&lt;/servlet&gt;
	&lt;servlet-mapping&gt;
		&lt;servlet-name&gt;spring&lt;/servlet-name&gt;
		&lt;url-pattern&gt;*.do&lt;/url-pattern&gt;
	&lt;/servlet-mapping&gt;
	
	&lt;filter&gt;
	&lt;filter-name&gt;encodingFilter&lt;/filter-name&gt;
	&lt;filter-class&gt;
		org.springframework.web.filter.CharacterEncodingFilter
	&lt;/filter-class&gt;
	&lt;init-param&gt;
	&lt;param-name&gt;encoding&lt;/param-name&gt;
	&lt;param-value&gt;UTF-8&lt;/param-value&gt;
	&lt;/init-param&gt;
	&lt;/filter&gt;
	&lt;filter-mapping&gt;
	&lt;filter-name&gt;encodingFilter&lt;/filter-name&gt;
	&lt;url-pattern&gt;/*&lt;/url-pattern&gt;
	&lt;/filter-mapping&gt;	

&lt;/web-app&gt;
</pre><div class="sh_sourceCode snippet-hide"><pre><a href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#" class="snippet-revealed snippet-toggle sh_url">隐藏</a></pre></div></div><div class="snippet-reveal sh_acid snippet-wrap"><pre class="sh_sourceCode"><a href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#" class="snippet-toggle sh_url">代码</a></pre></div></div>
      <a name="case2">
      </a>
      <h2>2 异常处理</h2>
      <h3>2.1 问题</h3>
      <p>使用Spring MVC处理项目中发生的异常。</p>
      <h3>2.2 方案</h3>
      <p>Spring MVC处理异常有3种方式：</p>
      <ol class="list">
        <li>使用Spring MVC预置的类SimpleMappingExceptionResolver处理异常。
</li>
        <li>实现异常处理接口HandlerExceptionResolver来自定义异常处理类。
</li>
        <li>使用@ExceptionHandler处理异常。
</li>
      </ol>
      <p>本案例将演示第1、3种异常处理的方式，第2种方式可以由第1种方式代替，故省略。</p>
      <h3>2.3 步骤</h3>
      <p class="number">步骤一：开发准备</p>
      <p>创建项目Spring05，导入jar包，如下图：</p>
      <div class="image">
        <img src="./CASE_files/image003.png">
        <p>图-3</p>
      </div>
      <p>配置web.xml，代码如下：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">&lt;?</span>xml version<span class="sh_symbol">=</span><span class="sh_string">"1.0"</span> encoding<span class="sh_symbol">=</span><span class="sh_string">"UTF-8"</span><span class="sh_symbol">?&gt;</span></li><li><span class="sh_symbol">&lt;</span>web<span class="sh_symbol">-</span>app version<span class="sh_symbol">=</span><span class="sh_string">"2.5"</span> </li><li>&nbsp;&nbsp;&nbsp;&nbsp;xmlns<span class="sh_symbol">=</span><span class="sh_string">"http://java.sun.com/xml/ns/javaee"</span> </li><li>&nbsp;&nbsp;&nbsp;&nbsp;xmlns<span class="sh_symbol">:</span>xsi<span class="sh_symbol">=</span><span class="sh_string">"http://www.w3.org/2001/XMLSchema-instance"</span> </li><li>&nbsp;&nbsp;&nbsp;&nbsp;xsi<span class="sh_symbol">:</span>schemaLocation<span class="sh_symbol">=</span><span class="sh_string">"http://java.sun.com/xml/ns/javaee </span></li><li><span class="sh_string">&nbsp;&nbsp;&nbsp;&nbsp;http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"</span><span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;</span>welcome<span class="sh_symbol">-</span>file<span class="sh_symbol">-</span>list<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;</span>welcome<span class="sh_symbol">-</span>file<span class="sh_symbol">&gt;</span>index<span class="sh_symbol">.</span>jsp<span class="sh_symbol">&lt;/</span>welcome<span class="sh_symbol">-</span>file<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;/</span>welcome<span class="sh_symbol">-</span>file<span class="sh_symbol">-</span>list<span class="sh_symbol">&gt;</span></li><li><span style="display:none;">&nbsp;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>servlet<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>servlet<span class="sh_symbol">-</span>name<span class="sh_symbol">&gt;</span>springmvc<span class="sh_symbol">&lt;/</span>servlet<span class="sh_symbol">-</span>name<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>servlet<span class="sh_symbol">-</span><span class="sh_keyword">class</span><span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;org<span class="sh_symbol">.</span>springframework<span class="sh_symbol">.</span>web<span class="sh_symbol">.</span>servlet<span class="sh_symbol">.</span>DispatcherServlet</li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>servlet<span class="sh_symbol">-</span><span class="sh_keyword">class</span><span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>init<span class="sh_symbol">-</span>param<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>param<span class="sh_symbol">-</span>name<span class="sh_symbol">&gt;</span>contextConfigLocation<span class="sh_symbol">&lt;/</span>param<span class="sh_symbol">-</span>name<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>param<span class="sh_symbol">-</span>value<span class="sh_symbol">&gt;</span>classpath<span class="sh_symbol">:</span>spring<span class="sh_symbol">-</span>mvc<span class="sh_symbol">.</span>xml<span class="sh_symbol">&lt;/</span>param<span class="sh_symbol">-</span>value<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>init<span class="sh_symbol">-</span>param<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>load<span class="sh_symbol">-</span>on<span class="sh_symbol">-</span>startup<span class="sh_symbol">&gt;</span><span class="sh_number">1</span><span class="sh_symbol">&lt;/</span>load<span class="sh_symbol">-</span>on<span class="sh_symbol">-</span>startup<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>servlet<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>servlet<span class="sh_symbol">-</span>mapping<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>servlet<span class="sh_symbol">-</span>name<span class="sh_symbol">&gt;</span>springmvc<span class="sh_symbol">&lt;/</span>servlet<span class="sh_symbol">-</span>name<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>url<span class="sh_symbol">-</span>pattern<span class="sh_symbol">&gt;*.</span><span class="sh_keyword">do</span><span class="sh_symbol">&lt;/</span>url<span class="sh_symbol">-</span>pattern<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>servlet<span class="sh_symbol">-</span>mapping<span class="sh_symbol">&gt;</span></li><li><span style="display:none;">&nbsp;</span></li><li><span class="sh_symbol">&lt;/</span>web<span class="sh_symbol">-</span>app<span class="sh_symbol">&gt;</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;web-app version="2.5" 
	xmlns="http://java.sun.com/xml/ns/javaee" 
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
	xsi:schemaLocation="http://java.sun.com/xml/ns/javaee 
	http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"&gt;
&lt;welcome-file-list&gt;
&lt;welcome-file&gt;index.jsp&lt;/welcome-file&gt;
&lt;/welcome-file-list&gt;

	&lt;servlet&gt;
		&lt;servlet-name&gt;springmvc&lt;/servlet-name&gt;
		&lt;servlet-class&gt;
			org.springframework.web.servlet.DispatcherServlet
		&lt;/servlet-class&gt;
		&lt;init-param&gt;
			&lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;
			&lt;param-value&gt;classpath:spring-mvc.xml&lt;/param-value&gt;
		&lt;/init-param&gt;
		&lt;load-on-startup&gt;1&lt;/load-on-startup&gt;
	&lt;/servlet&gt;
	&lt;servlet-mapping&gt;
		&lt;servlet-name&gt;springmvc&lt;/servlet-name&gt;
		&lt;url-pattern&gt;*.do&lt;/url-pattern&gt;
	&lt;/servlet-mapping&gt;

&lt;/web-app&gt;
</pre></div></div>
      <p>配置spring-mvc.xml，代码如下：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">&lt;?</span>xml version<span class="sh_symbol">=</span><span class="sh_string">"1.0"</span> encoding<span class="sh_symbol">=</span><span class="sh_string">"UTF-8"</span><span class="sh_symbol">?&gt;</span></li><li><span class="sh_symbol">&lt;</span>beans xmlns<span class="sh_symbol">=</span><span class="sh_string">"http://www.springframework.org/schema/beans"</span> </li><li>&nbsp;&nbsp;&nbsp;&nbsp;xmlns<span class="sh_symbol">:</span>xsi<span class="sh_symbol">=</span><span class="sh_string">"http://www.w3.org/2001/XMLSchema-instance"</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;xmlns<span class="sh_symbol">:</span>context<span class="sh_symbol">=</span><span class="sh_string">"http://www.springframework.org/schema/context"</span> </li><li>&nbsp;&nbsp;&nbsp;&nbsp;xmlns<span class="sh_symbol">:</span>jdbc<span class="sh_symbol">=</span><span class="sh_string">"http://www.springframework.org/schema/jdbc"</span>  </li><li>&nbsp;&nbsp;&nbsp;&nbsp;xmlns<span class="sh_symbol">:</span>jee<span class="sh_symbol">=</span><span class="sh_string">"http://www.springframework.org/schema/jee"</span> </li><li>&nbsp;&nbsp;&nbsp;&nbsp;xmlns<span class="sh_symbol">:</span>tx<span class="sh_symbol">=</span><span class="sh_string">"http://www.springframework.org/schema/tx"</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;xmlns<span class="sh_symbol">:</span>aop<span class="sh_symbol">=</span><span class="sh_string">"http://www.springframework.org/schema/aop"</span> </li><li>&nbsp;&nbsp;&nbsp;&nbsp;xmlns<span class="sh_symbol">:</span>mvc<span class="sh_symbol">=</span><span class="sh_string">"http://www.springframework.org/schema/mvc"</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;xmlns<span class="sh_symbol">:</span>util<span class="sh_symbol">=</span><span class="sh_string">"http://www.springframework.org/schema/util"</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;xmlns<span class="sh_symbol">:</span>jpa<span class="sh_symbol">=</span><span class="sh_string">"http://www.springframework.org/schema/data/jpa"</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;xsi<span class="sh_symbol">:</span>schemaLocation<span class="sh_symbol">=</span><span class="sh_string">"</span></li><li><span class="sh_string">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.2.xsd</span></li><li><span class="sh_string">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.2.xsd</span></li><li><span class="sh_string">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http://www.springframework.org/schema/jdbc http://www.springframework.org/schema/jdbc/spring-jdbc-3.2.xsd</span></li><li><span class="sh_string">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http://www.springframework.org/schema/jee http://www.springframework.org/schema/jee/spring-jee-3.2.xsd</span></li><li><span class="sh_string">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.2.xsd</span></li><li><span class="sh_string">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http://www.springframework.org/schema/data/jpa http://www.springframework.org/schema/data/jpa/spring-jpa-1.3.xsd</span></li><li><span class="sh_string">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-3.2.xsd</span></li><li><span class="sh_string">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.2.xsd</span></li><li><span class="sh_string">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-3.2.xsd"</span><span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;!--</span>开启注解扫描 <span class="sh_symbol">--&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>context<span class="sh_symbol">:</span>component<span class="sh_symbol">-</span>scan base<span class="sh_symbol">-</span>package<span class="sh_symbol">=</span><span class="sh_string">"com.tarena"</span><span class="sh_symbol">/&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;!--</span>开启MVC注解扫描 <span class="sh_symbol">--&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>mvc<span class="sh_symbol">:</span>annotation<span class="sh_symbol">-</span><span class="sh_normal">driven</span><span class="sh_symbol">/&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;!--</span>定义视图解析器ViewResolver <span class="sh_symbol">--&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>bean id<span class="sh_symbol">=</span><span class="sh_string">"viewResolver"</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">class</span><span class="sh_symbol">=</span><span class="sh_string">"org.springframework.web.servlet.view.InternalResourceViewResolver"</span><span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>property name<span class="sh_symbol">=</span><span class="sh_string">"prefix"</span> value<span class="sh_symbol">=</span><span class="sh_string">"/WEB-INF/"</span><span class="sh_symbol">/&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>property name<span class="sh_symbol">=</span><span class="sh_string">"suffix"</span> value<span class="sh_symbol">=</span><span class="sh_string">".jsp"</span><span class="sh_symbol">/&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>bean<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;</li><li><span class="sh_symbol">&lt;/</span>beans<span class="sh_symbol">&gt;</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;beans xmlns="http://www.springframework.org/schema/beans" 
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xmlns:context="http://www.springframework.org/schema/context" 
	xmlns:jdbc="http://www.springframework.org/schema/jdbc"  
	xmlns:jee="http://www.springframework.org/schema/jee" 
	xmlns:tx="http://www.springframework.org/schema/tx"
	xmlns:aop="http://www.springframework.org/schema/aop" 
	xmlns:mvc="http://www.springframework.org/schema/mvc"
	xmlns:util="http://www.springframework.org/schema/util"
	xmlns:jpa="http://www.springframework.org/schema/data/jpa"
	xsi:schemaLocation="
		http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.2.xsd
		http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.2.xsd
		http://www.springframework.org/schema/jdbc http://www.springframework.org/schema/jdbc/spring-jdbc-3.2.xsd
		http://www.springframework.org/schema/jee http://www.springframework.org/schema/jee/spring-jee-3.2.xsd
		http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.2.xsd
		http://www.springframework.org/schema/data/jpa http://www.springframework.org/schema/data/jpa/spring-jpa-1.3.xsd
		http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-3.2.xsd
		http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.2.xsd
		http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-3.2.xsd"&gt;
	
	&lt;!--开启注解扫描 --&gt;
	&lt;context:component-scan base-package="com.tarena"/&gt;
	
	&lt;!--开启MVC注解扫描 --&gt;
	&lt;mvc:annotation-driven/&gt;
	
	&lt;!--定义视图解析器ViewResolver --&gt;
	&lt;bean id="viewResolver"
		class="org.springframework.web.servlet.view.InternalResourceViewResolver"&gt;
		&lt;property name="prefix" value="/WEB-INF/"/&gt;
		&lt;property name="suffix" value=".jsp"/&gt;
	&lt;/bean&gt;
	
&lt;/beans&gt;
</pre></div></div>
      <p class="number">步骤二：使用SimpleMappingExceptionResolver处理异常</p>
      <p>在spring-mvc.xml中配置SimpleMappingExceptionResolver，追加代码如下：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;!--</span>处理系统异常 <span class="sh_symbol">--&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>bean <span class="sh_keyword">class</span><span class="sh_symbol">=</span><span class="sh_string">"org.springframework.web.servlet.handler.SimpleMappingExceptionResolver"</span><span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>property name<span class="sh_symbol">=</span><span class="sh_string">"exceptionMappings"</span><span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>props<span class="sh_symbol">&gt;</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>prop key<span class="sh_symbol">=</span><span class="sh_string">"java.lang.Exception"</span><span class="sh_symbol">&gt;</span><span class="sh_normal">jsp</span><span class="sh_symbol">/</span>error<span class="sh_symbol">&lt;/</span>prop<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>props<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>property<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>bean<span class="sh_symbol">&gt;</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">	&lt;!--处理系统异常 --&gt;
	&lt;bean class="org.springframework.web.servlet.handler.SimpleMappingExceptionResolver"&gt;
		&lt;property name="exceptionMappings"&gt;
	&lt;props&gt;		
	&lt;prop key="java.lang.Exception"&gt;jsp/error&lt;/prop&gt;
	&lt;/props&gt;
	&lt;/property&gt;
	&lt;/bean&gt;
</pre></div></div>
      <p>创建HelloController，代码如下：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li>package com<span class="sh_symbol">.</span>tarena<span class="sh_symbol">.</span>web<span class="sh_symbol">;</span></li><li><span style="display:none;">&nbsp;</span></li><li>import java<span class="sh_symbol">.</span>io<span class="sh_symbol">.</span>Serializable<span class="sh_symbol">;</span></li><li>import javax<span class="sh_symbol">.</span>servlet<span class="sh_symbol">.</span>http<span class="sh_symbol">.</span>HttpServletRequest<span class="sh_symbol">;</span></li><li>import javax<span class="sh_symbol">.</span>servlet<span class="sh_symbol">.</span>http<span class="sh_symbol">.</span>HttpServletResponse<span class="sh_symbol">;</span></li><li>import org<span class="sh_symbol">.</span>springframework<span class="sh_symbol">.</span>stereotype<span class="sh_symbol">.</span>Controller<span class="sh_symbol">;</span></li><li>import org<span class="sh_symbol">.</span>springframework<span class="sh_symbol">.</span>web<span class="sh_symbol">.</span>bind<span class="sh_symbol">.</span>annotation<span class="sh_symbol">.</span>ExceptionHandler<span class="sh_symbol">;</span></li><li>import org<span class="sh_symbol">.</span>springframework<span class="sh_symbol">.</span>web<span class="sh_symbol">.</span>bind<span class="sh_symbol">.</span>annotation<span class="sh_symbol">.</span>RequestMapping<span class="sh_symbol">;</span></li><li><span style="display:none;">&nbsp;</span></li><li>@Controller</li><li>@<span class="sh_function">RequestMapping</span><span class="sh_symbol">(</span><span class="sh_string">"/demo"</span><span class="sh_symbol">)</span></li><li><span class="sh_keyword">public</span> <span class="sh_keyword">class</span> HelloController <span class="sh_keyword">implements</span> Serializable <span class="sh_cbracket">{</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;@<span class="sh_function">RequestMapping</span><span class="sh_symbol">(</span><span class="sh_string">"/hello.do"</span><span class="sh_symbol">)</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">public</span> <span class="sh_predef_func">String</span> <span class="sh_function">hello</span><span class="sh_symbol">()</span> <span class="sh_cbracket">{</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System<span class="sh_symbol">.</span>out<span class="sh_symbol">.</span><span class="sh_function">println</span><span class="sh_symbol">(</span><span class="sh_string">"hello"</span><span class="sh_symbol">);</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Integer<span class="sh_symbol">.</span><span class="sh_function">valueOf</span><span class="sh_symbol">(</span><span class="sh_string">"abc"</span><span class="sh_symbol">);</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">return</span> <span class="sh_string">"jsp/hello"</span><span class="sh_symbol">;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_cbracket">}</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</li><li><span class="sh_cbracket">}</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">package com.tarena.web;

import java.io.Serializable;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.ExceptionHandler;
import org.springframework.web.bind.annotation.RequestMapping;

@Controller
@RequestMapping("/demo")
public class HelloController implements Serializable {
		
	@RequestMapping("/hello.do")
	public String hello() {
		System.out.println("hello");
		Integer.valueOf("abc");
		return "jsp/hello";
	}
		
}
</pre></div></div>
      <p>在WEB-INF/jsp下创建hello.jsp，代码如下：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">&lt;%</span>@page pageEncoding<span class="sh_symbol">=</span><span class="sh_string">"utf-8"</span><span class="sh_symbol">%&gt;</span></li><li><span class="sh_symbol">&lt;</span>html<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;</span>head<span class="sh_symbol">&gt;&lt;/</span>head<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;</span>body<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>h1<span class="sh_symbol">&gt;</span>Hello<span class="sh_symbol">,</span> SpringMVC<span class="sh_symbol">.&lt;/</span>h1<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;/</span>body<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;/</span>html<span class="sh_symbol">&gt;</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">&lt;%@page pageEncoding="utf-8"%&gt;
&lt;html&gt;
&lt;head&gt;&lt;/head&gt;
&lt;body&gt;
	&lt;h1&gt;Hello, SpringMVC.&lt;/h1&gt;
&lt;/body&gt;
&lt;/html&gt;
</pre></div></div>
      <p>在WEB-INF/jsp下创建error.jsp，代码如下：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">&lt;%</span>@page pageEncoding<span class="sh_symbol">=</span><span class="sh_string">"utf-8"</span><span class="sh_symbol">%&gt;</span></li><li><span class="sh_symbol">&lt;</span>html<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;</span>head<span class="sh_symbol">&gt;&lt;/</span>head<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;</span>body<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>h1 style<span class="sh_symbol">=</span><span class="sh_string">"color:red;"</span><span class="sh_symbol">&gt;</span>系统报错<span class="sh_symbol">,</span>请联系管理员<span class="sh_symbol">.&lt;/</span>h1<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;/</span>body<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;/</span>html<span class="sh_symbol">&gt;</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">&lt;%@page pageEncoding="utf-8"%&gt;
&lt;html&gt;
&lt;head&gt;&lt;/head&gt;
&lt;body&gt;
	&lt;h1 style="color:red;"&gt;系统报错,请联系管理员.&lt;/h1&gt;
&lt;/body&gt;
&lt;/html&gt;
</pre></div></div>
      <p class="number">步骤三：测试</p>
      <p>部署项目并启动Tomcat，浏览器访问http://localhost:8088/Spring05/demo/hello.do，效果如下图：</p>
      <div class="image">
        <img src="./CASE_files/image004.png">
        <p>图-4</p>
      </div>
      <p class="number">步骤四：使用@ExceptionHandler处理异常</p>
      <p>修改HelloController，增加异常处理方法，代码如下：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li>package com<span class="sh_symbol">.</span>tarena<span class="sh_symbol">.</span>web<span class="sh_symbol">;</span></li><li><span style="display:none;">&nbsp;</span></li><li>import java<span class="sh_symbol">.</span>io<span class="sh_symbol">.</span>Serializable<span class="sh_symbol">;</span></li><li>import javax<span class="sh_symbol">.</span>servlet<span class="sh_symbol">.</span>http<span class="sh_symbol">.</span>HttpServletRequest<span class="sh_symbol">;</span></li><li>import javax<span class="sh_symbol">.</span>servlet<span class="sh_symbol">.</span>http<span class="sh_symbol">.</span>HttpServletResponse<span class="sh_symbol">;</span></li><li>import org<span class="sh_symbol">.</span>springframework<span class="sh_symbol">.</span>stereotype<span class="sh_symbol">.</span>Controller<span class="sh_symbol">;</span></li><li>import org<span class="sh_symbol">.</span>springframework<span class="sh_symbol">.</span>web<span class="sh_symbol">.</span>bind<span class="sh_symbol">.</span>annotation<span class="sh_symbol">.</span>ExceptionHandler<span class="sh_symbol">;</span></li><li>import org<span class="sh_symbol">.</span>springframework<span class="sh_symbol">.</span>web<span class="sh_symbol">.</span>bind<span class="sh_symbol">.</span>annotation<span class="sh_symbol">.</span>RequestMapping<span class="sh_symbol">;</span></li><li><span style="display:none;">&nbsp;</span></li><li>@Controller</li><li>@<span class="sh_function">RequestMapping</span><span class="sh_symbol">(</span><span class="sh_string">"/demo"</span><span class="sh_symbol">)</span></li><li><span class="sh_keyword">public</span> <span class="sh_keyword">class</span> HelloController <span class="sh_keyword">implements</span> Serializable <span class="sh_cbracket">{</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;@ExceptionHandler</li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">public</span> <span class="sh_predef_func">String</span> <span class="sh_function">handleException</span><span class="sh_symbol">(</span>Exception e<span class="sh_symbol">,</span> </li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;HttpServletRequest request<span class="sh_symbol">,</span> HttpServletResponse response<span class="sh_symbol">)</span> </li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">throws</span> Exception <span class="sh_cbracket">{</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">if</span><span class="sh_symbol">(</span>e <span class="sh_keyword">instanceof</span> NumberFormatException<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;request<span class="sh_symbol">.</span><span class="sh_function">setAttribute</span><span class="sh_symbol">(</span><span class="sh_string">"message"</span><span class="sh_symbol">,</span> <span class="sh_string">"亲,请输入数字哦."</span><span class="sh_symbol">);</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">return</span> <span class="sh_string">"jsp/message"</span><span class="sh_symbol">;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_cbracket">}</span> <span class="sh_keyword">else</span> <span class="sh_cbracket">{</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">throw</span> e<span class="sh_symbol">;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_cbracket">}</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_cbracket">}</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;@<span class="sh_function">RequestMapping</span><span class="sh_symbol">(</span><span class="sh_string">"/hello.do"</span><span class="sh_symbol">)</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">public</span> <span class="sh_predef_func">String</span> <span class="sh_function">hello</span><span class="sh_symbol">()</span> <span class="sh_cbracket">{</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System<span class="sh_symbol">.</span>out<span class="sh_symbol">.</span><span class="sh_function">println</span><span class="sh_symbol">(</span><span class="sh_string">"hello"</span><span class="sh_symbol">);</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Integer<span class="sh_symbol">.</span><span class="sh_function">valueOf</span><span class="sh_symbol">(</span><span class="sh_string">"abc"</span><span class="sh_symbol">);</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">return</span> <span class="sh_string">"jsp/hello"</span><span class="sh_symbol">;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_cbracket">}</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;@<span class="sh_function">RequestMapping</span><span class="sh_symbol">(</span><span class="sh_string">"/hi.do"</span><span class="sh_symbol">)</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">public</span> <span class="sh_predef_func">String</span> <span class="sh_function">hi</span><span class="sh_symbol">()</span> <span class="sh_cbracket">{</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System<span class="sh_symbol">.</span>out<span class="sh_symbol">.</span><span class="sh_function">println</span><span class="sh_symbol">(</span><span class="sh_string">"hi"</span><span class="sh_symbol">);</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_predef_func">String</span> name <span class="sh_symbol">=</span> <span class="sh_string">"abc"</span><span class="sh_symbol">;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;name<span class="sh_symbol">.</span><span class="sh_function">charAt</span><span class="sh_symbol">(</span><span class="sh_number">9</span><span class="sh_symbol">);</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">return</span> <span class="sh_string">"jsp/hello"</span><span class="sh_symbol">;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_cbracket">}</span></li><li><span style="display:none;">&nbsp;</span></li><li><span style="display:none;">&nbsp;</span></li><li><span class="sh_cbracket">}</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">package com.tarena.web;

import java.io.Serializable;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.ExceptionHandler;
import org.springframework.web.bind.annotation.RequestMapping;

@Controller
@RequestMapping("/demo")
public class HelloController implements Serializable {
	
	@ExceptionHandler
	public String handleException(Exception e, 
		HttpServletRequest request, HttpServletResponse response) 
		throws Exception {
		if(e instanceof NumberFormatException) {
			request.setAttribute("message", "亲,请输入数字哦.");
			return "jsp/message";
		} else {
			throw e;
		}
	}
	
	@RequestMapping("/hello.do")
	public String hello() {
		System.out.println("hello");
		Integer.valueOf("abc");
		return "jsp/hello";
	}
	
	@RequestMapping("/hi.do")
	public String hi() {
		System.out.println("hi");
		String name = "abc";
		name.charAt(9);
		return "jsp/hello";
	}


}
</pre></div></div>
      <p>在WEB-INF/jsp下创建message.jsp，代码如下：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">&lt;%</span>@page pageEncoding<span class="sh_symbol">=</span><span class="sh_string">"utf-8"</span><span class="sh_symbol">%&gt;</span></li><li><span class="sh_symbol">&lt;</span>html<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;</span>head<span class="sh_symbol">&gt;&lt;/</span>head<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;</span>body<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>h1<span class="sh_symbol">&gt;</span>$<span class="sh_cbracket">{</span>message <span class="sh_cbracket">}</span><span class="sh_symbol">&lt;/</span>h1<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;/</span>body<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;/</span>html<span class="sh_symbol">&gt;</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">&lt;%@page pageEncoding="utf-8"%&gt;
&lt;html&gt;
&lt;head&gt;&lt;/head&gt;
&lt;body&gt;
	&lt;h1&gt;${message }&lt;/h1&gt;
&lt;/body&gt;
&lt;/html&gt;
</pre></div></div>
      <p class="number">步骤五：测试</p>
      <p>重新部署项目并启动Tomcat，浏览器访问http://localhost:8088/Spring05/demo/hello.do，效果如下图：</p>
      <div class="image">
        <img src="./CASE_files/image005.png">
        <p>图-5</p>
      </div>
      <p>浏览器访问http://localhost:8088/Spring05/demo/hi.do，效果如下图：</p>
      <div class="image">
        <img src="./CASE_files/image006.png">
        <p>图-6</p>
      </div>
      <h3>2.4 完整代码</h3>
      <p>web.xml完整代码如下：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap" style="display: none;"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#">pop-up</a></pre></div><pre class="hide sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">&lt;?</span>xml version<span class="sh_symbol">=</span><span class="sh_string">"1.0"</span> encoding<span class="sh_symbol">=</span><span class="sh_string">"UTF-8"</span><span class="sh_symbol">?&gt;</span></li><li><span class="sh_symbol">&lt;</span>web<span class="sh_symbol">-</span>app version<span class="sh_symbol">=</span><span class="sh_string">"2.5"</span> </li><li>&nbsp;&nbsp;&nbsp;&nbsp;xmlns<span class="sh_symbol">=</span><span class="sh_string">"http://java.sun.com/xml/ns/javaee"</span> </li><li>&nbsp;&nbsp;&nbsp;&nbsp;xmlns<span class="sh_symbol">:</span>xsi<span class="sh_symbol">=</span><span class="sh_string">"http://www.w3.org/2001/XMLSchema-instance"</span> </li><li>&nbsp;&nbsp;&nbsp;&nbsp;xsi<span class="sh_symbol">:</span>schemaLocation<span class="sh_symbol">=</span><span class="sh_string">"http://java.sun.com/xml/ns/javaee </span></li><li><span class="sh_string">&nbsp;&nbsp;&nbsp;&nbsp;http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"</span><span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;</span>welcome<span class="sh_symbol">-</span>file<span class="sh_symbol">-</span>list<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;</span>welcome<span class="sh_symbol">-</span>file<span class="sh_symbol">&gt;</span>index<span class="sh_symbol">.</span>jsp<span class="sh_symbol">&lt;/</span>welcome<span class="sh_symbol">-</span>file<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;/</span>welcome<span class="sh_symbol">-</span>file<span class="sh_symbol">-</span>list<span class="sh_symbol">&gt;</span></li><li><span style="display:none;">&nbsp;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>servlet<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>servlet<span class="sh_symbol">-</span>name<span class="sh_symbol">&gt;</span>springmvc<span class="sh_symbol">&lt;/</span>servlet<span class="sh_symbol">-</span>name<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>servlet<span class="sh_symbol">-</span><span class="sh_keyword">class</span><span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;org<span class="sh_symbol">.</span>springframework<span class="sh_symbol">.</span>web<span class="sh_symbol">.</span>servlet<span class="sh_symbol">.</span>DispatcherServlet</li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>servlet<span class="sh_symbol">-</span><span class="sh_keyword">class</span><span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>init<span class="sh_symbol">-</span>param<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>param<span class="sh_symbol">-</span>name<span class="sh_symbol">&gt;</span>contextConfigLocation<span class="sh_symbol">&lt;/</span>param<span class="sh_symbol">-</span>name<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>param<span class="sh_symbol">-</span>value<span class="sh_symbol">&gt;</span>classpath<span class="sh_symbol">:</span>spring<span class="sh_symbol">-</span>mvc<span class="sh_symbol">.</span>xml<span class="sh_symbol">&lt;/</span>param<span class="sh_symbol">-</span>value<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>init<span class="sh_symbol">-</span>param<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>load<span class="sh_symbol">-</span>on<span class="sh_symbol">-</span>startup<span class="sh_symbol">&gt;</span><span class="sh_number">1</span><span class="sh_symbol">&lt;/</span>load<span class="sh_symbol">-</span>on<span class="sh_symbol">-</span>startup<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>servlet<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>servlet<span class="sh_symbol">-</span>mapping<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>servlet<span class="sh_symbol">-</span>name<span class="sh_symbol">&gt;</span>springmvc<span class="sh_symbol">&lt;/</span>servlet<span class="sh_symbol">-</span>name<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>url<span class="sh_symbol">-</span>pattern<span class="sh_symbol">&gt;*.</span><span class="sh_keyword">do</span><span class="sh_symbol">&lt;/</span>url<span class="sh_symbol">-</span>pattern<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>servlet<span class="sh_symbol">-</span>mapping<span class="sh_symbol">&gt;</span></li><li><span style="display:none;">&nbsp;</span></li><li><span class="sh_symbol">&lt;/</span>web<span class="sh_symbol">-</span>app<span class="sh_symbol">&gt;</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;web-app version="2.5" 
	xmlns="http://java.sun.com/xml/ns/javaee" 
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
	xsi:schemaLocation="http://java.sun.com/xml/ns/javaee 
	http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"&gt;
&lt;welcome-file-list&gt;
&lt;welcome-file&gt;index.jsp&lt;/welcome-file&gt;
&lt;/welcome-file-list&gt;

	&lt;servlet&gt;
		&lt;servlet-name&gt;springmvc&lt;/servlet-name&gt;
		&lt;servlet-class&gt;
			org.springframework.web.servlet.DispatcherServlet
		&lt;/servlet-class&gt;
		&lt;init-param&gt;
			&lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;
			&lt;param-value&gt;classpath:spring-mvc.xml&lt;/param-value&gt;
		&lt;/init-param&gt;
		&lt;load-on-startup&gt;1&lt;/load-on-startup&gt;
	&lt;/servlet&gt;
	&lt;servlet-mapping&gt;
		&lt;servlet-name&gt;springmvc&lt;/servlet-name&gt;
		&lt;url-pattern&gt;*.do&lt;/url-pattern&gt;
	&lt;/servlet-mapping&gt;

&lt;/web-app&gt;
</pre><div class="sh_sourceCode snippet-hide"><pre><a href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#" class="snippet-revealed snippet-toggle sh_url">隐藏</a></pre></div></div><div class="snippet-reveal sh_acid snippet-wrap"><pre class="sh_sourceCode"><a href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#" class="snippet-toggle sh_url">代码</a></pre></div></div>
      <p>spring-mvc.xml完整代码如下：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap" style="display: none;"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#">pop-up</a></pre></div><pre class="hide sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">&lt;?</span>xml version<span class="sh_symbol">=</span><span class="sh_string">"1.0"</span> encoding<span class="sh_symbol">=</span><span class="sh_string">"UTF-8"</span><span class="sh_symbol">?&gt;</span></li><li><span class="sh_symbol">&lt;</span>beans xmlns<span class="sh_symbol">=</span><span class="sh_string">"http://www.springframework.org/schema/beans"</span> </li><li>&nbsp;&nbsp;&nbsp;&nbsp;xmlns<span class="sh_symbol">:</span>xsi<span class="sh_symbol">=</span><span class="sh_string">"http://www.w3.org/2001/XMLSchema-instance"</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;xmlns<span class="sh_symbol">:</span>context<span class="sh_symbol">=</span><span class="sh_string">"http://www.springframework.org/schema/context"</span> </li><li>&nbsp;&nbsp;&nbsp;&nbsp;xmlns<span class="sh_symbol">:</span>jdbc<span class="sh_symbol">=</span><span class="sh_string">"http://www.springframework.org/schema/jdbc"</span>  </li><li>&nbsp;&nbsp;&nbsp;&nbsp;xmlns<span class="sh_symbol">:</span>jee<span class="sh_symbol">=</span><span class="sh_string">"http://www.springframework.org/schema/jee"</span> </li><li>&nbsp;&nbsp;&nbsp;&nbsp;xmlns<span class="sh_symbol">:</span>tx<span class="sh_symbol">=</span><span class="sh_string">"http://www.springframework.org/schema/tx"</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;xmlns<span class="sh_symbol">:</span>aop<span class="sh_symbol">=</span><span class="sh_string">"http://www.springframework.org/schema/aop"</span> </li><li>&nbsp;&nbsp;&nbsp;&nbsp;xmlns<span class="sh_symbol">:</span>mvc<span class="sh_symbol">=</span><span class="sh_string">"http://www.springframework.org/schema/mvc"</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;xmlns<span class="sh_symbol">:</span>util<span class="sh_symbol">=</span><span class="sh_string">"http://www.springframework.org/schema/util"</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;xmlns<span class="sh_symbol">:</span>jpa<span class="sh_symbol">=</span><span class="sh_string">"http://www.springframework.org/schema/data/jpa"</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;xsi<span class="sh_symbol">:</span>schemaLocation<span class="sh_symbol">=</span><span class="sh_string">"</span></li><li><span class="sh_string">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.2.xsd</span></li><li><span class="sh_string">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.2.xsd</span></li><li><span class="sh_string">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http://www.springframework.org/schema/jdbc http://www.springframework.org/schema/jdbc/spring-jdbc-3.2.xsd</span></li><li><span class="sh_string">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http://www.springframework.org/schema/jee http://www.springframework.org/schema/jee/spring-jee-3.2.xsd</span></li><li><span class="sh_string">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.2.xsd</span></li><li><span class="sh_string">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http://www.springframework.org/schema/data/jpa http://www.springframework.org/schema/data/jpa/spring-jpa-1.3.xsd</span></li><li><span class="sh_string">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-3.2.xsd</span></li><li><span class="sh_string">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.2.xsd</span></li><li><span class="sh_string">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-3.2.xsd"</span><span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;!--</span> 开启注解扫描 <span class="sh_symbol">--&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>context<span class="sh_symbol">:</span>component<span class="sh_symbol">-</span>scan base<span class="sh_symbol">-</span>package<span class="sh_symbol">=</span><span class="sh_string">"com.tarena"</span><span class="sh_symbol">/&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;!--</span> 开启MVC注解扫描 <span class="sh_symbol">--&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>mvc<span class="sh_symbol">:</span>annotation<span class="sh_symbol">-</span><span class="sh_normal">driven</span><span class="sh_symbol">/&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;!--</span> 定义视图解析器ViewResolver <span class="sh_symbol">--&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>bean id<span class="sh_symbol">=</span><span class="sh_string">"viewResolver"</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">class</span><span class="sh_symbol">=</span><span class="sh_string">"org.springframework.web.servlet.view.InternalResourceViewResolver"</span><span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>property name<span class="sh_symbol">=</span><span class="sh_string">"prefix"</span> value<span class="sh_symbol">=</span><span class="sh_string">"/WEB-INF/"</span><span class="sh_symbol">/&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>property name<span class="sh_symbol">=</span><span class="sh_string">"suffix"</span> value<span class="sh_symbol">=</span><span class="sh_string">".jsp"</span><span class="sh_symbol">/&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>bean<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;!--</span> 处理系统异常 <span class="sh_symbol">--&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>bean <span class="sh_keyword">class</span><span class="sh_symbol">=</span><span class="sh_string">"org.springframework.web.servlet.handler.SimpleMappingExceptionResolver"</span><span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>property name<span class="sh_symbol">=</span><span class="sh_string">"exceptionMappings"</span><span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>props<span class="sh_symbol">&gt;</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>prop key<span class="sh_symbol">=</span><span class="sh_string">"java.lang.Exception"</span><span class="sh_symbol">&gt;</span><span class="sh_normal">jsp</span><span class="sh_symbol">/</span>error<span class="sh_symbol">&lt;/</span>prop<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>props<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>property<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>bean<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;</li><li><span class="sh_symbol">&lt;/</span>beans<span class="sh_symbol">&gt;</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;beans xmlns="http://www.springframework.org/schema/beans" 
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xmlns:context="http://www.springframework.org/schema/context" 
	xmlns:jdbc="http://www.springframework.org/schema/jdbc"  
	xmlns:jee="http://www.springframework.org/schema/jee" 
	xmlns:tx="http://www.springframework.org/schema/tx"
	xmlns:aop="http://www.springframework.org/schema/aop" 
	xmlns:mvc="http://www.springframework.org/schema/mvc"
	xmlns:util="http://www.springframework.org/schema/util"
	xmlns:jpa="http://www.springframework.org/schema/data/jpa"
	xsi:schemaLocation="
		http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.2.xsd
		http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.2.xsd
		http://www.springframework.org/schema/jdbc http://www.springframework.org/schema/jdbc/spring-jdbc-3.2.xsd
		http://www.springframework.org/schema/jee http://www.springframework.org/schema/jee/spring-jee-3.2.xsd
		http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.2.xsd
		http://www.springframework.org/schema/data/jpa http://www.springframework.org/schema/data/jpa/spring-jpa-1.3.xsd
		http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-3.2.xsd
		http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.2.xsd
		http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-3.2.xsd"&gt;
	
	&lt;!-- 开启注解扫描 --&gt;
	&lt;context:component-scan base-package="com.tarena"/&gt;
	
	&lt;!-- 开启MVC注解扫描 --&gt;
	&lt;mvc:annotation-driven/&gt;
	
	&lt;!-- 定义视图解析器ViewResolver --&gt;
	&lt;bean id="viewResolver"
		class="org.springframework.web.servlet.view.InternalResourceViewResolver"&gt;
		&lt;property name="prefix" value="/WEB-INF/"/&gt;
		&lt;property name="suffix" value=".jsp"/&gt;
	&lt;/bean&gt;
	
	&lt;!-- 处理系统异常 --&gt;
	&lt;bean class="org.springframework.web.servlet.handler.SimpleMappingExceptionResolver"&gt;
		&lt;property name="exceptionMappings"&gt;
	&lt;props&gt;		
	&lt;prop key="java.lang.Exception"&gt;jsp/error&lt;/prop&gt;
	&lt;/props&gt;
	&lt;/property&gt;
	&lt;/bean&gt;
	
&lt;/beans&gt;
</pre><div class="sh_sourceCode snippet-hide"><pre><a href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#" class="snippet-revealed snippet-toggle sh_url">隐藏</a></pre></div></div><div class="snippet-reveal sh_acid snippet-wrap"><pre class="sh_sourceCode"><a href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#" class="snippet-toggle sh_url">代码</a></pre></div></div>
      <p>HelloController完整代码如下：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap" style="display: none;"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#">pop-up</a></pre></div><pre class="hide sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li>package com<span class="sh_symbol">.</span>tarena<span class="sh_symbol">.</span>web<span class="sh_symbol">;</span></li><li><span style="display:none;">&nbsp;</span></li><li>import java<span class="sh_symbol">.</span>io<span class="sh_symbol">.</span>Serializable<span class="sh_symbol">;</span></li><li>import javax<span class="sh_symbol">.</span>servlet<span class="sh_symbol">.</span>http<span class="sh_symbol">.</span>HttpServletRequest<span class="sh_symbol">;</span></li><li>import javax<span class="sh_symbol">.</span>servlet<span class="sh_symbol">.</span>http<span class="sh_symbol">.</span>HttpServletResponse<span class="sh_symbol">;</span></li><li>import org<span class="sh_symbol">.</span>springframework<span class="sh_symbol">.</span>stereotype<span class="sh_symbol">.</span>Controller<span class="sh_symbol">;</span></li><li>import org<span class="sh_symbol">.</span>springframework<span class="sh_symbol">.</span>web<span class="sh_symbol">.</span>bind<span class="sh_symbol">.</span>annotation<span class="sh_symbol">.</span>ExceptionHandler<span class="sh_symbol">;</span></li><li>import org<span class="sh_symbol">.</span>springframework<span class="sh_symbol">.</span>web<span class="sh_symbol">.</span>bind<span class="sh_symbol">.</span>annotation<span class="sh_symbol">.</span>RequestMapping<span class="sh_symbol">;</span></li><li><span style="display:none;">&nbsp;</span></li><li>@Controller</li><li>@<span class="sh_function">RequestMapping</span><span class="sh_symbol">(</span><span class="sh_string">"/demo"</span><span class="sh_symbol">)</span></li><li><span class="sh_keyword">public</span> <span class="sh_keyword">class</span> HelloController <span class="sh_keyword">implements</span> Serializable <span class="sh_cbracket">{</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;@ExceptionHandler</li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">public</span> <span class="sh_predef_func">String</span> <span class="sh_function">handleException</span><span class="sh_symbol">(</span>Exception e<span class="sh_symbol">,</span> </li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;HttpServletRequest request<span class="sh_symbol">,</span> HttpServletResponse response<span class="sh_symbol">)</span> </li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">throws</span> Exception <span class="sh_cbracket">{</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">if</span><span class="sh_symbol">(</span>e <span class="sh_keyword">instanceof</span> NumberFormatException<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;request<span class="sh_symbol">.</span><span class="sh_function">setAttribute</span><span class="sh_symbol">(</span><span class="sh_string">"message"</span><span class="sh_symbol">,</span> <span class="sh_string">"亲,请输入数字哦."</span><span class="sh_symbol">);</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">return</span> <span class="sh_string">"jsp/message"</span><span class="sh_symbol">;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_cbracket">}</span> <span class="sh_keyword">else</span> <span class="sh_cbracket">{</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">throw</span> e<span class="sh_symbol">;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_cbracket">}</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_cbracket">}</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;@<span class="sh_function">RequestMapping</span><span class="sh_symbol">(</span><span class="sh_string">"/hello.do"</span><span class="sh_symbol">)</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">public</span> <span class="sh_predef_func">String</span> <span class="sh_function">hello</span><span class="sh_symbol">()</span> <span class="sh_cbracket">{</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System<span class="sh_symbol">.</span>out<span class="sh_symbol">.</span><span class="sh_function">println</span><span class="sh_symbol">(</span><span class="sh_string">"hello"</span><span class="sh_symbol">);</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Integer<span class="sh_symbol">.</span><span class="sh_function">valueOf</span><span class="sh_symbol">(</span><span class="sh_string">"abc"</span><span class="sh_symbol">);</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">return</span> <span class="sh_string">"jsp/hello"</span><span class="sh_symbol">;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_cbracket">}</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;@<span class="sh_function">RequestMapping</span><span class="sh_symbol">(</span><span class="sh_string">"/hi.do"</span><span class="sh_symbol">)</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">public</span> <span class="sh_predef_func">String</span> <span class="sh_function">hi</span><span class="sh_symbol">()</span> <span class="sh_cbracket">{</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System<span class="sh_symbol">.</span>out<span class="sh_symbol">.</span><span class="sh_function">println</span><span class="sh_symbol">(</span><span class="sh_string">"hi"</span><span class="sh_symbol">);</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_predef_func">String</span> name <span class="sh_symbol">=</span> <span class="sh_string">"abc"</span><span class="sh_symbol">;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;name<span class="sh_symbol">.</span><span class="sh_function">charAt</span><span class="sh_symbol">(</span><span class="sh_number">9</span><span class="sh_symbol">);</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">return</span> <span class="sh_string">"jsp/hello"</span><span class="sh_symbol">;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_cbracket">}</span></li><li><span style="display:none;">&nbsp;</span></li><li><span class="sh_cbracket">}</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">package com.tarena.web;

import java.io.Serializable;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.ExceptionHandler;
import org.springframework.web.bind.annotation.RequestMapping;

@Controller
@RequestMapping("/demo")
public class HelloController implements Serializable {
	
	@ExceptionHandler
	public String handleException(Exception e, 
		HttpServletRequest request, HttpServletResponse response) 
		throws Exception {
		if(e instanceof NumberFormatException) {
			request.setAttribute("message", "亲,请输入数字哦.");
			return "jsp/message";
		} else {
			throw e;
		}
	}
	
	@RequestMapping("/hello.do")
	public String hello() {
		System.out.println("hello");
		Integer.valueOf("abc");
		return "jsp/hello";
	}
	
	@RequestMapping("/hi.do")
	public String hi() {
		System.out.println("hi");
		String name = "abc";
		name.charAt(9);
		return "jsp/hello";
	}

}
</pre><div class="sh_sourceCode snippet-hide"><pre><a href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#" class="snippet-revealed snippet-toggle sh_url">隐藏</a></pre></div></div><div class="snippet-reveal sh_acid snippet-wrap"><pre class="sh_sourceCode"><a href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#" class="snippet-toggle sh_url">代码</a></pre></div></div>
      <p>hello.jsp完整代码如下：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap" style="display: none;"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#">pop-up</a></pre></div><pre class="hide sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">&lt;%</span>@page pageEncoding<span class="sh_symbol">=</span><span class="sh_string">"utf-8"</span><span class="sh_symbol">%&gt;</span></li><li><span class="sh_symbol">&lt;</span>html<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;</span>head<span class="sh_symbol">&gt;&lt;/</span>head<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;</span>body<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>h1<span class="sh_symbol">&gt;</span>Hello<span class="sh_symbol">,</span> SpringMVC<span class="sh_symbol">.&lt;/</span>h1<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;/</span>body<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;/</span>html<span class="sh_symbol">&gt;</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">&lt;%@page pageEncoding="utf-8"%&gt;
&lt;html&gt;
&lt;head&gt;&lt;/head&gt;
&lt;body&gt;
	&lt;h1&gt;Hello, SpringMVC.&lt;/h1&gt;
&lt;/body&gt;
&lt;/html&gt;
</pre><div class="sh_sourceCode snippet-hide"><pre><a href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#" class="snippet-revealed snippet-toggle sh_url">隐藏</a></pre></div></div><div class="snippet-reveal sh_acid snippet-wrap"><pre class="sh_sourceCode"><a href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#" class="snippet-toggle sh_url">代码</a></pre></div></div>
      <p>error.jsp完整代码如下：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap" style="display: none;"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#">pop-up</a></pre></div><pre class="hide sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">&lt;%</span>@page pageEncoding<span class="sh_symbol">=</span><span class="sh_string">"utf-8"</span><span class="sh_symbol">%&gt;</span></li><li><span class="sh_symbol">&lt;</span>html<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;</span>head<span class="sh_symbol">&gt;&lt;/</span>head<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;</span>body<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>h1 style<span class="sh_symbol">=</span><span class="sh_string">"color:red;"</span><span class="sh_symbol">&gt;</span>系统报错<span class="sh_symbol">,</span>请联系管理员<span class="sh_symbol">.&lt;/</span>h1<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;/</span>body<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;/</span>html<span class="sh_symbol">&gt;</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">&lt;%@page pageEncoding="utf-8"%&gt;
&lt;html&gt;
&lt;head&gt;&lt;/head&gt;
&lt;body&gt;
	&lt;h1 style="color:red;"&gt;系统报错,请联系管理员.&lt;/h1&gt;
&lt;/body&gt;
&lt;/html&gt;
</pre><div class="sh_sourceCode snippet-hide"><pre><a href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#" class="snippet-revealed snippet-toggle sh_url">隐藏</a></pre></div></div><div class="snippet-reveal sh_acid snippet-wrap"><pre class="sh_sourceCode"><a href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#" class="snippet-toggle sh_url">代码</a></pre></div></div>
      <p>message.jsp完整代码如下：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap" style="display: none;"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#">pop-up</a></pre></div><pre class="hide sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">&lt;%</span>@page pageEncoding<span class="sh_symbol">=</span><span class="sh_string">"utf-8"</span><span class="sh_symbol">%&gt;</span></li><li><span class="sh_symbol">&lt;</span>html<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;</span>head<span class="sh_symbol">&gt;&lt;/</span>head<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;</span>body<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>h1<span class="sh_symbol">&gt;</span>$<span class="sh_cbracket">{</span>message <span class="sh_cbracket">}</span><span class="sh_symbol">&lt;/</span>h1<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;/</span>body<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;/</span>html<span class="sh_symbol">&gt;</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">&lt;%@page pageEncoding="utf-8"%&gt;
&lt;html&gt;
&lt;head&gt;&lt;/head&gt;
&lt;body&gt;
	&lt;h1&gt;${message }&lt;/h1&gt;
&lt;/body&gt;
&lt;/html&gt;
</pre><div class="sh_sourceCode snippet-hide"><pre><a href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#" class="snippet-revealed snippet-toggle sh_url">隐藏</a></pre></div></div><div class="snippet-reveal sh_acid snippet-wrap"><pre class="sh_sourceCode"><a href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#" class="snippet-toggle sh_url">代码</a></pre></div></div>
      <a name="case3">
      </a>
      <h2>3 处理NETCTOSS项目中的异常</h2>
      <h3>3.1 问题</h3>
      <p>处理NETCTOSS项目中出现的异常。</p>
      <h3>3.2 方案</h3>
      <ol class="list">
        <li>采用@ExceptionHandler统一处理业务异常
</li>
        <li>采用SimpleMappingExceptionResolver统一处理系统异常
</li>
      </ol>
      <h3>3.3 步骤</h3>
      <p class="number">步骤一：使用@ExceptionHandler处理LoginController中的业务异常</p>
      <p>修改LoginController，增加异常处理方法，并使用@ExceptionHandler处理业务异常，代码如下：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li>package com<span class="sh_symbol">.</span>tarena<span class="sh_symbol">.</span>web<span class="sh_symbol">;</span></li><li><span style="display:none;">&nbsp;</span></li><li>import java<span class="sh_symbol">.</span>io<span class="sh_symbol">.</span>Serializable<span class="sh_symbol">;</span></li><li>import javax<span class="sh_symbol">.</span>annotation<span class="sh_symbol">.</span>Resource<span class="sh_symbol">;</span></li><li>import javax<span class="sh_symbol">.</span>servlet<span class="sh_symbol">.</span>http<span class="sh_symbol">.</span>HttpServletRequest<span class="sh_symbol">;</span></li><li>import javax<span class="sh_symbol">.</span>servlet<span class="sh_symbol">.</span>http<span class="sh_symbol">.</span>HttpServletResponse<span class="sh_symbol">;</span></li><li>import javax<span class="sh_symbol">.</span>servlet<span class="sh_symbol">.</span>http<span class="sh_symbol">.</span>HttpSession<span class="sh_symbol">;</span></li><li>import org<span class="sh_symbol">.</span>springframework<span class="sh_symbol">.</span>stereotype<span class="sh_symbol">.</span>Controller<span class="sh_symbol">;</span></li><li>import org<span class="sh_symbol">.</span>springframework<span class="sh_symbol">.</span>ui<span class="sh_symbol">.</span>ModelMap<span class="sh_symbol">;</span></li><li>import org<span class="sh_symbol">.</span>springframework<span class="sh_symbol">.</span>web<span class="sh_symbol">.</span>bind<span class="sh_symbol">.</span>annotation<span class="sh_symbol">.</span>ExceptionHandler<span class="sh_symbol">;</span></li><li>import org<span class="sh_symbol">.</span>springframework<span class="sh_symbol">.</span>web<span class="sh_symbol">.</span>bind<span class="sh_symbol">.</span>annotation<span class="sh_symbol">.</span>RequestMapping<span class="sh_symbol">;</span></li><li>import com<span class="sh_symbol">.</span>tarena<span class="sh_symbol">.</span>entity<span class="sh_symbol">.</span>Admin<span class="sh_symbol">;</span></li><li>import com<span class="sh_symbol">.</span>tarena<span class="sh_symbol">.</span>exception<span class="sh_symbol">.</span>AdminCodeException<span class="sh_symbol">;</span></li><li>import com<span class="sh_symbol">.</span>tarena<span class="sh_symbol">.</span>exception<span class="sh_symbol">.</span>PasswordException<span class="sh_symbol">;</span></li><li>import com<span class="sh_symbol">.</span>tarena<span class="sh_symbol">.</span>service<span class="sh_symbol">.</span>LoginService<span class="sh_symbol">;</span></li><li><span style="display:none;">&nbsp;</span></li><li>@Controller</li><li>@<span class="sh_function">RequestMapping</span><span class="sh_symbol">(</span><span class="sh_string">"/login"</span><span class="sh_symbol">)</span></li><li><span class="sh_keyword">public</span> <span class="sh_keyword">class</span> LoginController <span class="sh_keyword">implements</span> Serializable <span class="sh_cbracket">{</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;@Resource</li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">private</span> LoginService loginService<span class="sh_symbol">;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;@ExceptionHandler</li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">public</span> <span class="sh_predef_func">String</span> <span class="sh_function">execute</span><span class="sh_symbol">(</span>HttpServletRequest request<span class="sh_symbol">,</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;HttpServletResponse response<span class="sh_symbol">,</span> Exception e<span class="sh_symbol">)</span> <span class="sh_keyword">throws</span> Exception <span class="sh_cbracket">{</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">if</span><span class="sh_symbol">(</span>e <span class="sh_keyword">instanceof</span> AdminCodeException</li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">||</span> e <span class="sh_keyword">instanceof</span> PasswordException<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_comment">//业务异常自己处理</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;request<span class="sh_symbol">.</span><span class="sh_function">setAttribute</span><span class="sh_symbol">(</span><span class="sh_string">"message"</span><span class="sh_symbol">,</span> e<span class="sh_symbol">.</span><span class="sh_function">getMessage</span><span class="sh_symbol">());</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;request<span class="sh_symbol">.</span><span class="sh_function">setAttribute</span><span class="sh_symbol">(</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_string">"adminCode"</span><span class="sh_symbol">,</span> request<span class="sh_symbol">.</span><span class="sh_function">getParameter</span><span class="sh_symbol">(</span><span class="sh_string">"adminCode"</span><span class="sh_symbol">));</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;request<span class="sh_symbol">.</span><span class="sh_function">setAttribute</span><span class="sh_symbol">(</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_string">"password"</span><span class="sh_symbol">,</span> request<span class="sh_symbol">.</span><span class="sh_function">getParameter</span><span class="sh_symbol">(</span><span class="sh_string">"password"</span><span class="sh_symbol">));</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">return</span> <span class="sh_string">"main/login"</span><span class="sh_symbol">;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_cbracket">}</span> <span class="sh_keyword">else</span> <span class="sh_cbracket">{</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_comment">//系统异常抛出，交给Spring处理</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">throw</span> e<span class="sh_symbol">;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_cbracket">}</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_cbracket">}</span></li><li><span style="display:none;">&nbsp;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;@<span class="sh_function">RequestMapping</span><span class="sh_symbol">(</span><span class="sh_string">"/toLogin.do"</span><span class="sh_symbol">)</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">public</span> <span class="sh_predef_func">String</span> <span class="sh_function">toLogin</span><span class="sh_symbol">()</span> <span class="sh_cbracket">{</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">return</span> <span class="sh_string">"main/login"</span><span class="sh_symbol">;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_cbracket">}</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;@<span class="sh_function">RequestMapping</span><span class="sh_symbol">(</span><span class="sh_string">"/toIndex.do"</span><span class="sh_symbol">)</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">public</span> <span class="sh_predef_func">String</span> <span class="sh_function">toIndex</span><span class="sh_symbol">()</span> <span class="sh_cbracket">{</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">return</span> <span class="sh_string">"main/index"</span><span class="sh_symbol">;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_cbracket">}</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;@<span class="sh_function">RequestMapping</span><span class="sh_symbol">(</span><span class="sh_string">"/checkLogin.do"</span><span class="sh_symbol">)</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">public</span> <span class="sh_predef_func">String</span> <span class="sh_function">checkLogin</span><span class="sh_symbol">(</span><span class="sh_predef_func">String</span> adminCode<span class="sh_symbol">,</span> <span class="sh_predef_func">String</span> password<span class="sh_symbol">,</span> </li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ModelMap model<span class="sh_symbol">,</span> HttpSession session<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span></li><li class="bold_code"><span class="sh_comment">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;try {</span></li><li class="bold_code"><span class="sh_comment">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Admin admin = </span></li><li class="bold_code"><span class="sh_comment">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;loginService.checkAdminCodeAndPwd(adminCode, password);</span></li><li class="bold_code"><span class="sh_comment">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;session.setAttribute("admin", admin);</span></li><li class="bold_code"><span class="sh_comment">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} catch (AdminCodeException e) {</span></li><li class="bold_code"><span class="sh_comment">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;model.addAttribute("message", e.getMessage());</span></li><li class="bold_code"><span class="sh_comment">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;model.addAttribute("adminCode", adminCode);</span></li><li class="bold_code"><span class="sh_comment">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;model.addAttribute("password", password);</span></li><li class="bold_code"><span class="sh_comment">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return "main/login";</span></li><li class="bold_code"><span class="sh_comment">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} catch (PasswordException e) {</span></li><li class="bold_code"><span class="sh_comment">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;model.addAttribute("message", e.getMessage());</span></li><li class="bold_code"><span class="sh_comment">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;model.addAttribute("adminCode", adminCode);</span></li><li class="bold_code"><span class="sh_comment">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;model.addAttribute("password", password);</span></li><li class="bold_code"><span class="sh_comment">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return "main/login";</span></li><li class="bold_code"><span class="sh_comment">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></li><li class="bold_code">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Admin admin <span class="sh_symbol">=</span> </li><li class="bold_code">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;loginService<span class="sh_symbol">.</span><span class="sh_function">checkAdminCodeAndPwd</span><span class="sh_symbol">(</span>adminCode<span class="sh_symbol">,</span> password<span class="sh_symbol">);</span></li><li class="bold_code">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;session<span class="sh_symbol">.</span><span class="sh_function">setAttribute</span><span class="sh_symbol">(</span><span class="sh_string">"admin"</span><span class="sh_symbol">,</span> admin<span class="sh_symbol">);</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</li><li class="bold_code">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">return</span> <span class="sh_string">"redirect:toIndex.do"</span><span class="sh_symbol">;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_cbracket">}</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;</li><li><span class="sh_cbracket">}</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">package com.tarena.web;

import java.io.Serializable;
import javax.annotation.Resource;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import javax.servlet.http.HttpSession;
import org.springframework.stereotype.Controller;
import org.springframework.ui.ModelMap;
import org.springframework.web.bind.annotation.ExceptionHandler;
import org.springframework.web.bind.annotation.RequestMapping;
import com.tarena.entity.Admin;
import com.tarena.exception.AdminCodeException;
import com.tarena.exception.PasswordException;
import com.tarena.service.LoginService;

@Controller
@RequestMapping("/login")
public class LoginController implements Serializable {
	
	@Resource
	private LoginService loginService;
	
	@ExceptionHandler
	public String execute(HttpServletRequest request,
			HttpServletResponse response, Exception e) throws Exception {
		if(e instanceof AdminCodeException
				|| e instanceof PasswordException) {
			//业务异常自己处理
			request.setAttribute("message", e.getMessage());
			request.setAttribute(
				"adminCode", request.getParameter("adminCode"));
			request.setAttribute(
				"password", request.getParameter("password"));
			return "main/login";
		} else {
			//系统异常抛出，交给Spring处理
			throw e;
		}
	}

	@RequestMapping("/toLogin.do")
	public String toLogin() {
		return "main/login";
	}
	
	@RequestMapping("/toIndex.do")
	public String toIndex() {
		return "main/index";
	}
	
	@RequestMapping("/checkLogin.do")
	public String checkLogin(String adminCode, String password, 
			ModelMap model, HttpSession session) {
#cold_bold//		try {
#cold_bold//			Admin admin = 
#cold_bold//				loginService.checkAdminCodeAndPwd(adminCode, password);
#cold_bold//			session.setAttribute("admin", admin);
#cold_bold//		} catch (AdminCodeException e) {
#cold_bold//			model.addAttribute("message", e.getMessage());
#cold_bold//			model.addAttribute("adminCode", adminCode);
#cold_bold//			model.addAttribute("password", password);
#cold_bold//			return "main/login";
#cold_bold//		} catch (PasswordException e) {
#cold_bold//			model.addAttribute("message", e.getMessage());
#cold_bold//			model.addAttribute("adminCode", adminCode);
#cold_bold//			model.addAttribute("password", password);
#cold_bold//			return "main/login";
#cold_bold//		}
#cold_bold		Admin admin = 
#cold_bold			loginService.checkAdminCodeAndPwd(adminCode, password);
#cold_bold		session.setAttribute("admin", admin);		
#cold_bold		return "redirect:toIndex.do";
	}
	
}
</pre></div></div>
      <p class="number">步骤二：使用SimpleMappingExceptionResolver处理系统异常</p>
      <p>配置applicationContext.xml，增加SimpleMappingExceptionResolver，代码如下：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">&lt;?</span>xml version<span class="sh_symbol">=</span><span class="sh_string">"1.0"</span> encoding<span class="sh_symbol">=</span><span class="sh_string">"UTF-8"</span><span class="sh_symbol">?&gt;</span></li><li><span class="sh_symbol">&lt;</span>beans xmlns<span class="sh_symbol">=</span><span class="sh_string">"http://www.springframework.org/schema/beans"</span> </li><li>&nbsp;&nbsp;&nbsp;&nbsp;xmlns<span class="sh_symbol">:</span>xsi<span class="sh_symbol">=</span><span class="sh_string">"http://www.w3.org/2001/XMLSchema-instance"</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;xmlns<span class="sh_symbol">:</span>context<span class="sh_symbol">=</span><span class="sh_string">"http://www.springframework.org/schema/context"</span> </li><li>&nbsp;&nbsp;&nbsp;&nbsp;xmlns<span class="sh_symbol">:</span>jdbc<span class="sh_symbol">=</span><span class="sh_string">"http://www.springframework.org/schema/jdbc"</span>  </li><li>&nbsp;&nbsp;&nbsp;&nbsp;xmlns<span class="sh_symbol">:</span>jee<span class="sh_symbol">=</span><span class="sh_string">"http://www.springframework.org/schema/jee"</span> </li><li>&nbsp;&nbsp;&nbsp;&nbsp;xmlns<span class="sh_symbol">:</span>tx<span class="sh_symbol">=</span><span class="sh_string">"http://www.springframework.org/schema/tx"</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;xmlns<span class="sh_symbol">:</span>aop<span class="sh_symbol">=</span><span class="sh_string">"http://www.springframework.org/schema/aop"</span> </li><li>&nbsp;&nbsp;&nbsp;&nbsp;xmlns<span class="sh_symbol">:</span>mvc<span class="sh_symbol">=</span><span class="sh_string">"http://www.springframework.org/schema/mvc"</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;xmlns<span class="sh_symbol">:</span>util<span class="sh_symbol">=</span><span class="sh_string">"http://www.springframework.org/schema/util"</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;xmlns<span class="sh_symbol">:</span>jpa<span class="sh_symbol">=</span><span class="sh_string">"http://www.springframework.org/schema/data/jpa"</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;xsi<span class="sh_symbol">:</span>schemaLocation<span class="sh_symbol">=</span><span class="sh_string">"</span></li><li><span class="sh_string">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.2.xsd</span></li><li><span class="sh_string">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.2.xsd</span></li><li><span class="sh_string">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http://www.springframework.org/schema/jdbc http://www.springframework.org/schema/jdbc/spring-jdbc-3.2.xsd</span></li><li><span class="sh_string">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http://www.springframework.org/schema/jee http://www.springframework.org/schema/jee/spring-jee-3.2.xsd</span></li><li><span class="sh_string">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.2.xsd</span></li><li><span class="sh_string">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http://www.springframework.org/schema/data/jpa http://www.springframework.org/schema/data/jpa/spring-jpa-1.3.xsd</span></li><li><span class="sh_string">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-3.2.xsd</span></li><li><span class="sh_string">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.2.xsd</span></li><li><span class="sh_string">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-3.2.xsd"</span><span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>util<span class="sh_symbol">:</span>properties id<span class="sh_symbol">=</span><span class="sh_string">"jdbc"</span> location<span class="sh_symbol">=</span><span class="sh_string">"classpath:jdbc.properties"</span><span class="sh_symbol">/&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;!--</span>定义数据源 <span class="sh_symbol">--&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>bean id<span class="sh_symbol">=</span><span class="sh_string">"ds"</span> </li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">class</span><span class="sh_symbol">=</span><span class="sh_string">"org.apache.commons.dbcp.BasicDataSource"</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;destroy<span class="sh_symbol">-</span>method<span class="sh_symbol">=</span><span class="sh_string">"close"</span><span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>property name<span class="sh_symbol">=</span><span class="sh_string">"url"</span> value<span class="sh_symbol">=</span><span class="sh_string">"#{jdbc.url}"</span><span class="sh_symbol">/&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>property name<span class="sh_symbol">=</span><span class="sh_string">"driverClassName"</span> value<span class="sh_symbol">=</span><span class="sh_string">"#{jdbc.driver}"</span><span class="sh_symbol">/&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>property name<span class="sh_symbol">=</span><span class="sh_string">"username"</span> value<span class="sh_symbol">=</span><span class="sh_string">"#{jdbc.user}"</span><span class="sh_symbol">/&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>property name<span class="sh_symbol">=</span><span class="sh_string">"password"</span> value<span class="sh_symbol">=</span><span class="sh_string">"#{jdbc.password}"</span><span class="sh_symbol">/&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>bean<span class="sh_symbol">&gt;</span>&nbsp;&nbsp;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;!--</span>开启注解扫描 <span class="sh_symbol">--&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>context<span class="sh_symbol">:</span>component<span class="sh_symbol">-</span>scan base<span class="sh_symbol">-</span>package<span class="sh_symbol">=</span><span class="sh_string">"com.tarena"</span><span class="sh_symbol">/&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;!--</span>开启MVC注解扫描 <span class="sh_symbol">--&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>mvc<span class="sh_symbol">:</span>annotation<span class="sh_symbol">-</span><span class="sh_normal">driven</span><span class="sh_symbol">/&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;!--</span>定义视图解析器ViewResolver <span class="sh_symbol">--&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>bean id<span class="sh_symbol">=</span><span class="sh_string">"viewResolver"</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">class</span><span class="sh_symbol">=</span><span class="sh_string">"org.springframework.web.servlet.view.InternalResourceViewResolver"</span><span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>property name<span class="sh_symbol">=</span><span class="sh_string">"prefix"</span> value<span class="sh_symbol">=</span><span class="sh_string">"/WEB-INF/"</span><span class="sh_symbol">/&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>property name<span class="sh_symbol">=</span><span class="sh_string">"suffix"</span> value<span class="sh_symbol">=</span><span class="sh_string">".jsp"</span><span class="sh_symbol">/&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>bean<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;</li><li class="bold_code">&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;!--</span>处理系统异常<span class="sh_symbol">--&gt;</span></li><li class="bold_code">&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>bean <span class="sh_keyword">class</span><span class="sh_symbol">=</span><span class="sh_string">"org.springframework.web.servlet.handler.SimpleMappingExceptionResolver"</span><span class="sh_symbol">&gt;</span></li><li class="bold_code">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>property name<span class="sh_symbol">=</span><span class="sh_string">"exceptionMappings"</span><span class="sh_symbol">&gt;</span></li><li class="bold_code">&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>props<span class="sh_symbol">&gt;</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</li><li class="bold_code">&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>prop key<span class="sh_symbol">=</span><span class="sh_string">"java.lang.Exception"</span><span class="sh_symbol">&gt;</span><span class="sh_normal">main</span><span class="sh_symbol">/</span>error<span class="sh_symbol">&lt;/</span>prop<span class="sh_symbol">&gt;</span></li><li class="bold_code">&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>props<span class="sh_symbol">&gt;</span></li><li class="bold_code">&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>property<span class="sh_symbol">&gt;</span></li><li class="bold_code">&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>bean<span class="sh_symbol">&gt;</span>&nbsp;&nbsp;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;</li><li><span class="sh_symbol">&lt;/</span>beans<span class="sh_symbol">&gt;</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;beans xmlns="http://www.springframework.org/schema/beans" 
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xmlns:context="http://www.springframework.org/schema/context" 
	xmlns:jdbc="http://www.springframework.org/schema/jdbc"  
	xmlns:jee="http://www.springframework.org/schema/jee" 
	xmlns:tx="http://www.springframework.org/schema/tx"
	xmlns:aop="http://www.springframework.org/schema/aop" 
	xmlns:mvc="http://www.springframework.org/schema/mvc"
	xmlns:util="http://www.springframework.org/schema/util"
	xmlns:jpa="http://www.springframework.org/schema/data/jpa"
	xsi:schemaLocation="
		http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.2.xsd
		http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.2.xsd
		http://www.springframework.org/schema/jdbc http://www.springframework.org/schema/jdbc/spring-jdbc-3.2.xsd
		http://www.springframework.org/schema/jee http://www.springframework.org/schema/jee/spring-jee-3.2.xsd
		http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.2.xsd
		http://www.springframework.org/schema/data/jpa http://www.springframework.org/schema/data/jpa/spring-jpa-1.3.xsd
		http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-3.2.xsd
		http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.2.xsd
		http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-3.2.xsd"&gt;
	
	&lt;util:properties id="jdbc" location="classpath:jdbc.properties"/&gt;
	
	&lt;!--定义数据源 --&gt;
	&lt;bean id="ds" 
		class="org.apache.commons.dbcp.BasicDataSource"
		destroy-method="close"&gt;
		&lt;property name="url" value="#{jdbc.url}"/&gt;
		&lt;property name="driverClassName" value="#{jdbc.driver}"/&gt;
		&lt;property name="username" value="#{jdbc.user}"/&gt;
		&lt;property name="password" value="#{jdbc.password}"/&gt;
	&lt;/bean&gt;	
	
	&lt;!--开启注解扫描 --&gt;
	&lt;context:component-scan base-package="com.tarena"/&gt;
	
	&lt;!--开启MVC注解扫描 --&gt;
	&lt;mvc:annotation-driven/&gt;
	
	&lt;!--定义视图解析器ViewResolver --&gt;
	&lt;bean id="viewResolver"
		class="org.springframework.web.servlet.view.InternalResourceViewResolver"&gt;
		&lt;property name="prefix" value="/WEB-INF/"/&gt;
		&lt;property name="suffix" value=".jsp"/&gt;
	&lt;/bean&gt;
	
#cold_bold	&lt;!--处理系统异常--&gt;
#cold_bold	&lt;bean class="org.springframework.web.servlet.handler.SimpleMappingExceptionResolver"&gt;
#cold_bold		&lt;property name="exceptionMappings"&gt;
#cold_bold	&lt;props&gt;		
#cold_bold	&lt;prop key="java.lang.Exception"&gt;main/error&lt;/prop&gt;
#cold_bold	&lt;/props&gt;
#cold_bold	&lt;/property&gt;
#cold_bold	&lt;/bean&gt;	
	
&lt;/beans&gt;
</pre></div></div>
      <p>在WEB-INF/main下，创建系统错误页面error.jsp，代码如下：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">&lt;%</span>@page pageEncoding<span class="sh_symbol">=</span><span class="sh_string">"utf-8"</span><span class="sh_symbol">%&gt;</span></li><li><span class="sh_symbol">&lt;!</span>DOCTYPE html PUBLIC <span class="sh_string">"-//W3C//DTD XHTML 1.0 Transitional//EN"</span> <span class="sh_string">"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"</span><span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;</span>html xmlns<span class="sh_symbol">=</span><span class="sh_string">"http://www.w3.org/1999/xhtml"</span><span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;</span>head<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;</span>meta http<span class="sh_symbol">-</span>equiv<span class="sh_symbol">=</span><span class="sh_string">"Content-Type"</span> content<span class="sh_symbol">=</span><span class="sh_string">"text/html; charset=utf-8"</span> <span class="sh_symbol">/&gt;</span></li><li><span class="sh_symbol">&lt;</span>title<span class="sh_symbol">&gt;</span>达内－NetCTOSS<span class="sh_symbol">&lt;/</span>title<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;</span>link type<span class="sh_symbol">=</span><span class="sh_string">"text/css"</span> rel<span class="sh_symbol">=</span><span class="sh_string">"stylesheet"</span> media<span class="sh_symbol">=</span><span class="sh_string">"all"</span> href<span class="sh_symbol">=</span><span class="sh_string">"../styles/global.css"</span> <span class="sh_symbol">/&gt;</span></li><li><span class="sh_symbol">&lt;</span>link type<span class="sh_symbol">=</span><span class="sh_string">"text/css"</span> rel<span class="sh_symbol">=</span><span class="sh_string">"stylesheet"</span> media<span class="sh_symbol">=</span><span class="sh_string">"all"</span> href<span class="sh_symbol">=</span><span class="sh_string">"../styles/global_color.css"</span> <span class="sh_symbol">/&gt;</span></li><li><span class="sh_symbol">&lt;</span>script language<span class="sh_symbol">=</span><span class="sh_string">"javascript"</span> type<span class="sh_symbol">=</span><span class="sh_string">"text/javascript"</span><span class="sh_symbol">&gt;</span></li><li><span class="sh_keyword">var</span> timer<span class="sh_symbol">;</span></li><li>            <span class="sh_comment">//启动跳转的定时器</span></li><li><span class="sh_keyword">function</span> <span class="sh_function">startTimes</span><span class="sh_symbol">()</span> <span class="sh_cbracket">{</span></li><li>timer <span class="sh_symbol">=</span> window<span class="sh_symbol">.</span><span class="sh_function">setInterval</span><span class="sh_symbol">(</span>showSecondes<span class="sh_symbol">,</span><span class="sh_number">1000</span><span class="sh_symbol">);</span></li><li>            <span class="sh_cbracket">}</span></li><li><span style="display:none;">&nbsp;</span></li><li><span class="sh_keyword">var</span> i <span class="sh_symbol">=</span> <span class="sh_number">5</span><span class="sh_symbol">;</span></li><li><span class="sh_keyword">function</span> <span class="sh_function">showSecondes</span><span class="sh_symbol">()</span> <span class="sh_cbracket">{</span></li><li><span class="sh_keyword">if</span> <span class="sh_symbol">(</span>i <span class="sh_symbol">&gt;</span> <span class="sh_number">0</span><span class="sh_symbol">)</span> <span class="sh_cbracket">{</span></li><li>i<span class="sh_symbol">--;</span></li><li>document<span class="sh_symbol">.</span><span class="sh_function">getElementById</span><span class="sh_symbol">(</span><span class="sh_string">"secondes"</span><span class="sh_symbol">).</span>innerHTML <span class="sh_symbol">=</span> i<span class="sh_symbol">;</span></li><li>                <span class="sh_cbracket">}</span></li><li><span class="sh_keyword">else</span> <span class="sh_cbracket">{</span></li><li>window<span class="sh_symbol">.</span><span class="sh_function">clearInterval</span><span class="sh_symbol">(</span>timer<span class="sh_symbol">);</span></li><li>                    <span class="sh_comment">//location.href = "login.html";</span></li><li>history<span class="sh_symbol">.</span><span class="sh_function">back</span><span class="sh_symbol">();</span></li><li>                <span class="sh_cbracket">}</span></li><li>            <span class="sh_cbracket">}</span></li><li><span style="display:none;">&nbsp;</span></li><li>            <span class="sh_comment">//取消跳转</span></li><li><span class="sh_keyword">function</span> <span class="sh_function">resetTimer</span><span class="sh_symbol">()</span> <span class="sh_cbracket">{</span></li><li><span class="sh_keyword">if</span> <span class="sh_symbol">(</span>timer <span class="sh_symbol">!=</span> <span class="sh_keyword">null</span> <span class="sh_symbol">&amp;&amp;</span> timer <span class="sh_symbol">!=</span> <span class="sh_predef_var">undefined</span><span class="sh_symbol">)</span> <span class="sh_cbracket">{</span></li><li>window<span class="sh_symbol">.</span><span class="sh_function">clearInterval</span><span class="sh_symbol">(</span>timer<span class="sh_symbol">);</span></li><li>                    <span class="sh_comment">//location.href = "login.html";</span></li><li>history<span class="sh_symbol">.</span><span class="sh_function">back</span><span class="sh_symbol">();</span></li><li>                <span class="sh_cbracket">}</span></li><li>            <span class="sh_cbracket">}</span></li><li><span class="sh_symbol">&lt;/</span>script<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;/</span>head<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;</span>body <span class="sh_keyword">class</span><span class="sh_symbol">=</span><span class="sh_string">"error_page"</span> onload<span class="sh_symbol">=</span><span class="sh_string">"startTimes();"</span><span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;</span>h1 id<span class="sh_symbol">=</span><span class="sh_string">"error"</span><span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;遇到错误，<span class="sh_symbol">&amp;</span>nbsp<span class="sh_symbol">;&lt;</span>span id<span class="sh_symbol">=</span><span class="sh_string">"secondes"</span><span class="sh_symbol">&gt;</span><span class="sh_number">5</span><span class="sh_symbol">&lt;/</span>span<span class="sh_symbol">&gt;&amp;</span>nbsp<span class="sh_symbol">;</span>秒后将自动跳转，立即跳转请点击<span class="sh_symbol">&amp;</span>nbsp<span class="sh_symbol">;</span></li><li><span class="sh_symbol">&lt;</span>a  href<span class="sh_symbol">=</span><span class="sh_string">"javascript:resetTimer();"</span><span class="sh_symbol">&gt;</span>返回<span class="sh_symbol">&lt;/</span>a<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;/</span>h1<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;/</span>body<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;/</span>html<span class="sh_symbol">&gt;</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">&lt;%@page pageEncoding="utf-8"%&gt;
&lt;!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"&gt;
&lt;html xmlns="http://www.w3.org/1999/xhtml"&gt;
&lt;head&gt;
&lt;meta http-equiv="Content-Type" content="text/html; charset=utf-8" /&gt;
&lt;title&gt;达内－NetCTOSS&lt;/title&gt;
&lt;link type="text/css" rel="stylesheet" media="all" href="../styles/global.css" /&gt;
&lt;link type="text/css" rel="stylesheet" media="all" href="../styles/global_color.css" /&gt;
&lt;script language="javascript" type="text/javascript"&gt;
var timer;
            //启动跳转的定时器
function startTimes() {
timer = window.setInterval(showSecondes,1000);
            }

var i = 5;
function showSecondes() {
if (i &gt; 0) {
i--;
document.getElementById("secondes").innerHTML = i;
                }
else {
window.clearInterval(timer);
                    //location.href = "login.html";
history.back();
                }
            }

            //取消跳转
function resetTimer() {
if (timer != null &amp;&amp; timer != undefined) {
window.clearInterval(timer);
                    //location.href = "login.html";
history.back();
                }
            }
&lt;/script&gt;
&lt;/head&gt;
&lt;body class="error_page" onload="startTimes();"&gt;
&lt;h1 id="error"&gt;
	遇到错误，&amp;nbsp;&lt;span id="secondes"&gt;5&lt;/span&gt;&amp;nbsp;秒后将自动跳转，立即跳转请点击&amp;nbsp;
&lt;a  href="javascript:resetTimer();"&gt;返回&lt;/a&gt;
&lt;/h1&gt;
&lt;/body&gt;
&lt;/html&gt;
</pre></div></div>
      <p class="number">步骤三：测试</p>
      <p>打开登录页面，输入错误的账号或密码，点击登录，效果如下图：</p>
      <div class="image">
        <img src="./CASE_files/image007.png">
        <p>图-7</p>
      </div>
      <p>在LoginController中的checkLogin方法中模拟一个系统级错误，比如：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li>&nbsp;&nbsp;&nbsp;&nbsp;@<span class="sh_function">RequestMapping</span><span class="sh_symbol">(</span><span class="sh_string">"/checkLogin.do"</span><span class="sh_symbol">)</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">public</span> <span class="sh_predef_func">String</span> <span class="sh_function">checkLogin</span><span class="sh_symbol">(</span><span class="sh_predef_func">String</span> adminCode<span class="sh_symbol">,</span> <span class="sh_predef_func">String</span> password<span class="sh_symbol">,</span> </li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ModelMap model<span class="sh_symbol">,</span> HttpSession session<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span></li><li><span class="sh_comment">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;try {</span></li><li><span class="sh_comment">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Admin admin = </span></li><li><span class="sh_comment">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;loginService.checkAdminCodeAndPwd(adminCode, password);</span></li><li><span class="sh_comment">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;session.setAttribute("admin", admin);</span></li><li><span class="sh_comment">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} catch (AdminCodeException e) {</span></li><li><span class="sh_comment">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;model.addAttribute("message", e.getMessage());</span></li><li><span class="sh_comment">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;model.addAttribute("adminCode", adminCode);</span></li><li><span class="sh_comment">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;model.addAttribute("password", password);</span></li><li><span class="sh_comment">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return "main/login";</span></li><li><span class="sh_comment">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} catch (PasswordException e) {</span></li><li><span class="sh_comment">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;model.addAttribute("message", e.getMessage());</span></li><li><span class="sh_comment">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;model.addAttribute("adminCode", adminCode);</span></li><li><span class="sh_comment">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;model.addAttribute("password", password);</span></li><li><span class="sh_comment">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return "main/login";</span></li><li><span class="sh_comment">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></li><li class="bold_code">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Integer<span class="sh_symbol">.</span><span class="sh_function">valueOf</span><span class="sh_symbol">(</span><span class="sh_string">"abc"</span><span class="sh_symbol">);</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Admin admin <span class="sh_symbol">=</span> </li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;loginService<span class="sh_symbol">.</span><span class="sh_function">checkAdminCodeAndPwd</span><span class="sh_symbol">(</span>adminCode<span class="sh_symbol">,</span> password<span class="sh_symbol">);</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;session<span class="sh_symbol">.</span><span class="sh_function">setAttribute</span><span class="sh_symbol">(</span><span class="sh_string">"admin"</span><span class="sh_symbol">,</span> admin<span class="sh_symbol">);</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">return</span> <span class="sh_string">"redirect:toIndex.do"</span><span class="sh_symbol">;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_cbracket">}</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">	@RequestMapping("/checkLogin.do")
	public String checkLogin(String adminCode, String password, 
			ModelMap model, HttpSession session) {
//		try {
//			Admin admin = 
//				loginService.checkAdminCodeAndPwd(adminCode, password);
//			session.setAttribute("admin", admin);
//		} catch (AdminCodeException e) {
//			model.addAttribute("message", e.getMessage());
//			model.addAttribute("adminCode", adminCode);
//			model.addAttribute("password", password);
//			return "main/login";
//		} catch (PasswordException e) {
//			model.addAttribute("message", e.getMessage());
//			model.addAttribute("adminCode", adminCode);
//			model.addAttribute("password", password);
//			return "main/login";
//		}
#cold_bold		Integer.valueOf("abc");
		Admin admin = 
			loginService.checkAdminCodeAndPwd(adminCode, password);
		session.setAttribute("admin", admin);		
		return "redirect:toIndex.do";
	}
</pre></div></div>
      <p>重新部署项目并启动Tomcat，再次登录，浏览器显示效果如下图：</p>
      <div class="image">
        <img src="./CASE_files/image008.png">
        <p>图-8</p>
      </div>
      <h3>3.4 完整代码</h3>
      <p>LoginController完整代码如下：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap" style="display: none;"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#">pop-up</a></pre></div><pre class="hide sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li>package com<span class="sh_symbol">.</span>tarena<span class="sh_symbol">.</span>web<span class="sh_symbol">;</span></li><li><span style="display:none;">&nbsp;</span></li><li>import java<span class="sh_symbol">.</span>io<span class="sh_symbol">.</span>Serializable<span class="sh_symbol">;</span></li><li>import javax<span class="sh_symbol">.</span>annotation<span class="sh_symbol">.</span>Resource<span class="sh_symbol">;</span></li><li>import javax<span class="sh_symbol">.</span>servlet<span class="sh_symbol">.</span>http<span class="sh_symbol">.</span>HttpServletRequest<span class="sh_symbol">;</span></li><li>import javax<span class="sh_symbol">.</span>servlet<span class="sh_symbol">.</span>http<span class="sh_symbol">.</span>HttpServletResponse<span class="sh_symbol">;</span></li><li>import javax<span class="sh_symbol">.</span>servlet<span class="sh_symbol">.</span>http<span class="sh_symbol">.</span>HttpSession<span class="sh_symbol">;</span></li><li>import org<span class="sh_symbol">.</span>springframework<span class="sh_symbol">.</span>stereotype<span class="sh_symbol">.</span>Controller<span class="sh_symbol">;</span></li><li>import org<span class="sh_symbol">.</span>springframework<span class="sh_symbol">.</span>ui<span class="sh_symbol">.</span>ModelMap<span class="sh_symbol">;</span></li><li>import org<span class="sh_symbol">.</span>springframework<span class="sh_symbol">.</span>web<span class="sh_symbol">.</span>bind<span class="sh_symbol">.</span>annotation<span class="sh_symbol">.</span>ExceptionHandler<span class="sh_symbol">;</span></li><li>import org<span class="sh_symbol">.</span>springframework<span class="sh_symbol">.</span>web<span class="sh_symbol">.</span>bind<span class="sh_symbol">.</span>annotation<span class="sh_symbol">.</span>RequestMapping<span class="sh_symbol">;</span></li><li>import com<span class="sh_symbol">.</span>tarena<span class="sh_symbol">.</span>entity<span class="sh_symbol">.</span>Admin<span class="sh_symbol">;</span></li><li>import com<span class="sh_symbol">.</span>tarena<span class="sh_symbol">.</span>exception<span class="sh_symbol">.</span>AdminCodeException<span class="sh_symbol">;</span></li><li>import com<span class="sh_symbol">.</span>tarena<span class="sh_symbol">.</span>exception<span class="sh_symbol">.</span>PasswordException<span class="sh_symbol">;</span></li><li>import com<span class="sh_symbol">.</span>tarena<span class="sh_symbol">.</span>service<span class="sh_symbol">.</span>LoginService<span class="sh_symbol">;</span></li><li><span style="display:none;">&nbsp;</span></li><li>@Controller</li><li>@<span class="sh_function">RequestMapping</span><span class="sh_symbol">(</span><span class="sh_string">"/login"</span><span class="sh_symbol">)</span></li><li><span class="sh_keyword">public</span> <span class="sh_keyword">class</span> LoginController <span class="sh_keyword">implements</span> Serializable <span class="sh_cbracket">{</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;@Resource</li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">private</span> LoginService loginService<span class="sh_symbol">;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;@ExceptionHandler</li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">public</span> <span class="sh_predef_func">String</span> <span class="sh_function">execute</span><span class="sh_symbol">(</span>HttpServletRequest request<span class="sh_symbol">,</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;HttpServletResponse response<span class="sh_symbol">,</span> Exception e<span class="sh_symbol">)</span> <span class="sh_keyword">throws</span> Exception <span class="sh_cbracket">{</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">if</span><span class="sh_symbol">(</span>e <span class="sh_keyword">instanceof</span> AdminCodeException</li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">||</span> e <span class="sh_keyword">instanceof</span> PasswordException<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_comment">//业务异常自己处理</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;request<span class="sh_symbol">.</span><span class="sh_function">setAttribute</span><span class="sh_symbol">(</span><span class="sh_string">"message"</span><span class="sh_symbol">,</span> e<span class="sh_symbol">.</span><span class="sh_function">getMessage</span><span class="sh_symbol">());</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;request<span class="sh_symbol">.</span><span class="sh_function">setAttribute</span><span class="sh_symbol">(</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_string">"adminCode"</span><span class="sh_symbol">,</span> request<span class="sh_symbol">.</span><span class="sh_function">getParameter</span><span class="sh_symbol">(</span><span class="sh_string">"adminCode"</span><span class="sh_symbol">));</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;request<span class="sh_symbol">.</span><span class="sh_function">setAttribute</span><span class="sh_symbol">(</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_string">"password"</span><span class="sh_symbol">,</span> request<span class="sh_symbol">.</span><span class="sh_function">getParameter</span><span class="sh_symbol">(</span><span class="sh_string">"password"</span><span class="sh_symbol">));</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">return</span> <span class="sh_string">"main/login"</span><span class="sh_symbol">;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_cbracket">}</span> <span class="sh_keyword">else</span> <span class="sh_cbracket">{</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_comment">//系统异常抛出，交给Spring处理</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">throw</span> e<span class="sh_symbol">;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_cbracket">}</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_cbracket">}</span></li><li><span style="display:none;">&nbsp;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;@<span class="sh_function">RequestMapping</span><span class="sh_symbol">(</span><span class="sh_string">"/toLogin.do"</span><span class="sh_symbol">)</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">public</span> <span class="sh_predef_func">String</span> <span class="sh_function">toLogin</span><span class="sh_symbol">()</span> <span class="sh_cbracket">{</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">return</span> <span class="sh_string">"main/login"</span><span class="sh_symbol">;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_cbracket">}</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;@<span class="sh_function">RequestMapping</span><span class="sh_symbol">(</span><span class="sh_string">"/toIndex.do"</span><span class="sh_symbol">)</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">public</span> <span class="sh_predef_func">String</span> <span class="sh_function">toIndex</span><span class="sh_symbol">()</span> <span class="sh_cbracket">{</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">return</span> <span class="sh_string">"main/index"</span><span class="sh_symbol">;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_cbracket">}</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;@<span class="sh_function">RequestMapping</span><span class="sh_symbol">(</span><span class="sh_string">"/checkLogin.do"</span><span class="sh_symbol">)</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">public</span> <span class="sh_predef_func">String</span> <span class="sh_function">checkLogin</span><span class="sh_symbol">(</span><span class="sh_predef_func">String</span> adminCode<span class="sh_symbol">,</span> <span class="sh_predef_func">String</span> password<span class="sh_symbol">,</span> </li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ModelMap model<span class="sh_symbol">,</span> HttpSession session<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span></li><li><span class="sh_comment">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;try {</span></li><li><span class="sh_comment">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Admin admin = </span></li><li><span class="sh_comment">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;loginService.checkAdminCodeAndPwd(adminCode, password);</span></li><li><span class="sh_comment">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;session.setAttribute("admin", admin);</span></li><li><span class="sh_comment">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} catch (AdminCodeException e) {</span></li><li><span class="sh_comment">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;model.addAttribute("message", e.getMessage());</span></li><li><span class="sh_comment">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;model.addAttribute("adminCode", adminCode);</span></li><li><span class="sh_comment">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;model.addAttribute("password", password);</span></li><li><span class="sh_comment">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return "main/login";</span></li><li><span class="sh_comment">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} catch (PasswordException e) {</span></li><li><span class="sh_comment">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;model.addAttribute("message", e.getMessage());</span></li><li><span class="sh_comment">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;model.addAttribute("adminCode", adminCode);</span></li><li><span class="sh_comment">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;model.addAttribute("password", password);</span></li><li><span class="sh_comment">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return "main/login";</span></li><li><span class="sh_comment">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Integer<span class="sh_symbol">.</span><span class="sh_function">valueOf</span><span class="sh_symbol">(</span><span class="sh_string">"abc"</span><span class="sh_symbol">);</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Admin admin <span class="sh_symbol">=</span> </li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;loginService<span class="sh_symbol">.</span><span class="sh_function">checkAdminCodeAndPwd</span><span class="sh_symbol">(</span>adminCode<span class="sh_symbol">,</span> password<span class="sh_symbol">);</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;session<span class="sh_symbol">.</span><span class="sh_function">setAttribute</span><span class="sh_symbol">(</span><span class="sh_string">"admin"</span><span class="sh_symbol">,</span> admin<span class="sh_symbol">);</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">return</span> <span class="sh_string">"redirect:toIndex.do"</span><span class="sh_symbol">;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_cbracket">}</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;</li><li><span class="sh_cbracket">}</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">package com.tarena.web;

import java.io.Serializable;
import javax.annotation.Resource;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import javax.servlet.http.HttpSession;
import org.springframework.stereotype.Controller;
import org.springframework.ui.ModelMap;
import org.springframework.web.bind.annotation.ExceptionHandler;
import org.springframework.web.bind.annotation.RequestMapping;
import com.tarena.entity.Admin;
import com.tarena.exception.AdminCodeException;
import com.tarena.exception.PasswordException;
import com.tarena.service.LoginService;

@Controller
@RequestMapping("/login")
public class LoginController implements Serializable {
	
	@Resource
	private LoginService loginService;
	
	@ExceptionHandler
	public String execute(HttpServletRequest request,
			HttpServletResponse response, Exception e) throws Exception {
		if(e instanceof AdminCodeException
				|| e instanceof PasswordException) {
			//业务异常自己处理
			request.setAttribute("message", e.getMessage());
			request.setAttribute(
				"adminCode", request.getParameter("adminCode"));
			request.setAttribute(
				"password", request.getParameter("password"));
			return "main/login";
		} else {
			//系统异常抛出，交给Spring处理
			throw e;
		}
	}

	@RequestMapping("/toLogin.do")
	public String toLogin() {
		return "main/login";
	}
	
	@RequestMapping("/toIndex.do")
	public String toIndex() {
		return "main/index";
	}
	
	@RequestMapping("/checkLogin.do")
	public String checkLogin(String adminCode, String password, 
			ModelMap model, HttpSession session) {
//		try {
//			Admin admin = 
//				loginService.checkAdminCodeAndPwd(adminCode, password);
//			session.setAttribute("admin", admin);
//		} catch (AdminCodeException e) {
//			model.addAttribute("message", e.getMessage());
//			model.addAttribute("adminCode", adminCode);
//			model.addAttribute("password", password);
//			return "main/login";
//		} catch (PasswordException e) {
//			model.addAttribute("message", e.getMessage());
//			model.addAttribute("adminCode", adminCode);
//			model.addAttribute("password", password);
//			return "main/login";
//		}
		Integer.valueOf("abc");
		Admin admin = 
			loginService.checkAdminCodeAndPwd(adminCode, password);
		session.setAttribute("admin", admin);		
		return "redirect:toIndex.do";
	}
	
}
</pre><div class="sh_sourceCode snippet-hide"><pre><a href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#" class="snippet-revealed snippet-toggle sh_url">隐藏</a></pre></div></div><div class="snippet-reveal sh_acid snippet-wrap"><pre class="sh_sourceCode"><a href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#" class="snippet-toggle sh_url">代码</a></pre></div></div>
      <p>applicationContext.xml完整代码如下：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap" style="display: none;"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#">pop-up</a></pre></div><pre class="hide sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">&lt;?</span>xml version<span class="sh_symbol">=</span><span class="sh_string">"1.0"</span> encoding<span class="sh_symbol">=</span><span class="sh_string">"UTF-8"</span><span class="sh_symbol">?&gt;</span></li><li><span class="sh_symbol">&lt;</span>beans xmlns<span class="sh_symbol">=</span><span class="sh_string">"http://www.springframework.org/schema/beans"</span> </li><li>&nbsp;&nbsp;&nbsp;&nbsp;xmlns<span class="sh_symbol">:</span>xsi<span class="sh_symbol">=</span><span class="sh_string">"http://www.w3.org/2001/XMLSchema-instance"</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;xmlns<span class="sh_symbol">:</span>context<span class="sh_symbol">=</span><span class="sh_string">"http://www.springframework.org/schema/context"</span> </li><li>&nbsp;&nbsp;&nbsp;&nbsp;xmlns<span class="sh_symbol">:</span>jdbc<span class="sh_symbol">=</span><span class="sh_string">"http://www.springframework.org/schema/jdbc"</span>  </li><li>&nbsp;&nbsp;&nbsp;&nbsp;xmlns<span class="sh_symbol">:</span>jee<span class="sh_symbol">=</span><span class="sh_string">"http://www.springframework.org/schema/jee"</span> </li><li>&nbsp;&nbsp;&nbsp;&nbsp;xmlns<span class="sh_symbol">:</span>tx<span class="sh_symbol">=</span><span class="sh_string">"http://www.springframework.org/schema/tx"</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;xmlns<span class="sh_symbol">:</span>aop<span class="sh_symbol">=</span><span class="sh_string">"http://www.springframework.org/schema/aop"</span> </li><li>&nbsp;&nbsp;&nbsp;&nbsp;xmlns<span class="sh_symbol">:</span>mvc<span class="sh_symbol">=</span><span class="sh_string">"http://www.springframework.org/schema/mvc"</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;xmlns<span class="sh_symbol">:</span>util<span class="sh_symbol">=</span><span class="sh_string">"http://www.springframework.org/schema/util"</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;xmlns<span class="sh_symbol">:</span>jpa<span class="sh_symbol">=</span><span class="sh_string">"http://www.springframework.org/schema/data/jpa"</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;xsi<span class="sh_symbol">:</span>schemaLocation<span class="sh_symbol">=</span><span class="sh_string">"</span></li><li><span class="sh_string">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.2.xsd</span></li><li><span class="sh_string">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.2.xsd</span></li><li><span class="sh_string">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http://www.springframework.org/schema/jdbc http://www.springframework.org/schema/jdbc/spring-jdbc-3.2.xsd</span></li><li><span class="sh_string">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http://www.springframework.org/schema/jee http://www.springframework.org/schema/jee/spring-jee-3.2.xsd</span></li><li><span class="sh_string">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.2.xsd</span></li><li><span class="sh_string">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http://www.springframework.org/schema/data/jpa http://www.springframework.org/schema/data/jpa/spring-jpa-1.3.xsd</span></li><li><span class="sh_string">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-3.2.xsd</span></li><li><span class="sh_string">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.2.xsd</span></li><li><span class="sh_string">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-3.2.xsd"</span><span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>util<span class="sh_symbol">:</span>properties id<span class="sh_symbol">=</span><span class="sh_string">"jdbc"</span> location<span class="sh_symbol">=</span><span class="sh_string">"classpath:jdbc.properties"</span><span class="sh_symbol">/&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;!--</span> 定义数据源 <span class="sh_symbol">--&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>bean id<span class="sh_symbol">=</span><span class="sh_string">"ds"</span> </li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">class</span><span class="sh_symbol">=</span><span class="sh_string">"org.apache.commons.dbcp.BasicDataSource"</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;destroy<span class="sh_symbol">-</span>method<span class="sh_symbol">=</span><span class="sh_string">"close"</span><span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>property name<span class="sh_symbol">=</span><span class="sh_string">"url"</span> value<span class="sh_symbol">=</span><span class="sh_string">"#{jdbc.url}"</span><span class="sh_symbol">/&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>property name<span class="sh_symbol">=</span><span class="sh_string">"driverClassName"</span> value<span class="sh_symbol">=</span><span class="sh_string">"#{jdbc.driver}"</span><span class="sh_symbol">/&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>property name<span class="sh_symbol">=</span><span class="sh_string">"username"</span> value<span class="sh_symbol">=</span><span class="sh_string">"#{jdbc.user}"</span><span class="sh_symbol">/&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>property name<span class="sh_symbol">=</span><span class="sh_string">"password"</span> value<span class="sh_symbol">=</span><span class="sh_string">"#{jdbc.password}"</span><span class="sh_symbol">/&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>bean<span class="sh_symbol">&gt;</span>&nbsp;&nbsp;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;!--</span> 开启注解扫描 <span class="sh_symbol">--&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>context<span class="sh_symbol">:</span>component<span class="sh_symbol">-</span>scan base<span class="sh_symbol">-</span>package<span class="sh_symbol">=</span><span class="sh_string">"com.tarena"</span><span class="sh_symbol">/&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;!--</span> 开启MVC注解扫描 <span class="sh_symbol">--&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>mvc<span class="sh_symbol">:</span>annotation<span class="sh_symbol">-</span><span class="sh_normal">driven</span><span class="sh_symbol">/&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;!--</span> 定义视图解析器ViewResolver <span class="sh_symbol">--&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>bean id<span class="sh_symbol">=</span><span class="sh_string">"viewResolver"</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">class</span><span class="sh_symbol">=</span><span class="sh_string">"org.springframework.web.servlet.view.InternalResourceViewResolver"</span><span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>property name<span class="sh_symbol">=</span><span class="sh_string">"prefix"</span> value<span class="sh_symbol">=</span><span class="sh_string">"/WEB-INF/"</span><span class="sh_symbol">/&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>property name<span class="sh_symbol">=</span><span class="sh_string">"suffix"</span> value<span class="sh_symbol">=</span><span class="sh_string">".jsp"</span><span class="sh_symbol">/&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>bean<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;!--</span> 处理系统异常 <span class="sh_symbol">--&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>bean <span class="sh_keyword">class</span><span class="sh_symbol">=</span><span class="sh_string">"org.springframework.web.servlet.handler.SimpleMappingExceptionResolver"</span><span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>property name<span class="sh_symbol">=</span><span class="sh_string">"exceptionMappings"</span><span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>props<span class="sh_symbol">&gt;</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>prop key<span class="sh_symbol">=</span><span class="sh_string">"java.lang.Exception"</span><span class="sh_symbol">&gt;</span><span class="sh_normal">main</span><span class="sh_symbol">/</span>error<span class="sh_symbol">&lt;/</span>prop<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>props<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>property<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>bean<span class="sh_symbol">&gt;</span>&nbsp;&nbsp;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;</li><li><span class="sh_symbol">&lt;/</span>beans<span class="sh_symbol">&gt;</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;beans xmlns="http://www.springframework.org/schema/beans" 
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xmlns:context="http://www.springframework.org/schema/context" 
	xmlns:jdbc="http://www.springframework.org/schema/jdbc"  
	xmlns:jee="http://www.springframework.org/schema/jee" 
	xmlns:tx="http://www.springframework.org/schema/tx"
	xmlns:aop="http://www.springframework.org/schema/aop" 
	xmlns:mvc="http://www.springframework.org/schema/mvc"
	xmlns:util="http://www.springframework.org/schema/util"
	xmlns:jpa="http://www.springframework.org/schema/data/jpa"
	xsi:schemaLocation="
		http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.2.xsd
		http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.2.xsd
		http://www.springframework.org/schema/jdbc http://www.springframework.org/schema/jdbc/spring-jdbc-3.2.xsd
		http://www.springframework.org/schema/jee http://www.springframework.org/schema/jee/spring-jee-3.2.xsd
		http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.2.xsd
		http://www.springframework.org/schema/data/jpa http://www.springframework.org/schema/data/jpa/spring-jpa-1.3.xsd
		http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-3.2.xsd
		http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.2.xsd
		http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-3.2.xsd"&gt;
	
	&lt;util:properties id="jdbc" location="classpath:jdbc.properties"/&gt;
	
	&lt;!-- 定义数据源 --&gt;
	&lt;bean id="ds" 
		class="org.apache.commons.dbcp.BasicDataSource"
		destroy-method="close"&gt;
		&lt;property name="url" value="#{jdbc.url}"/&gt;
		&lt;property name="driverClassName" value="#{jdbc.driver}"/&gt;
		&lt;property name="username" value="#{jdbc.user}"/&gt;
		&lt;property name="password" value="#{jdbc.password}"/&gt;
	&lt;/bean&gt;	
	
	&lt;!-- 开启注解扫描 --&gt;
	&lt;context:component-scan base-package="com.tarena"/&gt;
	
	&lt;!-- 开启MVC注解扫描 --&gt;
	&lt;mvc:annotation-driven/&gt;
	
	&lt;!-- 定义视图解析器ViewResolver --&gt;
	&lt;bean id="viewResolver"
		class="org.springframework.web.servlet.view.InternalResourceViewResolver"&gt;
		&lt;property name="prefix" value="/WEB-INF/"/&gt;
		&lt;property name="suffix" value=".jsp"/&gt;
	&lt;/bean&gt;
	
	&lt;!-- 处理系统异常 --&gt;
	&lt;bean class="org.springframework.web.servlet.handler.SimpleMappingExceptionResolver"&gt;
		&lt;property name="exceptionMappings"&gt;
	&lt;props&gt;		
	&lt;prop key="java.lang.Exception"&gt;main/error&lt;/prop&gt;
	&lt;/props&gt;
	&lt;/property&gt;
	&lt;/bean&gt;	
	
&lt;/beans&gt;
</pre><div class="sh_sourceCode snippet-hide"><pre><a href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#" class="snippet-revealed snippet-toggle sh_url">隐藏</a></pre></div></div><div class="snippet-reveal sh_acid snippet-wrap"><pre class="sh_sourceCode"><a href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#" class="snippet-toggle sh_url">代码</a></pre></div></div>
      <p>error.jsp完整代码如下：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap" style="display: none;"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#">pop-up</a></pre></div><pre class="hide sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">&lt;%</span>@page pageEncoding<span class="sh_symbol">=</span><span class="sh_string">"utf-8"</span><span class="sh_symbol">%&gt;</span></li><li><span class="sh_symbol">&lt;!</span>DOCTYPE html PUBLIC <span class="sh_string">"-//W3C//DTD XHTML 1.0 Transitional//EN"</span> <span class="sh_string">"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"</span><span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;</span>html xmlns<span class="sh_symbol">=</span><span class="sh_string">"http://www.w3.org/1999/xhtml"</span><span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;</span>head<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;</span>meta http<span class="sh_symbol">-</span>equiv<span class="sh_symbol">=</span><span class="sh_string">"Content-Type"</span> content<span class="sh_symbol">=</span><span class="sh_string">"text/html; charset=utf-8"</span> <span class="sh_symbol">/&gt;</span></li><li><span class="sh_symbol">&lt;</span>title<span class="sh_symbol">&gt;</span>达内－NetCTOSS<span class="sh_symbol">&lt;/</span>title<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;</span>link type<span class="sh_symbol">=</span><span class="sh_string">"text/css"</span> rel<span class="sh_symbol">=</span><span class="sh_string">"stylesheet"</span> media<span class="sh_symbol">=</span><span class="sh_string">"all"</span> href<span class="sh_symbol">=</span><span class="sh_string">"../styles/global.css"</span> <span class="sh_symbol">/&gt;</span></li><li><span class="sh_symbol">&lt;</span>link type<span class="sh_symbol">=</span><span class="sh_string">"text/css"</span> rel<span class="sh_symbol">=</span><span class="sh_string">"stylesheet"</span> media<span class="sh_symbol">=</span><span class="sh_string">"all"</span> href<span class="sh_symbol">=</span><span class="sh_string">"../styles/global_color.css"</span> <span class="sh_symbol">/&gt;</span></li><li><span class="sh_symbol">&lt;</span>script language<span class="sh_symbol">=</span><span class="sh_string">"javascript"</span> type<span class="sh_symbol">=</span><span class="sh_string">"text/javascript"</span><span class="sh_symbol">&gt;</span></li><li><span class="sh_keyword">var</span> timer<span class="sh_symbol">;</span></li><li>            <span class="sh_comment">//启动跳转的定时器</span></li><li><span class="sh_keyword">function</span> <span class="sh_function">startTimes</span><span class="sh_symbol">()</span> <span class="sh_cbracket">{</span></li><li>timer <span class="sh_symbol">=</span> window<span class="sh_symbol">.</span><span class="sh_function">setInterval</span><span class="sh_symbol">(</span>showSecondes<span class="sh_symbol">,</span><span class="sh_number">1000</span><span class="sh_symbol">);</span></li><li>            <span class="sh_cbracket">}</span></li><li><span style="display:none;">&nbsp;</span></li><li><span class="sh_keyword">var</span> i <span class="sh_symbol">=</span> <span class="sh_number">5</span><span class="sh_symbol">;</span></li><li><span class="sh_keyword">function</span> <span class="sh_function">showSecondes</span><span class="sh_symbol">()</span> <span class="sh_cbracket">{</span></li><li><span class="sh_keyword">if</span> <span class="sh_symbol">(</span>i <span class="sh_symbol">&gt;</span> <span class="sh_number">0</span><span class="sh_symbol">)</span> <span class="sh_cbracket">{</span></li><li>i<span class="sh_symbol">--;</span></li><li>document<span class="sh_symbol">.</span><span class="sh_function">getElementById</span><span class="sh_symbol">(</span><span class="sh_string">"secondes"</span><span class="sh_symbol">).</span>innerHTML <span class="sh_symbol">=</span> i<span class="sh_symbol">;</span></li><li>                <span class="sh_cbracket">}</span></li><li><span class="sh_keyword">else</span> <span class="sh_cbracket">{</span></li><li>window<span class="sh_symbol">.</span><span class="sh_function">clearInterval</span><span class="sh_symbol">(</span>timer<span class="sh_symbol">);</span></li><li>                    <span class="sh_comment">//location.href = "login.html";</span></li><li>history<span class="sh_symbol">.</span><span class="sh_function">back</span><span class="sh_symbol">();</span></li><li>                <span class="sh_cbracket">}</span></li><li>            <span class="sh_cbracket">}</span></li><li><span style="display:none;">&nbsp;</span></li><li>            <span class="sh_comment">//取消跳转</span></li><li><span class="sh_keyword">function</span> <span class="sh_function">resetTimer</span><span class="sh_symbol">()</span> <span class="sh_cbracket">{</span></li><li><span class="sh_keyword">if</span> <span class="sh_symbol">(</span>timer <span class="sh_symbol">!=</span> <span class="sh_keyword">null</span> <span class="sh_symbol">&amp;&amp;</span> timer <span class="sh_symbol">!=</span> <span class="sh_predef_var">undefined</span><span class="sh_symbol">)</span> <span class="sh_cbracket">{</span></li><li>window<span class="sh_symbol">.</span><span class="sh_function">clearInterval</span><span class="sh_symbol">(</span>timer<span class="sh_symbol">);</span></li><li>                    <span class="sh_comment">//location.href = "login.html";</span></li><li>history<span class="sh_symbol">.</span><span class="sh_function">back</span><span class="sh_symbol">();</span></li><li>                <span class="sh_cbracket">}</span></li><li>            <span class="sh_cbracket">}</span></li><li><span class="sh_symbol">&lt;/</span>script<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;/</span>head<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;</span>body <span class="sh_keyword">class</span><span class="sh_symbol">=</span><span class="sh_string">"error_page"</span> onload<span class="sh_symbol">=</span><span class="sh_string">"startTimes();"</span><span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;</span>h1 id<span class="sh_symbol">=</span><span class="sh_string">"error"</span><span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;        遇到错误，<span class="sh_symbol">&amp;</span>nbsp<span class="sh_symbol">;&lt;</span>span id<span class="sh_symbol">=</span><span class="sh_string">"secondes"</span><span class="sh_symbol">&gt;</span><span class="sh_number">5</span><span class="sh_symbol">&lt;/</span>span<span class="sh_symbol">&gt;&amp;</span>nbsp<span class="sh_symbol">;</span>秒后将自动跳转，立即跳转请点击<span class="sh_symbol">&amp;</span>nbsp<span class="sh_symbol">;</span></li><li><span class="sh_symbol">&lt;</span>a  href<span class="sh_symbol">=</span><span class="sh_string">"javascript:resetTimer();"</span><span class="sh_symbol">&gt;</span>返回<span class="sh_symbol">&lt;/</span>a<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;/</span>h1<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;/</span>body<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;/</span>html<span class="sh_symbol">&gt;</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">&lt;%@page pageEncoding="utf-8"%&gt;
&lt;!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"&gt;
&lt;html xmlns="http://www.w3.org/1999/xhtml"&gt;
&lt;head&gt;
&lt;meta http-equiv="Content-Type" content="text/html; charset=utf-8" /&gt;
&lt;title&gt;达内－NetCTOSS&lt;/title&gt;
&lt;link type="text/css" rel="stylesheet" media="all" href="../styles/global.css" /&gt;
&lt;link type="text/css" rel="stylesheet" media="all" href="../styles/global_color.css" /&gt;
&lt;script language="javascript" type="text/javascript"&gt;
var timer;
            //启动跳转的定时器
function startTimes() {
timer = window.setInterval(showSecondes,1000);
            }

var i = 5;
function showSecondes() {
if (i &gt; 0) {
i--;
document.getElementById("secondes").innerHTML = i;
                }
else {
window.clearInterval(timer);
                    //location.href = "login.html";
history.back();
                }
            }

            //取消跳转
function resetTimer() {
if (timer != null &amp;&amp; timer != undefined) {
window.clearInterval(timer);
                    //location.href = "login.html";
history.back();
                }
            }
&lt;/script&gt;
&lt;/head&gt;
&lt;body class="error_page" onload="startTimes();"&gt;
&lt;h1 id="error"&gt;
	        遇到错误，&amp;nbsp;&lt;span id="secondes"&gt;5&lt;/span&gt;&amp;nbsp;秒后将自动跳转，立即跳转请点击&amp;nbsp;
&lt;a  href="javascript:resetTimer();"&gt;返回&lt;/a&gt;
&lt;/h1&gt;
&lt;/body&gt;
&lt;/html&gt;
</pre><div class="sh_sourceCode snippet-hide"><pre><a href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#" class="snippet-revealed snippet-toggle sh_url">隐藏</a></pre></div></div><div class="snippet-reveal sh_acid snippet-wrap"><pre class="sh_sourceCode"><a href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#" class="snippet-toggle sh_url">代码</a></pre></div></div>
      <a name="case4">
      </a>
      <h2>4 资费列表</h2>
      <h3>4.1 问题</h3>
      <p>实现NETCTOSS项目中资费列表功能。</p>
      <h3>4.2 方案</h3>
      <p>开发步骤：</p>
      <ol class="list">
        <li>在数据访问层增加查询全部资费的方法
</li>
        <li>在业务层增加查询资费的业务方法
</li>
        <li>在控制层增加处理查询请求的方法
</li>
        <li>在页面上使用JSTL+EL循环输出数据
</li>
      </ol>
      <h3>4.3 步骤</h3>
      <p class="number">步骤一：在DAO中增加查询资费的方法</p>
      <p>创建资费表，并插入预置数据，代码如下：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">--</span>资费信息表</li><li>create table <span class="sh_function">cost</span><span class="sh_symbol">(</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;cost_id&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_function">number</span><span class="sh_symbol">(</span><span class="sh_number">4</span><span class="sh_symbol">)</span> constraint cost_id_pk primary key<span class="sh_symbol">,</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;name&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_function">varchar</span><span class="sh_symbol">(</span><span class="sh_number">50</span><span class="sh_symbol">)</span>  not <span class="sh_keyword">null</span><span class="sh_symbol">,</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;base_duration&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_function">number</span><span class="sh_symbol">(</span><span class="sh_number">11</span><span class="sh_symbol">),</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;base_cost&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_function">number</span><span class="sh_symbol">(</span><span class="sh_number">7</span><span class="sh_symbol">,</span><span class="sh_number">2</span><span class="sh_symbol">),</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;unit_cost&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_function">number</span><span class="sh_symbol">(</span><span class="sh_number">7</span><span class="sh_symbol">,</span><span class="sh_number">4</span><span class="sh_symbol">),</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;status&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_function">char</span><span class="sh_symbol">(</span><span class="sh_number">1</span><span class="sh_symbol">),</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;descr&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_function">varchar2</span><span class="sh_symbol">(</span><span class="sh_number">100</span><span class="sh_symbol">),</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;creatime&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;date <span class="sh_keyword">default</span> sysdate <span class="sh_symbol">,</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;startime&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;date<span class="sh_symbol">,</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cost_type&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_function">char</span><span class="sh_symbol">(</span><span class="sh_number">1</span><span class="sh_symbol">)</span></li><li>  <span class="sh_symbol">);</span></li><li><span style="display:none;">&nbsp;</span></li><li>create sequence cost_seq start <span class="sh_keyword">with</span> <span class="sh_number">100</span><span class="sh_symbol">;</span></li><li><span style="display:none;">&nbsp;</span></li><li>INSERT INTO COST <span class="sh_function">VALUES</span> <span class="sh_symbol">(</span><span class="sh_number">1</span><span class="sh_symbol">,</span><span class="sh_string">'5.9元套餐'</span><span class="sh_symbol">,</span><span class="sh_number">20</span><span class="sh_symbol">,</span><span class="sh_number">5.9</span><span class="sh_symbol">,</span><span class="sh_number">0.4</span><span class="sh_symbol">,</span><span class="sh_number">0</span><span class="sh_symbol">,</span><span class="sh_string">'5.9元20小时/月,超出部分0.4元/时'</span><span class="sh_symbol">,</span>DEFAULT<span class="sh_symbol">,</span>DEFAULT<span class="sh_symbol">,</span>NULL<span class="sh_symbol">);</span></li><li>INSERT INTO COST <span class="sh_function">VALUES</span> <span class="sh_symbol">(</span><span class="sh_number">2</span><span class="sh_symbol">,</span><span class="sh_string">'6.9元套餐'</span><span class="sh_symbol">,</span><span class="sh_number">40</span><span class="sh_symbol">,</span><span class="sh_number">6.9</span><span class="sh_symbol">,</span><span class="sh_number">0.3</span><span class="sh_symbol">,</span><span class="sh_number">0</span><span class="sh_symbol">,</span><span class="sh_string">'6.9元40小时/月,超出部分0.3元/时'</span><span class="sh_symbol">,</span>DEFAULT<span class="sh_symbol">,</span>DEFAULT<span class="sh_symbol">,</span>NULL<span class="sh_symbol">);</span></li><li>INSERT INTO COST <span class="sh_function">VALUES</span> <span class="sh_symbol">(</span><span class="sh_number">3</span><span class="sh_symbol">,</span><span class="sh_string">'8.5元套餐'</span><span class="sh_symbol">,</span><span class="sh_number">100</span><span class="sh_symbol">,</span><span class="sh_number">8.5</span><span class="sh_symbol">,</span><span class="sh_number">0.2</span><span class="sh_symbol">,</span><span class="sh_number">0</span><span class="sh_symbol">,</span><span class="sh_string">'8.5元100小时/月,超出部分0.2元/时'</span><span class="sh_symbol">,</span>DEFAULT<span class="sh_symbol">,</span>DEFAULT<span class="sh_symbol">,</span>NULL<span class="sh_symbol">);</span></li><li>INSERT INTO COST <span class="sh_function">VALUES</span> <span class="sh_symbol">(</span><span class="sh_number">4</span><span class="sh_symbol">,</span><span class="sh_string">'10.5元套餐'</span><span class="sh_symbol">,</span><span class="sh_number">200</span><span class="sh_symbol">,</span><span class="sh_number">10.5</span><span class="sh_symbol">,</span><span class="sh_number">0.1</span><span class="sh_symbol">,</span><span class="sh_number">0</span><span class="sh_symbol">,</span><span class="sh_string">'10.5元200小时/月,超出部分0.1元/时'</span><span class="sh_symbol">,</span>DEFAULT<span class="sh_symbol">,</span>DEFAULT<span class="sh_symbol">,</span>NULL<span class="sh_symbol">);</span></li><li>INSERT INTO COST <span class="sh_function">VALUES</span> <span class="sh_symbol">(</span><span class="sh_number">5</span><span class="sh_symbol">,</span><span class="sh_string">'计时收费'</span><span class="sh_symbol">,</span><span class="sh_keyword">null</span><span class="sh_symbol">,</span><span class="sh_keyword">null</span><span class="sh_symbol">,</span><span class="sh_number">0.5</span><span class="sh_symbol">,</span><span class="sh_number">0</span><span class="sh_symbol">,</span><span class="sh_string">'0.5元/时,不使用不收费'</span><span class="sh_symbol">,</span>DEFAULT<span class="sh_symbol">,</span>DEFAULT<span class="sh_symbol">,</span>NULL<span class="sh_symbol">);</span></li><li>INSERT INTO COST <span class="sh_function">VALUES</span> <span class="sh_symbol">(</span><span class="sh_number">6</span><span class="sh_symbol">,</span><span class="sh_string">'包月'</span><span class="sh_symbol">,</span><span class="sh_keyword">null</span><span class="sh_symbol">,</span><span class="sh_number">20</span><span class="sh_symbol">,</span><span class="sh_keyword">null</span><span class="sh_symbol">,</span><span class="sh_number">0</span><span class="sh_symbol">,</span><span class="sh_string">'每月20元,不限制使用时间'</span><span class="sh_symbol">,</span>DEFAULT<span class="sh_symbol">,</span>DEFAULT<span class="sh_symbol">,</span>NULL<span class="sh_symbol">);</span></li><li>INSERT INTO COST <span class="sh_function">VALUES</span> <span class="sh_symbol">(</span><span class="sh_number">7</span><span class="sh_symbol">,</span><span class="sh_string">'mm'</span><span class="sh_symbol">,</span><span class="sh_number">10</span><span class="sh_symbol">,</span><span class="sh_number">5</span><span class="sh_symbol">,</span><span class="sh_keyword">null</span><span class="sh_symbol">,</span><span class="sh_number">0</span><span class="sh_symbol">,</span><span class="sh_string">''</span><span class="sh_symbol">,</span>DEFAULT<span class="sh_symbol">,</span>DEFAULT<span class="sh_symbol">,</span>NULL<span class="sh_symbol">);</span></li><li>INSERT INTO COST <span class="sh_function">VALUES</span> <span class="sh_symbol">(</span><span class="sh_number">8</span><span class="sh_symbol">,</span><span class="sh_string">'nn'</span><span class="sh_symbol">,</span><span class="sh_number">10</span><span class="sh_symbol">,</span><span class="sh_number">7</span><span class="sh_symbol">,</span><span class="sh_keyword">null</span><span class="sh_symbol">,</span><span class="sh_number">0</span><span class="sh_symbol">,</span><span class="sh_string">''</span><span class="sh_symbol">,</span>DEFAULT<span class="sh_symbol">,</span>DEFAULT<span class="sh_symbol">,</span>NULL<span class="sh_symbol">);</span></li><li>INSERT INTO COST <span class="sh_function">VALUES</span> <span class="sh_symbol">(</span><span class="sh_number">9</span><span class="sh_symbol">,</span><span class="sh_string">'qq'</span><span class="sh_symbol">,</span><span class="sh_number">10</span><span class="sh_symbol">,</span><span class="sh_number">4</span><span class="sh_symbol">,</span><span class="sh_keyword">null</span><span class="sh_symbol">,</span><span class="sh_number">0</span><span class="sh_symbol">,</span><span class="sh_string">''</span><span class="sh_symbol">,</span>DEFAULT<span class="sh_symbol">,</span>DEFAULT<span class="sh_symbol">,</span>NULL<span class="sh_symbol">);</span></li><li>COMMIT<span class="sh_symbol">;</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">--资费信息表
create table cost(
	cost_id			number(4) constraint cost_id_pk primary key,
	name			varchar(50)  not null,
	base_duration	number(11),
	base_cost		number(7,2),
	unit_cost		number(7,4),
	status			char(1),
	descr			varchar2(100),
	creatime		date default sysdate ,
	startime		date,
		cost_type		char(1)
  );

create sequence cost_seq start with 100;

INSERT INTO COST VALUES (1,'5.9元套餐',20,5.9,0.4,0,'5.9元20小时/月,超出部分0.4元/时',DEFAULT,DEFAULT,NULL);
INSERT INTO COST VALUES (2,'6.9元套餐',40,6.9,0.3,0,'6.9元40小时/月,超出部分0.3元/时',DEFAULT,DEFAULT,NULL);
INSERT INTO COST VALUES (3,'8.5元套餐',100,8.5,0.2,0,'8.5元100小时/月,超出部分0.2元/时',DEFAULT,DEFAULT,NULL);
INSERT INTO COST VALUES (4,'10.5元套餐',200,10.5,0.1,0,'10.5元200小时/月,超出部分0.1元/时',DEFAULT,DEFAULT,NULL);
INSERT INTO COST VALUES (5,'计时收费',null,null,0.5,0,'0.5元/时,不使用不收费',DEFAULT,DEFAULT,NULL);
INSERT INTO COST VALUES (6,'包月',null,20,null,0,'每月20元,不限制使用时间',DEFAULT,DEFAULT,NULL);
INSERT INTO COST VALUES (7,'mm',10,5,null,0,'',DEFAULT,DEFAULT,NULL);
INSERT INTO COST VALUES (8,'nn',10,7,null,0,'',DEFAULT,DEFAULT,NULL);
INSERT INTO COST VALUES (9,'qq',10,4,null,0,'',DEFAULT,DEFAULT,NULL);
COMMIT;
</pre></div></div>
      <p>创建资费实体类Cost，代码如下：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li>package com<span class="sh_symbol">.</span>tarena<span class="sh_symbol">.</span>entity<span class="sh_symbol">;</span></li><li><span style="display:none;">&nbsp;</span></li><li>import java<span class="sh_symbol">.</span>io<span class="sh_symbol">.</span>Serializable<span class="sh_symbol">;</span></li><li>import java<span class="sh_symbol">.</span>sql<span class="sh_symbol">.</span>Timestamp<span class="sh_symbol">;</span></li><li><span style="display:none;">&nbsp;</span></li><li><span class="sh_keyword">public</span> <span class="sh_keyword">class</span> Cost <span class="sh_keyword">implements</span> Serializable <span class="sh_cbracket">{</span></li><li><span style="display:none;">&nbsp;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">private</span> Integer costId<span class="sh_symbol">;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">private</span> <span class="sh_predef_func">String</span> name<span class="sh_symbol">;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">private</span> Integer baseDuration<span class="sh_symbol">;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">private</span> Double baseCost<span class="sh_symbol">;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">private</span> Double unitCost<span class="sh_symbol">;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">private</span> <span class="sh_predef_func">String</span> status<span class="sh_symbol">;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">private</span> <span class="sh_predef_func">String</span> descr<span class="sh_symbol">;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">private</span> Timestamp creatime<span class="sh_symbol">;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">private</span> Timestamp startime<span class="sh_symbol">;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">private</span> <span class="sh_predef_func">String</span> costType<span class="sh_symbol">;</span></li><li><span style="display:none;">&nbsp;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">public</span> Integer <span class="sh_function">getCostId</span><span class="sh_symbol">()</span> <span class="sh_cbracket">{</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">return</span> costId<span class="sh_symbol">;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_cbracket">}</span></li><li><span style="display:none;">&nbsp;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">public</span> void <span class="sh_function">setCostId</span><span class="sh_symbol">(</span>Integer costId<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">this</span><span class="sh_symbol">.</span>costId <span class="sh_symbol">=</span> costId<span class="sh_symbol">;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_cbracket">}</span></li><li><span style="display:none;">&nbsp;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">public</span> <span class="sh_predef_func">String</span> <span class="sh_function">getName</span><span class="sh_symbol">()</span> <span class="sh_cbracket">{</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">return</span> name<span class="sh_symbol">;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_cbracket">}</span></li><li><span style="display:none;">&nbsp;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">public</span> void <span class="sh_function">setName</span><span class="sh_symbol">(</span><span class="sh_predef_func">String</span> name<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">this</span><span class="sh_symbol">.</span>name <span class="sh_symbol">=</span> name<span class="sh_symbol">;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_cbracket">}</span></li><li><span style="display:none;">&nbsp;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">public</span> Integer <span class="sh_function">getBaseDuration</span><span class="sh_symbol">()</span> <span class="sh_cbracket">{</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">return</span> baseDuration<span class="sh_symbol">;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_cbracket">}</span></li><li><span style="display:none;">&nbsp;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">public</span> void <span class="sh_function">setBaseDuration</span><span class="sh_symbol">(</span>Integer baseDuration<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">this</span><span class="sh_symbol">.</span>baseDuration <span class="sh_symbol">=</span> baseDuration<span class="sh_symbol">;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_cbracket">}</span></li><li><span style="display:none;">&nbsp;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">public</span> Double <span class="sh_function">getBaseCost</span><span class="sh_symbol">()</span> <span class="sh_cbracket">{</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">return</span> baseCost<span class="sh_symbol">;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_cbracket">}</span></li><li><span style="display:none;">&nbsp;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">public</span> void <span class="sh_function">setBaseCost</span><span class="sh_symbol">(</span>Double baseCost<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">this</span><span class="sh_symbol">.</span>baseCost <span class="sh_symbol">=</span> baseCost<span class="sh_symbol">;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_cbracket">}</span></li><li><span style="display:none;">&nbsp;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">public</span> Double <span class="sh_function">getUnitCost</span><span class="sh_symbol">()</span> <span class="sh_cbracket">{</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">return</span> unitCost<span class="sh_symbol">;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_cbracket">}</span></li><li><span style="display:none;">&nbsp;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">public</span> void <span class="sh_function">setUnitCost</span><span class="sh_symbol">(</span>Double unitCost<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">this</span><span class="sh_symbol">.</span>unitCost <span class="sh_symbol">=</span> unitCost<span class="sh_symbol">;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_cbracket">}</span></li><li><span style="display:none;">&nbsp;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">public</span> <span class="sh_predef_func">String</span> <span class="sh_function">getStatus</span><span class="sh_symbol">()</span> <span class="sh_cbracket">{</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">return</span> status<span class="sh_symbol">;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_cbracket">}</span></li><li><span style="display:none;">&nbsp;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">public</span> void <span class="sh_function">setStatus</span><span class="sh_symbol">(</span><span class="sh_predef_func">String</span> status<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">this</span><span class="sh_symbol">.</span>status <span class="sh_symbol">=</span> status<span class="sh_symbol">;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_cbracket">}</span></li><li><span style="display:none;">&nbsp;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">public</span> <span class="sh_predef_func">String</span> <span class="sh_function">getDescr</span><span class="sh_symbol">()</span> <span class="sh_cbracket">{</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">return</span> descr<span class="sh_symbol">;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_cbracket">}</span></li><li><span style="display:none;">&nbsp;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">public</span> void <span class="sh_function">setDescr</span><span class="sh_symbol">(</span><span class="sh_predef_func">String</span> descr<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">this</span><span class="sh_symbol">.</span>descr <span class="sh_symbol">=</span> descr<span class="sh_symbol">;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_cbracket">}</span></li><li><span style="display:none;">&nbsp;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">public</span> Timestamp <span class="sh_function">getCreatime</span><span class="sh_symbol">()</span> <span class="sh_cbracket">{</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">return</span> creatime<span class="sh_symbol">;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_cbracket">}</span></li><li><span style="display:none;">&nbsp;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">public</span> void <span class="sh_function">setCreatime</span><span class="sh_symbol">(</span>Timestamp creatime<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">this</span><span class="sh_symbol">.</span>creatime <span class="sh_symbol">=</span> creatime<span class="sh_symbol">;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_cbracket">}</span></li><li><span style="display:none;">&nbsp;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">public</span> Timestamp <span class="sh_function">getStartime</span><span class="sh_symbol">()</span> <span class="sh_cbracket">{</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">return</span> startime<span class="sh_symbol">;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_cbracket">}</span></li><li><span style="display:none;">&nbsp;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">public</span> void <span class="sh_function">setStartime</span><span class="sh_symbol">(</span>Timestamp startime<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">this</span><span class="sh_symbol">.</span>startime <span class="sh_symbol">=</span> startime<span class="sh_symbol">;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_cbracket">}</span></li><li><span style="display:none;">&nbsp;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">public</span> <span class="sh_predef_func">String</span> <span class="sh_function">getCostType</span><span class="sh_symbol">()</span> <span class="sh_cbracket">{</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">return</span> costType<span class="sh_symbol">;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_cbracket">}</span></li><li><span style="display:none;">&nbsp;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">public</span> void <span class="sh_function">setCostType</span><span class="sh_symbol">(</span><span class="sh_predef_func">String</span> costType<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">this</span><span class="sh_symbol">.</span>costType <span class="sh_symbol">=</span> costType<span class="sh_symbol">;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_cbracket">}</span></li><li><span style="display:none;">&nbsp;</span></li><li><span class="sh_cbracket">}</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">package com.tarena.entity;

import java.io.Serializable;
import java.sql.Timestamp;

public class Cost implements Serializable {

	private Integer costId;
	private String name;
	private Integer baseDuration;
	private Double baseCost;
	private Double unitCost;
	private String status;
	private String descr;
	private Timestamp creatime;
	private Timestamp startime;
	private String costType;

	public Integer getCostId() {
		return costId;
	}

	public void setCostId(Integer costId) {
		this.costId = costId;
	}

	public String getName() {
		return name;
	}

	public void setName(String name) {
		this.name = name;
	}

	public Integer getBaseDuration() {
		return baseDuration;
	}

	public void setBaseDuration(Integer baseDuration) {
		this.baseDuration = baseDuration;
	}

	public Double getBaseCost() {
		return baseCost;
	}

	public void setBaseCost(Double baseCost) {
		this.baseCost = baseCost;
	}

	public Double getUnitCost() {
		return unitCost;
	}

	public void setUnitCost(Double unitCost) {
		this.unitCost = unitCost;
	}

	public String getStatus() {
		return status;
	}

	public void setStatus(String status) {
		this.status = status;
	}

	public String getDescr() {
		return descr;
	}

	public void setDescr(String descr) {
		this.descr = descr;
	}

	public Timestamp getCreatime() {
		return creatime;
	}

	public void setCreatime(Timestamp creatime) {
		this.creatime = creatime;
	}

	public Timestamp getStartime() {
		return startime;
	}

	public void setStartime(Timestamp startime) {
		this.startime = startime;
	}

	public String getCostType() {
		return costType;
	}

	public void setCostType(String costType) {
		this.costType = costType;
	}

}
</pre></div></div>
      <p>创建资费数据访问接口CostDao，代码如下：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li>package com<span class="sh_symbol">.</span>tarena<span class="sh_symbol">.</span>dao<span class="sh_symbol">;</span></li><li><span style="display:none;">&nbsp;</span></li><li>import java<span class="sh_symbol">.</span>util<span class="sh_symbol">.</span>List<span class="sh_symbol">;</span></li><li><span style="display:none;">&nbsp;</span></li><li>import com<span class="sh_symbol">.</span>tarena<span class="sh_symbol">.</span>entity<span class="sh_symbol">.</span>Cost<span class="sh_symbol">;</span></li><li><span style="display:none;">&nbsp;</span></li><li><span class="sh_keyword">public</span> <span class="sh_keyword">interface</span> CostDao <span class="sh_cbracket">{</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;List<span class="sh_symbol">&lt;</span>Cost<span class="sh_symbol">&gt;</span><span class="sh_function">findAll</span><span class="sh_symbol">();</span></li><li><span style="display:none;">&nbsp;</span></li><li><span class="sh_cbracket">}</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">package com.tarena.dao;

import java.util.List;

import com.tarena.entity.Cost;

public interface CostDao {
	
	List&lt;Cost&gt;findAll();

}
</pre></div></div>
      <p>创建数据访问接口实现类JdbcCostDao，代码如下：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li>package com<span class="sh_symbol">.</span>tarena<span class="sh_symbol">.</span>dao<span class="sh_symbol">;</span></li><li><span style="display:none;">&nbsp;</span></li><li>import java<span class="sh_symbol">.</span>io<span class="sh_symbol">.</span>Serializable<span class="sh_symbol">;</span></li><li>import java<span class="sh_symbol">.</span>sql<span class="sh_symbol">.</span>Connection<span class="sh_symbol">;</span></li><li>import java<span class="sh_symbol">.</span>sql<span class="sh_symbol">.</span>PreparedStatement<span class="sh_symbol">;</span></li><li>import java<span class="sh_symbol">.</span>sql<span class="sh_symbol">.</span>ResultSet<span class="sh_symbol">;</span></li><li>import java<span class="sh_symbol">.</span>sql<span class="sh_symbol">.</span>SQLException<span class="sh_symbol">;</span></li><li>import java<span class="sh_symbol">.</span>util<span class="sh_symbol">.</span>ArrayList<span class="sh_symbol">;</span></li><li>import java<span class="sh_symbol">.</span>util<span class="sh_symbol">.</span>List<span class="sh_symbol">;</span></li><li><span style="display:none;">&nbsp;</span></li><li>import javax<span class="sh_symbol">.</span>annotation<span class="sh_symbol">.</span>Resource<span class="sh_symbol">;</span></li><li>import javax<span class="sh_symbol">.</span>sql<span class="sh_symbol">.</span>DataSource<span class="sh_symbol">;</span></li><li><span style="display:none;">&nbsp;</span></li><li>import org<span class="sh_symbol">.</span>springframework<span class="sh_symbol">.</span>stereotype<span class="sh_symbol">.</span>Repository<span class="sh_symbol">;</span></li><li><span style="display:none;">&nbsp;</span></li><li>import com<span class="sh_symbol">.</span>tarena<span class="sh_symbol">.</span>entity<span class="sh_symbol">.</span>Cost<span class="sh_symbol">;</span></li><li><span style="display:none;">&nbsp;</span></li><li>@Repository</li><li><span class="sh_keyword">public</span> <span class="sh_keyword">class</span> JdbcCostDao <span class="sh_keyword">implements</span> CostDao<span class="sh_symbol">,</span> Serializable <span class="sh_cbracket">{</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;@Resource</li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">private</span> DataSource dataSource<span class="sh_symbol">;</span></li><li><span style="display:none;">&nbsp;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;@Override</li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">public</span> List<span class="sh_symbol">&lt;</span>Cost<span class="sh_symbol">&gt;</span> <span class="sh_function">findAll</span><span class="sh_symbol">()</span> <span class="sh_cbracket">{</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;List<span class="sh_symbol">&lt;</span>Cost<span class="sh_symbol">&gt;</span> list <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> ArrayList<span class="sh_symbol">&lt;</span>Cost<span class="sh_symbol">&gt;();</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Connection conn <span class="sh_symbol">=</span> <span class="sh_keyword">null</span><span class="sh_symbol">;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">try</span> <span class="sh_cbracket">{</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;conn <span class="sh_symbol">=</span> dataSource<span class="sh_symbol">.</span><span class="sh_function">getConnection</span><span class="sh_symbol">();</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_predef_func">String</span> sql <span class="sh_symbol">=</span> <span class="sh_string">"select * from cost order by cost_id"</span><span class="sh_symbol">;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PreparedStatement ps <span class="sh_symbol">=</span> conn<span class="sh_symbol">.</span><span class="sh_function">prepareStatement</span><span class="sh_symbol">(</span>sql<span class="sh_symbol">);</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ResultSet rs <span class="sh_symbol">=</span> ps<span class="sh_symbol">.</span><span class="sh_function">executeQuery</span><span class="sh_symbol">();</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">while</span><span class="sh_symbol">(</span>rs<span class="sh_symbol">.</span><span class="sh_function">next</span><span class="sh_symbol">())</span> <span class="sh_cbracket">{</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Cost cost <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">Cost</span><span class="sh_symbol">();</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cost<span class="sh_symbol">.</span><span class="sh_function">setCostId</span><span class="sh_symbol">(</span>rs<span class="sh_symbol">.</span><span class="sh_function">getInt</span><span class="sh_symbol">(</span><span class="sh_string">"cost_id"</span><span class="sh_symbol">));</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cost<span class="sh_symbol">.</span><span class="sh_function">setName</span><span class="sh_symbol">(</span>rs<span class="sh_symbol">.</span><span class="sh_function">getString</span><span class="sh_symbol">(</span><span class="sh_string">"name"</span><span class="sh_symbol">));</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cost<span class="sh_symbol">.</span><span class="sh_function">setBaseDuration</span><span class="sh_symbol">(</span>rs<span class="sh_symbol">.</span><span class="sh_function">getInt</span><span class="sh_symbol">(</span><span class="sh_string">"base_duration"</span><span class="sh_symbol">));</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cost<span class="sh_symbol">.</span><span class="sh_function">setBaseCost</span><span class="sh_symbol">(</span>rs<span class="sh_symbol">.</span><span class="sh_function">getDouble</span><span class="sh_symbol">(</span><span class="sh_string">"base_cost"</span><span class="sh_symbol">));</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cost<span class="sh_symbol">.</span><span class="sh_function">setUnitCost</span><span class="sh_symbol">(</span>rs<span class="sh_symbol">.</span><span class="sh_function">getDouble</span><span class="sh_symbol">(</span><span class="sh_string">"unit_cost"</span><span class="sh_symbol">));</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cost<span class="sh_symbol">.</span><span class="sh_function">setStatus</span><span class="sh_symbol">(</span>rs<span class="sh_symbol">.</span><span class="sh_function">getString</span><span class="sh_symbol">(</span><span class="sh_string">"status"</span><span class="sh_symbol">));</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cost<span class="sh_symbol">.</span><span class="sh_function">setDescr</span><span class="sh_symbol">(</span>rs<span class="sh_symbol">.</span><span class="sh_function">getString</span><span class="sh_symbol">(</span><span class="sh_string">"descr"</span><span class="sh_symbol">));</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cost<span class="sh_symbol">.</span><span class="sh_function">setCreatime</span><span class="sh_symbol">(</span>rs<span class="sh_symbol">.</span><span class="sh_function">getTimestamp</span><span class="sh_symbol">(</span><span class="sh_string">"creatime"</span><span class="sh_symbol">));</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cost<span class="sh_symbol">.</span><span class="sh_function">setStartime</span><span class="sh_symbol">(</span>rs<span class="sh_symbol">.</span><span class="sh_function">getTimestamp</span><span class="sh_symbol">(</span><span class="sh_string">"startime"</span><span class="sh_symbol">));</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cost<span class="sh_symbol">.</span><span class="sh_function">setCostType</span><span class="sh_symbol">(</span>rs<span class="sh_symbol">.</span><span class="sh_function">getString</span><span class="sh_symbol">(</span><span class="sh_string">"cost_type"</span><span class="sh_symbol">));</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;list<span class="sh_symbol">.</span><span class="sh_function">add</span><span class="sh_symbol">(</span>cost<span class="sh_symbol">);</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_cbracket">}</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_cbracket">}</span> <span class="sh_keyword">catch</span> <span class="sh_symbol">(</span>SQLException e<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;e<span class="sh_symbol">.</span><span class="sh_function">printStackTrace</span><span class="sh_symbol">();</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">throw</span> <span class="sh_keyword">new</span> <span class="sh_function">RuntimeException</span><span class="sh_symbol">(</span><span class="sh_string">"查询资费失败"</span><span class="sh_symbol">,</span> e<span class="sh_symbol">);</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_cbracket">}</span> <span class="sh_keyword">finally</span> <span class="sh_cbracket">{</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">try</span> <span class="sh_cbracket">{</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;conn<span class="sh_symbol">.</span><span class="sh_function">close</span><span class="sh_symbol">();</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_cbracket">}</span> <span class="sh_keyword">catch</span> <span class="sh_symbol">(</span>SQLException e<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;e<span class="sh_symbol">.</span><span class="sh_function">printStackTrace</span><span class="sh_symbol">();</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_cbracket">}</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_cbracket">}</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">return</span> list<span class="sh_symbol">;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_cbracket">}</span></li><li><span style="display:none;">&nbsp;</span></li><li><span class="sh_cbracket">}</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">package com.tarena.dao;

import java.io.Serializable;
import java.sql.Connection;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.util.ArrayList;
import java.util.List;

import javax.annotation.Resource;
import javax.sql.DataSource;

import org.springframework.stereotype.Repository;

import com.tarena.entity.Cost;

@Repository
public class JdbcCostDao implements CostDao, Serializable {
	
	@Resource
	private DataSource dataSource;

	@Override
	public List&lt;Cost&gt; findAll() {
		List&lt;Cost&gt; list = new ArrayList&lt;Cost&gt;();
		Connection conn = null;
		try {
			conn = dataSource.getConnection();
			String sql = "select * from cost order by cost_id";
			PreparedStatement ps = conn.prepareStatement(sql);
			ResultSet rs = ps.executeQuery();
			while(rs.next()) {
				Cost cost = new Cost();
				cost.setCostId(rs.getInt("cost_id"));
				cost.setName(rs.getString("name"));
				cost.setBaseDuration(rs.getInt("base_duration"));
				cost.setBaseCost(rs.getDouble("base_cost"));
				cost.setUnitCost(rs.getDouble("unit_cost"));
				cost.setStatus(rs.getString("status"));
				cost.setDescr(rs.getString("descr"));
				cost.setCreatime(rs.getTimestamp("creatime"));
				cost.setStartime(rs.getTimestamp("startime"));
				cost.setCostType(rs.getString("cost_type"));
				list.add(cost);
			}
		} catch (SQLException e) {
			e.printStackTrace();
			throw new RuntimeException("查询资费失败", e);
		} finally {
			try {
				conn.close();
			} catch (SQLException e) {
				e.printStackTrace();
			}
		}
		
		return list;
	}

}
</pre></div></div>
      <p class="number">步骤二：在Service中增加查询业务方法</p>
      <p>创建资费业务组件CostService，代码如下：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li>package com<span class="sh_symbol">.</span>tarena<span class="sh_symbol">.</span>service<span class="sh_symbol">;</span></li><li><span style="display:none;">&nbsp;</span></li><li>import java<span class="sh_symbol">.</span>io<span class="sh_symbol">.</span>Serializable<span class="sh_symbol">;</span></li><li>import java<span class="sh_symbol">.</span>util<span class="sh_symbol">.</span>List<span class="sh_symbol">;</span></li><li><span style="display:none;">&nbsp;</span></li><li>import javax<span class="sh_symbol">.</span>annotation<span class="sh_symbol">.</span>Resource<span class="sh_symbol">;</span></li><li><span style="display:none;">&nbsp;</span></li><li>import org<span class="sh_symbol">.</span>springframework<span class="sh_symbol">.</span>stereotype<span class="sh_symbol">.</span>Service<span class="sh_symbol">;</span></li><li><span style="display:none;">&nbsp;</span></li><li>import com<span class="sh_symbol">.</span>tarena<span class="sh_symbol">.</span>dao<span class="sh_symbol">.</span>CostDao<span class="sh_symbol">;</span></li><li>import com<span class="sh_symbol">.</span>tarena<span class="sh_symbol">.</span>entity<span class="sh_symbol">.</span>Cost<span class="sh_symbol">;</span></li><li><span style="display:none;">&nbsp;</span></li><li>@Service</li><li><span class="sh_keyword">public</span> <span class="sh_keyword">class</span> CostService <span class="sh_keyword">implements</span> Serializable <span class="sh_cbracket">{</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;@Resource</li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">private</span> CostDao costDao<span class="sh_symbol">;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">public</span> List<span class="sh_symbol">&lt;</span>Cost<span class="sh_symbol">&gt;</span> <span class="sh_function">findAll</span><span class="sh_symbol">()</span> <span class="sh_cbracket">{</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">return</span> costDao<span class="sh_symbol">.</span><span class="sh_function">findAll</span><span class="sh_symbol">();</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_cbracket">}</span></li><li><span class="sh_cbracket">}</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">package com.tarena.service;

import java.io.Serializable;
import java.util.List;

import javax.annotation.Resource;

import org.springframework.stereotype.Service;

import com.tarena.dao.CostDao;
import com.tarena.entity.Cost;

@Service
public class CostService implements Serializable {
	
	@Resource
	private CostDao costDao;
	
	public List&lt;Cost&gt; findAll() {
		return costDao.findAll();
	}
}
</pre></div></div>
      <p class="number">步骤三：在Controller中处理查询请求</p>
      <p>创建资费模块处理器CostController，代码如下：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li>package com<span class="sh_symbol">.</span>tarena<span class="sh_symbol">.</span>web<span class="sh_symbol">;</span></li><li><span style="display:none;">&nbsp;</span></li><li>import java<span class="sh_symbol">.</span>io<span class="sh_symbol">.</span>Serializable<span class="sh_symbol">;</span></li><li>import java<span class="sh_symbol">.</span>util<span class="sh_symbol">.</span>List<span class="sh_symbol">;</span></li><li><span style="display:none;">&nbsp;</span></li><li>import javax<span class="sh_symbol">.</span>annotation<span class="sh_symbol">.</span>Resource<span class="sh_symbol">;</span></li><li><span style="display:none;">&nbsp;</span></li><li>import org<span class="sh_symbol">.</span>springframework<span class="sh_symbol">.</span>stereotype<span class="sh_symbol">.</span>Controller<span class="sh_symbol">;</span></li><li>import org<span class="sh_symbol">.</span>springframework<span class="sh_symbol">.</span>ui<span class="sh_symbol">.</span>ModelMap<span class="sh_symbol">;</span></li><li>import org<span class="sh_symbol">.</span>springframework<span class="sh_symbol">.</span>web<span class="sh_symbol">.</span>bind<span class="sh_symbol">.</span>annotation<span class="sh_symbol">.</span>RequestMapping<span class="sh_symbol">;</span></li><li><span style="display:none;">&nbsp;</span></li><li>import com<span class="sh_symbol">.</span>tarena<span class="sh_symbol">.</span>entity<span class="sh_symbol">.</span>Cost<span class="sh_symbol">;</span></li><li>import com<span class="sh_symbol">.</span>tarena<span class="sh_symbol">.</span>service<span class="sh_symbol">.</span>CostService<span class="sh_symbol">;</span></li><li><span style="display:none;">&nbsp;</span></li><li>@Controller</li><li>@<span class="sh_function">RequestMapping</span><span class="sh_symbol">(</span><span class="sh_string">"/cost"</span><span class="sh_symbol">)</span></li><li><span class="sh_keyword">public</span> <span class="sh_keyword">class</span> CostController <span class="sh_keyword">implements</span> Serializable <span class="sh_cbracket">{</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;@Resource</li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">private</span> CostService costService<span class="sh_symbol">;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;@<span class="sh_function">RequestMapping</span><span class="sh_symbol">(</span><span class="sh_string">"/find.do"</span><span class="sh_symbol">)</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">public</span> <span class="sh_predef_func">String</span> <span class="sh_function">find</span><span class="sh_symbol">(</span>ModelMap model<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;List<span class="sh_symbol">&lt;</span>Cost<span class="sh_symbol">&gt;</span> list <span class="sh_symbol">=</span> costService<span class="sh_symbol">.</span><span class="sh_function">findAll</span><span class="sh_symbol">();</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;model<span class="sh_symbol">.</span><span class="sh_function">addAttribute</span><span class="sh_symbol">(</span><span class="sh_string">"costs"</span><span class="sh_symbol">,</span> list<span class="sh_symbol">);</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">return</span> <span class="sh_string">"cost/cost_list"</span><span class="sh_symbol">;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_cbracket">}</span></li><li><span style="display:none;">&nbsp;</span></li><li><span class="sh_cbracket">}</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">package com.tarena.web;

import java.io.Serializable;
import java.util.List;

import javax.annotation.Resource;

import org.springframework.stereotype.Controller;
import org.springframework.ui.ModelMap;
import org.springframework.web.bind.annotation.RequestMapping;

import com.tarena.entity.Cost;
import com.tarena.service.CostService;

@Controller
@RequestMapping("/cost")
public class CostController implements Serializable {
	
	@Resource
	private CostService costService;
	
	@RequestMapping("/find.do")
	public String find(ModelMap model) {
		List&lt;Cost&gt; list = costService.findAll();
		model.addAttribute("costs", list);
		return "cost/cost_list";
	}

}
</pre></div></div>
      <p class="number">步骤四：资费列表页面</p>
      <p>在WEB-INF/cost下创建资费列表页面cost_list.jsp，代码如下：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">&lt;%</span>@page pageEncoding<span class="sh_symbol">=</span><span class="sh_string">"utf-8"</span><span class="sh_symbol">%&gt;</span></li><li><span class="sh_symbol">&lt;%</span>@taglib uri<span class="sh_symbol">=</span><span class="sh_string">"http://java.sun.com/jsp/jstl/core"</span> prefix<span class="sh_symbol">=</span><span class="sh_string">"c"</span><span class="sh_symbol">%&gt;</span></li><li><span class="sh_symbol">&lt;!</span>DOCTYPE html PUBLIC <span class="sh_string">"-//W3C//DTD XHTML 1.0 Transitional//EN"</span> <span class="sh_string">"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"</span><span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;</span>html xmlns<span class="sh_symbol">=</span><span class="sh_string">"http://www.w3.org/1999/xhtml"</span><span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;</span>head<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;</span>meta http<span class="sh_symbol">-</span>equiv<span class="sh_symbol">=</span><span class="sh_string">"Content-Type"</span> content<span class="sh_symbol">=</span><span class="sh_string">"text/html; charset=utf-8"</span> <span class="sh_symbol">/&gt;</span></li><li><span class="sh_symbol">&lt;</span>title<span class="sh_symbol">&gt;</span>达内－NetCTOSS<span class="sh_symbol">&lt;/</span>title<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;</span>link type<span class="sh_symbol">=</span><span class="sh_string">"text/css"</span> rel<span class="sh_symbol">=</span><span class="sh_string">"stylesheet"</span> media<span class="sh_symbol">=</span><span class="sh_string">"all"</span> href<span class="sh_symbol">=</span><span class="sh_string">"../styles/global.css"</span> <span class="sh_symbol">/&gt;</span></li><li><span class="sh_symbol">&lt;</span>link type<span class="sh_symbol">=</span><span class="sh_string">"text/css"</span> rel<span class="sh_symbol">=</span><span class="sh_string">"stylesheet"</span> media<span class="sh_symbol">=</span><span class="sh_string">"all"</span> href<span class="sh_symbol">=</span><span class="sh_string">"../styles/global_color.css"</span> <span class="sh_symbol">/&gt;</span></li><li><span class="sh_symbol">&lt;</span>script language<span class="sh_symbol">=</span><span class="sh_string">"javascript"</span> type<span class="sh_symbol">=</span><span class="sh_string">"text/javascript"</span><span class="sh_symbol">&gt;</span></li><li>            <span class="sh_comment">//排序按钮的点击事件</span></li><li><span class="sh_keyword">function</span> <span class="sh_function">sort</span><span class="sh_symbol">(</span>btnObj<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span></li><li><span class="sh_keyword">if</span> <span class="sh_symbol">(</span>btnObj<span class="sh_symbol">.</span>className <span class="sh_symbol">==</span> <span class="sh_string">"sort_desc"</span><span class="sh_symbol">)</span></li><li>                    btnObj<span class="sh_symbol">.</span>className <span class="sh_symbol">=</span> <span class="sh_string">"sort_asc"</span><span class="sh_symbol">;</span></li><li><span class="sh_keyword">else</span></li><li>                    btnObj<span class="sh_symbol">.</span>className <span class="sh_symbol">=</span> <span class="sh_string">"sort_desc"</span><span class="sh_symbol">;</span></li><li>            <span class="sh_cbracket">}</span></li><li><span style="display:none;">&nbsp;</span></li><li>            <span class="sh_comment">//启用</span></li><li><span class="sh_keyword">function</span> <span class="sh_function">startFee</span><span class="sh_symbol">()</span> <span class="sh_cbracket">{</span></li><li>                <span class="sh_keyword">var</span> r <span class="sh_symbol">=</span> window<span class="sh_symbol">.</span><span class="sh_function">confirm</span><span class="sh_symbol">(</span><span class="sh_string">"确定要启用此资费吗？资费启用后将不能修改和删除。"</span><span class="sh_symbol">);</span></li><li>document<span class="sh_symbol">.</span><span class="sh_function">getElementById</span><span class="sh_symbol">(</span><span class="sh_string">"operate_result_info"</span><span class="sh_symbol">).</span>style<span class="sh_symbol">.</span>display <span class="sh_symbol">=</span> <span class="sh_string">"block"</span><span class="sh_symbol">;</span></li><li>            <span class="sh_cbracket">}</span></li><li>            <span class="sh_comment">//删除</span></li><li><span class="sh_keyword">function</span> <span class="sh_function">deleteFee</span><span class="sh_symbol">()</span> <span class="sh_cbracket">{</span></li><li>                <span class="sh_keyword">var</span> r <span class="sh_symbol">=</span> window<span class="sh_symbol">.</span><span class="sh_function">confirm</span><span class="sh_symbol">(</span><span class="sh_string">"确定要删除此资费吗？"</span><span class="sh_symbol">);</span></li><li>document<span class="sh_symbol">.</span><span class="sh_function">getElementById</span><span class="sh_symbol">(</span><span class="sh_string">"operate_result_info"</span><span class="sh_symbol">).</span>style<span class="sh_symbol">.</span>display <span class="sh_symbol">=</span> <span class="sh_string">"block"</span><span class="sh_symbol">;</span></li><li>            <span class="sh_cbracket">}</span></li><li><span class="sh_symbol">&lt;/</span>script<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;/</span>head<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;</span>body<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;!--</span>Logo区域开始<span class="sh_symbol">--&gt;</span></li><li><span class="sh_symbol">&lt;</span>div id<span class="sh_symbol">=</span><span class="sh_string">"header"</span><span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;</span>img src<span class="sh_symbol">=</span><span class="sh_string">"../images/logo.png"</span> alt<span class="sh_symbol">=</span><span class="sh_string">"logo"</span> <span class="sh_keyword">class</span><span class="sh_symbol">=</span><span class="sh_string">"left"</span><span class="sh_symbol">/&gt;</span></li><li><span class="sh_symbol">&lt;</span>a href<span class="sh_symbol">=</span><span class="sh_string">"#"</span><span class="sh_symbol">&gt;[</span>退出<span class="sh_symbol">]&lt;/</span>a<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;/</span>div<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;!--</span>Logo区域结束<span class="sh_symbol">--&gt;</span></li><li><span class="sh_symbol">&lt;!--</span>导航区域开始<span class="sh_symbol">--&gt;</span></li><li><span class="sh_symbol">&lt;</span>div id<span class="sh_symbol">=</span><span class="sh_string">"navi"</span><span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;</span>ul id<span class="sh_symbol">=</span><span class="sh_string">"menu"</span><span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;</span>li<span class="sh_symbol">&gt;&lt;</span>a href<span class="sh_symbol">=</span><span class="sh_string">"../index.html"</span> <span class="sh_keyword">class</span><span class="sh_symbol">=</span><span class="sh_string">"index_off"</span><span class="sh_symbol">&gt;&lt;</span><span class="sh_regexp">/a&gt;&lt;/</span>li<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;</span>li<span class="sh_symbol">&gt;&lt;</span>a href<span class="sh_symbol">=</span><span class="sh_string">"../role/role_list.html"</span> <span class="sh_keyword">class</span><span class="sh_symbol">=</span><span class="sh_string">"role_off"</span><span class="sh_symbol">&gt;&lt;</span><span class="sh_regexp">/a&gt;&lt;/</span>li<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;</span>li<span class="sh_symbol">&gt;&lt;</span>a href<span class="sh_symbol">=</span><span class="sh_string">"../admin/admin_list.html"</span> <span class="sh_keyword">class</span><span class="sh_symbol">=</span><span class="sh_string">"admin_off"</span><span class="sh_symbol">&gt;&lt;</span><span class="sh_regexp">/a&gt;&lt;/</span>li<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;</span>li<span class="sh_symbol">&gt;&lt;</span>a href<span class="sh_symbol">=</span><span class="sh_string">"../fee/fee_list.html"</span> <span class="sh_keyword">class</span><span class="sh_symbol">=</span><span class="sh_string">"fee_on"</span><span class="sh_symbol">&gt;&lt;</span><span class="sh_regexp">/a&gt;&lt;/</span>li<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;</span>li<span class="sh_symbol">&gt;&lt;</span>a href<span class="sh_symbol">=</span><span class="sh_string">"../account/account_list.html"</span> <span class="sh_keyword">class</span><span class="sh_symbol">=</span><span class="sh_string">"account_off"</span><span class="sh_symbol">&gt;&lt;</span><span class="sh_regexp">/a&gt;&lt;/</span>li<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;</span>li<span class="sh_symbol">&gt;&lt;</span>a href<span class="sh_symbol">=</span><span class="sh_string">"../service/service_list.html"</span> <span class="sh_keyword">class</span><span class="sh_symbol">=</span><span class="sh_string">"service_off"</span><span class="sh_symbol">&gt;&lt;</span><span class="sh_regexp">/a&gt;&lt;/</span>li<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;</span>li<span class="sh_symbol">&gt;&lt;</span>a href<span class="sh_symbol">=</span><span class="sh_string">"../bill/bill_list.html"</span> <span class="sh_keyword">class</span><span class="sh_symbol">=</span><span class="sh_string">"bill_off"</span><span class="sh_symbol">&gt;&lt;</span><span class="sh_regexp">/a&gt;&lt;/</span>li<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;</span>li<span class="sh_symbol">&gt;&lt;</span>a href<span class="sh_symbol">=</span><span class="sh_string">"../report/report_list.html"</span> <span class="sh_keyword">class</span><span class="sh_symbol">=</span><span class="sh_string">"report_off"</span><span class="sh_symbol">&gt;&lt;</span><span class="sh_regexp">/a&gt;&lt;/</span>li<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;</span>li<span class="sh_symbol">&gt;&lt;</span>a href<span class="sh_symbol">=</span><span class="sh_string">"../user/user_info.html"</span> <span class="sh_keyword">class</span><span class="sh_symbol">=</span><span class="sh_string">"information_off"</span><span class="sh_symbol">&gt;&lt;</span><span class="sh_regexp">/a&gt;&lt;/</span>li<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;</span>li<span class="sh_symbol">&gt;&lt;</span>a href<span class="sh_symbol">=</span><span class="sh_string">"../user/user_modi_pwd.html"</span> <span class="sh_keyword">class</span><span class="sh_symbol">=</span><span class="sh_string">"password_off"</span><span class="sh_symbol">&gt;&lt;</span><span class="sh_regexp">/a&gt;&lt;/</span>li<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;/</span>ul<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;/</span>div<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;!--</span>导航区域结束<span class="sh_symbol">--&gt;</span></li><li><span class="sh_symbol">&lt;!--</span>主要区域开始<span class="sh_symbol">--&gt;</span></li><li><span class="sh_symbol">&lt;</span>div id<span class="sh_symbol">=</span><span class="sh_string">"main"</span><span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;</span>form action<span class="sh_symbol">=</span><span class="sh_string">""</span> method<span class="sh_symbol">=</span><span class="sh_string">""</span><span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;!--</span>排序<span class="sh_symbol">--&gt;</span></li><li><span class="sh_symbol">&lt;</span>div <span class="sh_keyword">class</span><span class="sh_symbol">=</span><span class="sh_string">"search_add"</span><span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;</span>div<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;!--&lt;</span>input type<span class="sh_symbol">=</span><span class="sh_string">"button"</span> value<span class="sh_symbol">=</span><span class="sh_string">"月租"</span> <span class="sh_keyword">class</span><span class="sh_symbol">=</span><span class="sh_string">"sort_asc"</span> onclick<span class="sh_symbol">=</span><span class="sh_string">"sort(this);"</span> <span class="sh_symbol">/&gt;--&gt;</span></li><li><span class="sh_symbol">&lt;</span>input type<span class="sh_symbol">=</span><span class="sh_string">"button"</span> value<span class="sh_symbol">=</span><span class="sh_string">"基费"</span> <span class="sh_keyword">class</span><span class="sh_symbol">=</span><span class="sh_string">"sort_asc"</span> onclick<span class="sh_symbol">=</span><span class="sh_string">"sort(this);"</span> <span class="sh_symbol">/&gt;</span></li><li><span class="sh_symbol">&lt;</span>input type<span class="sh_symbol">=</span><span class="sh_string">"button"</span> value<span class="sh_symbol">=</span><span class="sh_string">"时长"</span> <span class="sh_keyword">class</span><span class="sh_symbol">=</span><span class="sh_string">"sort_asc"</span> onclick<span class="sh_symbol">=</span><span class="sh_string">"sort(this);"</span> <span class="sh_symbol">/&gt;</span></li><li><span class="sh_symbol">&lt;/</span>div<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;</span>input type<span class="sh_symbol">=</span><span class="sh_string">"button"</span> value<span class="sh_symbol">=</span><span class="sh_string">"增加"</span> <span class="sh_keyword">class</span><span class="sh_symbol">=</span><span class="sh_string">"btn_add"</span> onclick<span class="sh_symbol">=</span><span class="sh_string">"location.href='fee_add.html';"</span> <span class="sh_symbol">/&gt;</span></li><li><span class="sh_symbol">&lt;/</span>div<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;!--</span>启用操作的操作提示<span class="sh_symbol">--&gt;</span></li><li><span class="sh_symbol">&lt;</span>div id<span class="sh_symbol">=</span><span class="sh_string">"operate_result_info"</span> <span class="sh_keyword">class</span><span class="sh_symbol">=</span><span class="sh_string">"operate_success"</span><span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;</span>img src<span class="sh_symbol">=</span><span class="sh_string">"../images/close.png"</span> onclick<span class="sh_symbol">=</span><span class="sh_string">"this.parentNode.style.display='none';"</span> <span class="sh_symbol">/&gt;</span></li><li>删除成功！</li><li><span class="sh_symbol">&lt;/</span>div<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;!--</span>数据区域：用表格展示数据<span class="sh_symbol">--&gt;</span></li><li><span class="sh_symbol">&lt;</span>div id<span class="sh_symbol">=</span><span class="sh_string">"data"</span><span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;</span>table id<span class="sh_symbol">=</span><span class="sh_string">"datalist"</span><span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;</span>tr<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;</span>th<span class="sh_symbol">&gt;</span>资费ID<span class="sh_symbol">&lt;/</span>th<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;</span>th <span class="sh_keyword">class</span><span class="sh_symbol">=</span><span class="sh_string">"width100"</span><span class="sh_symbol">&gt;</span>资费名称<span class="sh_symbol">&lt;/</span>th<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;</span>th<span class="sh_symbol">&gt;</span>基本时长<span class="sh_symbol">&lt;/</span>th<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;</span>th<span class="sh_symbol">&gt;</span>基本费用<span class="sh_symbol">&lt;/</span>th<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;</span>th<span class="sh_symbol">&gt;</span>单位费用<span class="sh_symbol">&lt;/</span>th<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;</span>th<span class="sh_symbol">&gt;</span>创建时间<span class="sh_symbol">&lt;/</span>th<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;</span>th<span class="sh_symbol">&gt;</span>开通时间<span class="sh_symbol">&lt;/</span>th<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;</span>th <span class="sh_keyword">class</span><span class="sh_symbol">=</span><span class="sh_string">"width50"</span><span class="sh_symbol">&gt;</span>状态<span class="sh_symbol">&lt;/</span>th<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;</span>th <span class="sh_keyword">class</span><span class="sh_symbol">=</span><span class="sh_string">"width200"</span><span class="sh_symbol">&gt;&lt;/</span>th<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;/</span>tr<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;</span>c<span class="sh_symbol">:</span>forEach items<span class="sh_symbol">=</span><span class="sh_string">"${costs}"</span> <span class="sh_keyword">var</span><span class="sh_symbol">=</span><span class="sh_string">"c"</span><span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;</span>tr<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;</span>td<span class="sh_symbol">&gt;</span>$<span class="sh_cbracket">{</span>c<span class="sh_symbol">.</span>costId<span class="sh_cbracket">}</span><span class="sh_symbol">&lt;/</span>td<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;</span>td<span class="sh_symbol">&gt;&lt;</span>a href<span class="sh_symbol">=</span><span class="sh_string">"fee_detail.html"</span><span class="sh_symbol">&gt;</span>$<span class="sh_cbracket">{</span>c<span class="sh_symbol">.</span>name<span class="sh_cbracket">}</span><span class="sh_symbol">&lt;</span><span class="sh_regexp">/a&gt;&lt;/</span>td<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;</span>td<span class="sh_symbol">&gt;</span>$<span class="sh_cbracket">{</span>c<span class="sh_symbol">.</span>baseDuration<span class="sh_cbracket">}</span><span class="sh_symbol">&lt;/</span>td<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;</span>td<span class="sh_symbol">&gt;</span>$<span class="sh_cbracket">{</span>c<span class="sh_symbol">.</span>baseCost<span class="sh_cbracket">}</span><span class="sh_symbol">&lt;/</span>td<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;</span>td<span class="sh_symbol">&gt;</span>$<span class="sh_cbracket">{</span>c<span class="sh_symbol">.</span>unitCost<span class="sh_cbracket">}</span><span class="sh_symbol">&lt;/</span>td<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;</span>td<span class="sh_symbol">&gt;</span>$<span class="sh_cbracket">{</span>c<span class="sh_symbol">.</span>creatime<span class="sh_cbracket">}</span><span class="sh_symbol">&lt;/</span>td<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;</span>td<span class="sh_symbol">&gt;</span>$<span class="sh_cbracket">{</span>c<span class="sh_symbol">.</span>startime<span class="sh_cbracket">}</span><span class="sh_symbol">&lt;/</span>td<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;</span>td<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>c<span class="sh_symbol">:</span><span class="sh_keyword">if</span> test<span class="sh_symbol">=</span><span class="sh_string">"${c.status==0}"</span><span class="sh_symbol">&gt;</span>开通<span class="sh_symbol">&lt;/</span>c<span class="sh_symbol">:</span><span class="sh_keyword">if</span><span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>c<span class="sh_symbol">:</span><span class="sh_keyword">if</span> test<span class="sh_symbol">=</span><span class="sh_string">"${c.status==1}"</span><span class="sh_symbol">&gt;</span>暂停<span class="sh_symbol">&lt;/</span>c<span class="sh_symbol">:</span><span class="sh_keyword">if</span><span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;/</span>td<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;</span>td<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;</span>input type<span class="sh_symbol">=</span><span class="sh_string">"button"</span> value<span class="sh_symbol">=</span><span class="sh_string">"启用"</span> <span class="sh_keyword">class</span><span class="sh_symbol">=</span><span class="sh_string">"btn_start"</span> onclick<span class="sh_symbol">=</span><span class="sh_string">"startFee();"</span> <span class="sh_symbol">/&gt;</span></li><li><span class="sh_symbol">&lt;</span>input type<span class="sh_symbol">=</span><span class="sh_string">"button"</span> value<span class="sh_symbol">=</span><span class="sh_string">"修改"</span> <span class="sh_keyword">class</span><span class="sh_symbol">=</span><span class="sh_string">"btn_modify"</span> onclick<span class="sh_symbol">=</span><span class="sh_string">"location.href='fee_modi.html';"</span> <span class="sh_symbol">/&gt;</span></li><li><span class="sh_symbol">&lt;</span>input type<span class="sh_symbol">=</span><span class="sh_string">"button"</span> value<span class="sh_symbol">=</span><span class="sh_string">"删除"</span> <span class="sh_keyword">class</span><span class="sh_symbol">=</span><span class="sh_string">"btn_delete"</span> onclick<span class="sh_symbol">=</span><span class="sh_string">"deleteFee();"</span> <span class="sh_symbol">/&gt;</span></li><li><span class="sh_symbol">&lt;/</span>td<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;/</span>tr<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;/</span>c<span class="sh_symbol">:</span>forEach<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;/</span>table<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;</span>p<span class="sh_symbol">&gt;</span>业务说明：<span class="sh_symbol">&lt;</span><span class="sh_normal">br </span><span class="sh_symbol">/&gt;</span></li><li>                    <span class="sh_number">1</span>、创建资费时，状态为暂停，记载创建时间；<span class="sh_symbol">&lt;</span><span class="sh_normal">br </span><span class="sh_symbol">/&gt;</span></li><li>                    <span class="sh_number">2</span>、暂停状态下，可修改，可删除；<span class="sh_symbol">&lt;</span><span class="sh_normal">br </span><span class="sh_symbol">/&gt;</span></li><li>                    <span class="sh_number">3</span>、开通后，记载开通时间，且开通后不能修改、不能再停用、也不能删除；<span class="sh_symbol">&lt;</span><span class="sh_normal">br </span><span class="sh_symbol">/&gt;</span></li><li>                    <span class="sh_number">4</span>、业务账号修改资费时，在下月底统一触发，修改其关联的资费ID（此触发动作由程序处理）</li><li><span class="sh_symbol">&lt;/</span>p<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;/</span>div<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;!--</span>分页<span class="sh_symbol">--&gt;</span></li><li><span class="sh_symbol">&lt;</span>div id<span class="sh_symbol">=</span><span class="sh_string">"pages"</span><span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>a href<span class="sh_symbol">=</span><span class="sh_string">"#"</span><span class="sh_symbol">&gt;</span>上一页<span class="sh_symbol">&lt;/</span>a<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;</span>a href<span class="sh_symbol">=</span><span class="sh_string">"#"</span> <span class="sh_keyword">class</span><span class="sh_symbol">=</span><span class="sh_string">"current_page"</span><span class="sh_symbol">&gt;</span><span class="sh_number">1</span><span class="sh_symbol">&lt;/</span>a<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;</span>a href<span class="sh_symbol">=</span><span class="sh_string">"#"</span><span class="sh_symbol">&gt;</span><span class="sh_number">2</span><span class="sh_symbol">&lt;/</span>a<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;</span>a href<span class="sh_symbol">=</span><span class="sh_string">"#"</span><span class="sh_symbol">&gt;</span><span class="sh_number">3</span><span class="sh_symbol">&lt;/</span>a<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;</span>a href<span class="sh_symbol">=</span><span class="sh_string">"#"</span><span class="sh_symbol">&gt;</span><span class="sh_number">4</span><span class="sh_symbol">&lt;/</span>a<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;</span>a href<span class="sh_symbol">=</span><span class="sh_string">"#"</span><span class="sh_symbol">&gt;</span><span class="sh_number">5</span><span class="sh_symbol">&lt;/</span>a<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;</span>a href<span class="sh_symbol">=</span><span class="sh_string">"#"</span><span class="sh_symbol">&gt;</span>下一页<span class="sh_symbol">&lt;/</span>a<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;/</span>div<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;/</span>form<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;/</span>div<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;!--</span>主要区域结束<span class="sh_symbol">--&gt;</span></li><li><span class="sh_symbol">&lt;</span>div id<span class="sh_symbol">=</span><span class="sh_string">"footer"</span><span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;</span>p<span class="sh_symbol">&gt;[</span>源自北美的技术，最优秀的师资，最真实的企业环境，最适用的实战项目<span class="sh_symbol">]&lt;/</span>p<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;</span>p<span class="sh_symbol">&gt;</span>版权所有<span class="sh_symbol">(</span>C<span class="sh_symbol">)</span>加拿大达内IT培训集团公司<span class="sh_symbol">&lt;/</span>p<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;/</span>div<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;/</span>body<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;/</span>html<span class="sh_symbol">&gt;</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">&lt;%@page pageEncoding="utf-8"%&gt;
&lt;%@taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%&gt;
&lt;!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"&gt;
&lt;html xmlns="http://www.w3.org/1999/xhtml"&gt;
&lt;head&gt;
&lt;meta http-equiv="Content-Type" content="text/html; charset=utf-8" /&gt;
&lt;title&gt;达内－NetCTOSS&lt;/title&gt;
&lt;link type="text/css" rel="stylesheet" media="all" href="../styles/global.css" /&gt;
&lt;link type="text/css" rel="stylesheet" media="all" href="../styles/global_color.css" /&gt;
&lt;script language="javascript" type="text/javascript"&gt;
            //排序按钮的点击事件
function sort(btnObj) {
if (btnObj.className == "sort_desc")
                    btnObj.className = "sort_asc";
else
                    btnObj.className = "sort_desc";
            }

            //启用
function startFee() {
                var r = window.confirm("确定要启用此资费吗？资费启用后将不能修改和删除。");
document.getElementById("operate_result_info").style.display = "block";
            }
            //删除
function deleteFee() {
                var r = window.confirm("确定要删除此资费吗？");
document.getElementById("operate_result_info").style.display = "block";
            }
&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;!--Logo区域开始--&gt;
&lt;div id="header"&gt;
&lt;img src="../images/logo.png" alt="logo" class="left"/&gt;
&lt;a href="#"&gt;[退出]&lt;/a&gt;
&lt;/div&gt;
&lt;!--Logo区域结束--&gt;
&lt;!--导航区域开始--&gt;
&lt;div id="navi"&gt;
&lt;ul id="menu"&gt;
&lt;li&gt;&lt;a href="../index.html" class="index_off"&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="../role/role_list.html" class="role_off"&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="../admin/admin_list.html" class="admin_off"&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="../fee/fee_list.html" class="fee_on"&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="../account/account_list.html" class="account_off"&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="../service/service_list.html" class="service_off"&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="../bill/bill_list.html" class="bill_off"&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="../report/report_list.html" class="report_off"&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="../user/user_info.html" class="information_off"&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="../user/user_modi_pwd.html" class="password_off"&gt;&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;!--导航区域结束--&gt;
&lt;!--主要区域开始--&gt;
&lt;div id="main"&gt;
&lt;form action="" method=""&gt;
&lt;!--排序--&gt;
&lt;div class="search_add"&gt;
&lt;div&gt;
&lt;!--&lt;input type="button" value="月租" class="sort_asc" onclick="sort(this);" /&gt;--&gt;
&lt;input type="button" value="基费" class="sort_asc" onclick="sort(this);" /&gt;
&lt;input type="button" value="时长" class="sort_asc" onclick="sort(this);" /&gt;
&lt;/div&gt;
&lt;input type="button" value="增加" class="btn_add" onclick="location.href='fee_add.html';" /&gt;
&lt;/div&gt;
&lt;!--启用操作的操作提示--&gt;
&lt;div id="operate_result_info" class="operate_success"&gt;
&lt;img src="../images/close.png" onclick="this.parentNode.style.display='none';" /&gt;
删除成功！
&lt;/div&gt;
&lt;!--数据区域：用表格展示数据--&gt;
&lt;div id="data"&gt;
&lt;table id="datalist"&gt;
&lt;tr&gt;
&lt;th&gt;资费ID&lt;/th&gt;
&lt;th class="width100"&gt;资费名称&lt;/th&gt;
&lt;th&gt;基本时长&lt;/th&gt;
&lt;th&gt;基本费用&lt;/th&gt;
&lt;th&gt;单位费用&lt;/th&gt;
&lt;th&gt;创建时间&lt;/th&gt;
&lt;th&gt;开通时间&lt;/th&gt;
&lt;th class="width50"&gt;状态&lt;/th&gt;
&lt;th class="width200"&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;c:forEach items="${costs}" var="c"&gt;
&lt;tr&gt;
&lt;td&gt;${c.costId}&lt;/td&gt;
&lt;td&gt;&lt;a href="fee_detail.html"&gt;${c.name}&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;${c.baseDuration}&lt;/td&gt;
&lt;td&gt;${c.baseCost}&lt;/td&gt;
&lt;td&gt;${c.unitCost}&lt;/td&gt;
&lt;td&gt;${c.creatime}&lt;/td&gt;
&lt;td&gt;${c.startime}&lt;/td&gt;
&lt;td&gt;
	&lt;c:if test="${c.status==0}"&gt;开通&lt;/c:if&gt;
	&lt;c:if test="${c.status==1}"&gt;暂停&lt;/c:if&gt;
&lt;/td&gt;
&lt;td&gt;
&lt;input type="button" value="启用" class="btn_start" onclick="startFee();" /&gt;
&lt;input type="button" value="修改" class="btn_modify" onclick="location.href='fee_modi.html';" /&gt;
&lt;input type="button" value="删除" class="btn_delete" onclick="deleteFee();" /&gt;
&lt;/td&gt;
&lt;/tr&gt;
&lt;/c:forEach&gt;
&lt;/table&gt;
&lt;p&gt;业务说明：&lt;br /&gt;
                    1、创建资费时，状态为暂停，记载创建时间；&lt;br /&gt;
                    2、暂停状态下，可修改，可删除；&lt;br /&gt;
                    3、开通后，记载开通时间，且开通后不能修改、不能再停用、也不能删除；&lt;br /&gt;
                    4、业务账号修改资费时，在下月底统一触发，修改其关联的资费ID（此触发动作由程序处理）
&lt;/p&gt;
&lt;/div&gt;
&lt;!--分页--&gt;
&lt;div id="pages"&gt;
	&lt;a href="#"&gt;上一页&lt;/a&gt;
&lt;a href="#" class="current_page"&gt;1&lt;/a&gt;
&lt;a href="#"&gt;2&lt;/a&gt;
&lt;a href="#"&gt;3&lt;/a&gt;
&lt;a href="#"&gt;4&lt;/a&gt;
&lt;a href="#"&gt;5&lt;/a&gt;
&lt;a href="#"&gt;下一页&lt;/a&gt;
&lt;/div&gt;
&lt;/form&gt;
&lt;/div&gt;
&lt;!--主要区域结束--&gt;
&lt;div id="footer"&gt;
&lt;p&gt;[源自北美的技术，最优秀的师资，最真实的企业环境，最适用的实战项目]&lt;/p&gt;
&lt;p&gt;版权所有(C)加拿大达内IT培训集团公司&lt;/p&gt;
&lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;
</pre></div></div>
      <p class="number">步骤五：测试</p>
      <p>部署项目并启动Tomcat，浏览器访问http://localhost:8088/NETCTOSS2/cost/find.do，效果如下图：</p>
      <div class="image">
        <img src="./CASE_files/image009.png">
        <p>图-9</p>
      </div>
      <h3>4.4 完整代码</h3>
      <p>建表脚本完整代码如下：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap" style="display: none;"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#">pop-up</a></pre></div><pre class="hide sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">--</span>资费信息表</li><li>create table <span class="sh_function">cost</span><span class="sh_symbol">(</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;cost_id&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_function">number</span><span class="sh_symbol">(</span><span class="sh_number">4</span><span class="sh_symbol">)</span> constraint cost_id_pk primary key<span class="sh_symbol">,</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;name&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_function">varchar</span><span class="sh_symbol">(</span><span class="sh_number">50</span><span class="sh_symbol">)</span>  not <span class="sh_keyword">null</span><span class="sh_symbol">,</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;base_duration&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_function">number</span><span class="sh_symbol">(</span><span class="sh_number">11</span><span class="sh_symbol">),</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;base_cost&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_function">number</span><span class="sh_symbol">(</span><span class="sh_number">7</span><span class="sh_symbol">,</span><span class="sh_number">2</span><span class="sh_symbol">),</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;unit_cost&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_function">number</span><span class="sh_symbol">(</span><span class="sh_number">7</span><span class="sh_symbol">,</span><span class="sh_number">4</span><span class="sh_symbol">),</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;status&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_function">char</span><span class="sh_symbol">(</span><span class="sh_number">1</span><span class="sh_symbol">),</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;descr&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_function">varchar2</span><span class="sh_symbol">(</span><span class="sh_number">100</span><span class="sh_symbol">),</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;creatime&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;date <span class="sh_keyword">default</span> sysdate <span class="sh_symbol">,</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;startime&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;date<span class="sh_symbol">,</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cost_type&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_function">char</span><span class="sh_symbol">(</span><span class="sh_number">1</span><span class="sh_symbol">)</span></li><li>  <span class="sh_symbol">);</span></li><li><span style="display:none;">&nbsp;</span></li><li>create sequence cost_seq start <span class="sh_keyword">with</span> <span class="sh_number">100</span><span class="sh_symbol">;</span></li><li><span style="display:none;">&nbsp;</span></li><li>INSERT INTO COST <span class="sh_function">VALUES</span> <span class="sh_symbol">(</span><span class="sh_number">1</span><span class="sh_symbol">,</span><span class="sh_string">'5.9元套餐'</span><span class="sh_symbol">,</span><span class="sh_number">20</span><span class="sh_symbol">,</span><span class="sh_number">5.9</span><span class="sh_symbol">,</span><span class="sh_number">0.4</span><span class="sh_symbol">,</span><span class="sh_number">0</span><span class="sh_symbol">,</span><span class="sh_string">'5.9元20小时/月,超出部分0.4元/时'</span><span class="sh_symbol">,</span>DEFAULT<span class="sh_symbol">,</span>DEFAULT<span class="sh_symbol">,</span>NULL<span class="sh_symbol">);</span></li><li>INSERT INTO COST <span class="sh_function">VALUES</span> <span class="sh_symbol">(</span><span class="sh_number">2</span><span class="sh_symbol">,</span><span class="sh_string">'6.9元套餐'</span><span class="sh_symbol">,</span><span class="sh_number">40</span><span class="sh_symbol">,</span><span class="sh_number">6.9</span><span class="sh_symbol">,</span><span class="sh_number">0.3</span><span class="sh_symbol">,</span><span class="sh_number">0</span><span class="sh_symbol">,</span><span class="sh_string">'6.9元40小时/月,超出部分0.3元/时'</span><span class="sh_symbol">,</span>DEFAULT<span class="sh_symbol">,</span>DEFAULT<span class="sh_symbol">,</span>NULL<span class="sh_symbol">);</span></li><li>INSERT INTO COST <span class="sh_function">VALUES</span> <span class="sh_symbol">(</span><span class="sh_number">3</span><span class="sh_symbol">,</span><span class="sh_string">'8.5元套餐'</span><span class="sh_symbol">,</span><span class="sh_number">100</span><span class="sh_symbol">,</span><span class="sh_number">8.5</span><span class="sh_symbol">,</span><span class="sh_number">0.2</span><span class="sh_symbol">,</span><span class="sh_number">0</span><span class="sh_symbol">,</span><span class="sh_string">'8.5元100小时/月,超出部分0.2元/时'</span><span class="sh_symbol">,</span>DEFAULT<span class="sh_symbol">,</span>DEFAULT<span class="sh_symbol">,</span>NULL<span class="sh_symbol">);</span></li><li>INSERT INTO COST <span class="sh_function">VALUES</span> <span class="sh_symbol">(</span><span class="sh_number">4</span><span class="sh_symbol">,</span><span class="sh_string">'10.5元套餐'</span><span class="sh_symbol">,</span><span class="sh_number">200</span><span class="sh_symbol">,</span><span class="sh_number">10.5</span><span class="sh_symbol">,</span><span class="sh_number">0.1</span><span class="sh_symbol">,</span><span class="sh_number">0</span><span class="sh_symbol">,</span><span class="sh_string">'10.5元200小时/月,超出部分0.1元/时'</span><span class="sh_symbol">,</span>DEFAULT<span class="sh_symbol">,</span>DEFAULT<span class="sh_symbol">,</span>NULL<span class="sh_symbol">);</span></li><li>INSERT INTO COST <span class="sh_function">VALUES</span> <span class="sh_symbol">(</span><span class="sh_number">5</span><span class="sh_symbol">,</span><span class="sh_string">'计时收费'</span><span class="sh_symbol">,</span><span class="sh_keyword">null</span><span class="sh_symbol">,</span><span class="sh_keyword">null</span><span class="sh_symbol">,</span><span class="sh_number">0.5</span><span class="sh_symbol">,</span><span class="sh_number">0</span><span class="sh_symbol">,</span><span class="sh_string">'0.5元/时,不使用不收费'</span><span class="sh_symbol">,</span>DEFAULT<span class="sh_symbol">,</span>DEFAULT<span class="sh_symbol">,</span>NULL<span class="sh_symbol">);</span></li><li>INSERT INTO COST <span class="sh_function">VALUES</span> <span class="sh_symbol">(</span><span class="sh_number">6</span><span class="sh_symbol">,</span><span class="sh_string">'包月'</span><span class="sh_symbol">,</span><span class="sh_keyword">null</span><span class="sh_symbol">,</span><span class="sh_number">20</span><span class="sh_symbol">,</span><span class="sh_keyword">null</span><span class="sh_symbol">,</span><span class="sh_number">0</span><span class="sh_symbol">,</span><span class="sh_string">'每月20元,不限制使用时间'</span><span class="sh_symbol">,</span>DEFAULT<span class="sh_symbol">,</span>DEFAULT<span class="sh_symbol">,</span>NULL<span class="sh_symbol">);</span></li><li>INSERT INTO COST <span class="sh_function">VALUES</span> <span class="sh_symbol">(</span><span class="sh_number">7</span><span class="sh_symbol">,</span><span class="sh_string">'mm'</span><span class="sh_symbol">,</span><span class="sh_number">10</span><span class="sh_symbol">,</span><span class="sh_number">5</span><span class="sh_symbol">,</span><span class="sh_keyword">null</span><span class="sh_symbol">,</span><span class="sh_number">0</span><span class="sh_symbol">,</span><span class="sh_string">''</span><span class="sh_symbol">,</span>DEFAULT<span class="sh_symbol">,</span>DEFAULT<span class="sh_symbol">,</span>NULL<span class="sh_symbol">);</span></li><li>INSERT INTO COST <span class="sh_function">VALUES</span> <span class="sh_symbol">(</span><span class="sh_number">8</span><span class="sh_symbol">,</span><span class="sh_string">'nn'</span><span class="sh_symbol">,</span><span class="sh_number">10</span><span class="sh_symbol">,</span><span class="sh_number">7</span><span class="sh_symbol">,</span><span class="sh_keyword">null</span><span class="sh_symbol">,</span><span class="sh_number">0</span><span class="sh_symbol">,</span><span class="sh_string">''</span><span class="sh_symbol">,</span>DEFAULT<span class="sh_symbol">,</span>DEFAULT<span class="sh_symbol">,</span>NULL<span class="sh_symbol">);</span></li><li>INSERT INTO COST <span class="sh_function">VALUES</span> <span class="sh_symbol">(</span><span class="sh_number">9</span><span class="sh_symbol">,</span><span class="sh_string">'qq'</span><span class="sh_symbol">,</span><span class="sh_number">10</span><span class="sh_symbol">,</span><span class="sh_number">4</span><span class="sh_symbol">,</span><span class="sh_keyword">null</span><span class="sh_symbol">,</span><span class="sh_number">0</span><span class="sh_symbol">,</span><span class="sh_string">''</span><span class="sh_symbol">,</span>DEFAULT<span class="sh_symbol">,</span>DEFAULT<span class="sh_symbol">,</span>NULL<span class="sh_symbol">);</span></li><li>COMMIT<span class="sh_symbol">;</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">--资费信息表
create table cost(
	cost_id			number(4) constraint cost_id_pk primary key,
	name			varchar(50)  not null,
	base_duration	number(11),
	base_cost		number(7,2),
	unit_cost		number(7,4),
	status			char(1),
	descr			varchar2(100),
	creatime		date default sysdate ,
	startime		date,
		cost_type		char(1)
  );

create sequence cost_seq start with 100;

INSERT INTO COST VALUES (1,'5.9元套餐',20,5.9,0.4,0,'5.9元20小时/月,超出部分0.4元/时',DEFAULT,DEFAULT,NULL);
INSERT INTO COST VALUES (2,'6.9元套餐',40,6.9,0.3,0,'6.9元40小时/月,超出部分0.3元/时',DEFAULT,DEFAULT,NULL);
INSERT INTO COST VALUES (3,'8.5元套餐',100,8.5,0.2,0,'8.5元100小时/月,超出部分0.2元/时',DEFAULT,DEFAULT,NULL);
INSERT INTO COST VALUES (4,'10.5元套餐',200,10.5,0.1,0,'10.5元200小时/月,超出部分0.1元/时',DEFAULT,DEFAULT,NULL);
INSERT INTO COST VALUES (5,'计时收费',null,null,0.5,0,'0.5元/时,不使用不收费',DEFAULT,DEFAULT,NULL);
INSERT INTO COST VALUES (6,'包月',null,20,null,0,'每月20元,不限制使用时间',DEFAULT,DEFAULT,NULL);
INSERT INTO COST VALUES (7,'mm',10,5,null,0,'',DEFAULT,DEFAULT,NULL);
INSERT INTO COST VALUES (8,'nn',10,7,null,0,'',DEFAULT,DEFAULT,NULL);
INSERT INTO COST VALUES (9,'qq',10,4,null,0,'',DEFAULT,DEFAULT,NULL);
COMMIT;
</pre><div class="sh_sourceCode snippet-hide"><pre><a href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#" class="snippet-revealed snippet-toggle sh_url">隐藏</a></pre></div></div><div class="snippet-reveal sh_acid snippet-wrap"><pre class="sh_sourceCode"><a href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#" class="snippet-toggle sh_url">代码</a></pre></div></div>
      <p>Cost类完整代码如下：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap" style="display: none;"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#">pop-up</a></pre></div><pre class="hide sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li>package com<span class="sh_symbol">.</span>tarena<span class="sh_symbol">.</span>entity<span class="sh_symbol">;</span></li><li><span style="display:none;">&nbsp;</span></li><li>import java<span class="sh_symbol">.</span>io<span class="sh_symbol">.</span>Serializable<span class="sh_symbol">;</span></li><li>import java<span class="sh_symbol">.</span>sql<span class="sh_symbol">.</span>Timestamp<span class="sh_symbol">;</span></li><li><span style="display:none;">&nbsp;</span></li><li><span class="sh_keyword">public</span> <span class="sh_keyword">class</span> Cost <span class="sh_keyword">implements</span> Serializable <span class="sh_cbracket">{</span></li><li><span style="display:none;">&nbsp;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">private</span> Integer costId<span class="sh_symbol">;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">private</span> <span class="sh_predef_func">String</span> name<span class="sh_symbol">;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">private</span> Integer baseDuration<span class="sh_symbol">;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">private</span> Double baseCost<span class="sh_symbol">;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">private</span> Double unitCost<span class="sh_symbol">;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">private</span> <span class="sh_predef_func">String</span> status<span class="sh_symbol">;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">private</span> <span class="sh_predef_func">String</span> descr<span class="sh_symbol">;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">private</span> Timestamp creatime<span class="sh_symbol">;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">private</span> Timestamp startime<span class="sh_symbol">;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">private</span> <span class="sh_predef_func">String</span> costType<span class="sh_symbol">;</span></li><li><span style="display:none;">&nbsp;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">public</span> Integer <span class="sh_function">getCostId</span><span class="sh_symbol">()</span> <span class="sh_cbracket">{</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">return</span> costId<span class="sh_symbol">;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_cbracket">}</span></li><li><span style="display:none;">&nbsp;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">public</span> void <span class="sh_function">setCostId</span><span class="sh_symbol">(</span>Integer costId<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">this</span><span class="sh_symbol">.</span>costId <span class="sh_symbol">=</span> costId<span class="sh_symbol">;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_cbracket">}</span></li><li><span style="display:none;">&nbsp;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">public</span> <span class="sh_predef_func">String</span> <span class="sh_function">getName</span><span class="sh_symbol">()</span> <span class="sh_cbracket">{</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">return</span> name<span class="sh_symbol">;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_cbracket">}</span></li><li><span style="display:none;">&nbsp;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">public</span> void <span class="sh_function">setName</span><span class="sh_symbol">(</span><span class="sh_predef_func">String</span> name<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">this</span><span class="sh_symbol">.</span>name <span class="sh_symbol">=</span> name<span class="sh_symbol">;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_cbracket">}</span></li><li><span style="display:none;">&nbsp;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">public</span> Integer <span class="sh_function">getBaseDuration</span><span class="sh_symbol">()</span> <span class="sh_cbracket">{</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">return</span> baseDuration<span class="sh_symbol">;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_cbracket">}</span></li><li><span style="display:none;">&nbsp;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">public</span> void <span class="sh_function">setBaseDuration</span><span class="sh_symbol">(</span>Integer baseDuration<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">this</span><span class="sh_symbol">.</span>baseDuration <span class="sh_symbol">=</span> baseDuration<span class="sh_symbol">;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_cbracket">}</span></li><li><span style="display:none;">&nbsp;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">public</span> Double <span class="sh_function">getBaseCost</span><span class="sh_symbol">()</span> <span class="sh_cbracket">{</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">return</span> baseCost<span class="sh_symbol">;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_cbracket">}</span></li><li><span style="display:none;">&nbsp;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">public</span> void <span class="sh_function">setBaseCost</span><span class="sh_symbol">(</span>Double baseCost<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">this</span><span class="sh_symbol">.</span>baseCost <span class="sh_symbol">=</span> baseCost<span class="sh_symbol">;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_cbracket">}</span></li><li><span style="display:none;">&nbsp;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">public</span> Double <span class="sh_function">getUnitCost</span><span class="sh_symbol">()</span> <span class="sh_cbracket">{</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">return</span> unitCost<span class="sh_symbol">;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_cbracket">}</span></li><li><span style="display:none;">&nbsp;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">public</span> void <span class="sh_function">setUnitCost</span><span class="sh_symbol">(</span>Double unitCost<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">this</span><span class="sh_symbol">.</span>unitCost <span class="sh_symbol">=</span> unitCost<span class="sh_symbol">;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_cbracket">}</span></li><li><span style="display:none;">&nbsp;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">public</span> <span class="sh_predef_func">String</span> <span class="sh_function">getStatus</span><span class="sh_symbol">()</span> <span class="sh_cbracket">{</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">return</span> status<span class="sh_symbol">;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_cbracket">}</span></li><li><span style="display:none;">&nbsp;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">public</span> void <span class="sh_function">setStatus</span><span class="sh_symbol">(</span><span class="sh_predef_func">String</span> status<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">this</span><span class="sh_symbol">.</span>status <span class="sh_symbol">=</span> status<span class="sh_symbol">;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_cbracket">}</span></li><li><span style="display:none;">&nbsp;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">public</span> <span class="sh_predef_func">String</span> <span class="sh_function">getDescr</span><span class="sh_symbol">()</span> <span class="sh_cbracket">{</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">return</span> descr<span class="sh_symbol">;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_cbracket">}</span></li><li><span style="display:none;">&nbsp;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">public</span> void <span class="sh_function">setDescr</span><span class="sh_symbol">(</span><span class="sh_predef_func">String</span> descr<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">this</span><span class="sh_symbol">.</span>descr <span class="sh_symbol">=</span> descr<span class="sh_symbol">;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_cbracket">}</span></li><li><span style="display:none;">&nbsp;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">public</span> Timestamp <span class="sh_function">getCreatime</span><span class="sh_symbol">()</span> <span class="sh_cbracket">{</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">return</span> creatime<span class="sh_symbol">;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_cbracket">}</span></li><li><span style="display:none;">&nbsp;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">public</span> void <span class="sh_function">setCreatime</span><span class="sh_symbol">(</span>Timestamp creatime<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">this</span><span class="sh_symbol">.</span>creatime <span class="sh_symbol">=</span> creatime<span class="sh_symbol">;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_cbracket">}</span></li><li><span style="display:none;">&nbsp;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">public</span> Timestamp <span class="sh_function">getStartime</span><span class="sh_symbol">()</span> <span class="sh_cbracket">{</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">return</span> startime<span class="sh_symbol">;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_cbracket">}</span></li><li><span style="display:none;">&nbsp;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">public</span> void <span class="sh_function">setStartime</span><span class="sh_symbol">(</span>Timestamp startime<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">this</span><span class="sh_symbol">.</span>startime <span class="sh_symbol">=</span> startime<span class="sh_symbol">;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_cbracket">}</span></li><li><span style="display:none;">&nbsp;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">public</span> <span class="sh_predef_func">String</span> <span class="sh_function">getCostType</span><span class="sh_symbol">()</span> <span class="sh_cbracket">{</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">return</span> costType<span class="sh_symbol">;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_cbracket">}</span></li><li><span style="display:none;">&nbsp;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">public</span> void <span class="sh_function">setCostType</span><span class="sh_symbol">(</span><span class="sh_predef_func">String</span> costType<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">this</span><span class="sh_symbol">.</span>costType <span class="sh_symbol">=</span> costType<span class="sh_symbol">;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_cbracket">}</span></li><li><span style="display:none;">&nbsp;</span></li><li><span class="sh_cbracket">}</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">package com.tarena.entity;

import java.io.Serializable;
import java.sql.Timestamp;

public class Cost implements Serializable {

	private Integer costId;
	private String name;
	private Integer baseDuration;
	private Double baseCost;
	private Double unitCost;
	private String status;
	private String descr;
	private Timestamp creatime;
	private Timestamp startime;
	private String costType;

	public Integer getCostId() {
		return costId;
	}

	public void setCostId(Integer costId) {
		this.costId = costId;
	}

	public String getName() {
		return name;
	}

	public void setName(String name) {
		this.name = name;
	}

	public Integer getBaseDuration() {
		return baseDuration;
	}

	public void setBaseDuration(Integer baseDuration) {
		this.baseDuration = baseDuration;
	}

	public Double getBaseCost() {
		return baseCost;
	}

	public void setBaseCost(Double baseCost) {
		this.baseCost = baseCost;
	}

	public Double getUnitCost() {
		return unitCost;
	}

	public void setUnitCost(Double unitCost) {
		this.unitCost = unitCost;
	}

	public String getStatus() {
		return status;
	}

	public void setStatus(String status) {
		this.status = status;
	}

	public String getDescr() {
		return descr;
	}

	public void setDescr(String descr) {
		this.descr = descr;
	}

	public Timestamp getCreatime() {
		return creatime;
	}

	public void setCreatime(Timestamp creatime) {
		this.creatime = creatime;
	}

	public Timestamp getStartime() {
		return startime;
	}

	public void setStartime(Timestamp startime) {
		this.startime = startime;
	}

	public String getCostType() {
		return costType;
	}

	public void setCostType(String costType) {
		this.costType = costType;
	}

}
</pre><div class="sh_sourceCode snippet-hide"><pre><a href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#" class="snippet-revealed snippet-toggle sh_url">隐藏</a></pre></div></div><div class="snippet-reveal sh_acid snippet-wrap"><pre class="sh_sourceCode"><a href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#" class="snippet-toggle sh_url">代码</a></pre></div></div>
      <p>CostDao完整代码如下：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap" style="display: none;"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#">pop-up</a></pre></div><pre class="hide sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li>package com<span class="sh_symbol">.</span>tarena<span class="sh_symbol">.</span>dao<span class="sh_symbol">;</span></li><li><span style="display:none;">&nbsp;</span></li><li>import java<span class="sh_symbol">.</span>util<span class="sh_symbol">.</span>List<span class="sh_symbol">;</span></li><li><span style="display:none;">&nbsp;</span></li><li>import com<span class="sh_symbol">.</span>tarena<span class="sh_symbol">.</span>entity<span class="sh_symbol">.</span>Cost<span class="sh_symbol">;</span></li><li><span style="display:none;">&nbsp;</span></li><li><span class="sh_keyword">public</span> <span class="sh_keyword">interface</span> CostDao <span class="sh_cbracket">{</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;List<span class="sh_symbol">&lt;</span>Cost<span class="sh_symbol">&gt;</span><span class="sh_function">findAll</span><span class="sh_symbol">();</span></li><li><span style="display:none;">&nbsp;</span></li><li><span class="sh_cbracket">}</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">package com.tarena.dao;

import java.util.List;

import com.tarena.entity.Cost;

public interface CostDao {
	
	List&lt;Cost&gt;findAll();

}
</pre><div class="sh_sourceCode snippet-hide"><pre><a href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#" class="snippet-revealed snippet-toggle sh_url">隐藏</a></pre></div></div><div class="snippet-reveal sh_acid snippet-wrap"><pre class="sh_sourceCode"><a href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#" class="snippet-toggle sh_url">代码</a></pre></div></div>
      <p>JdbcCostDao完整代码如下：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap" style="display: none;"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#">pop-up</a></pre></div><pre class="hide sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li>package com<span class="sh_symbol">.</span>tarena<span class="sh_symbol">.</span>dao<span class="sh_symbol">;</span></li><li><span style="display:none;">&nbsp;</span></li><li>import java<span class="sh_symbol">.</span>io<span class="sh_symbol">.</span>Serializable<span class="sh_symbol">;</span></li><li>import java<span class="sh_symbol">.</span>sql<span class="sh_symbol">.</span>Connection<span class="sh_symbol">;</span></li><li>import java<span class="sh_symbol">.</span>sql<span class="sh_symbol">.</span>PreparedStatement<span class="sh_symbol">;</span></li><li>import java<span class="sh_symbol">.</span>sql<span class="sh_symbol">.</span>ResultSet<span class="sh_symbol">;</span></li><li>import java<span class="sh_symbol">.</span>sql<span class="sh_symbol">.</span>SQLException<span class="sh_symbol">;</span></li><li>import java<span class="sh_symbol">.</span>util<span class="sh_symbol">.</span>ArrayList<span class="sh_symbol">;</span></li><li>import java<span class="sh_symbol">.</span>util<span class="sh_symbol">.</span>List<span class="sh_symbol">;</span></li><li><span style="display:none;">&nbsp;</span></li><li>import javax<span class="sh_symbol">.</span>annotation<span class="sh_symbol">.</span>Resource<span class="sh_symbol">;</span></li><li>import javax<span class="sh_symbol">.</span>sql<span class="sh_symbol">.</span>DataSource<span class="sh_symbol">;</span></li><li><span style="display:none;">&nbsp;</span></li><li>import org<span class="sh_symbol">.</span>springframework<span class="sh_symbol">.</span>stereotype<span class="sh_symbol">.</span>Repository<span class="sh_symbol">;</span></li><li><span style="display:none;">&nbsp;</span></li><li>import com<span class="sh_symbol">.</span>tarena<span class="sh_symbol">.</span>entity<span class="sh_symbol">.</span>Cost<span class="sh_symbol">;</span></li><li><span style="display:none;">&nbsp;</span></li><li>@Repository</li><li><span class="sh_keyword">public</span> <span class="sh_keyword">class</span> JdbcCostDao <span class="sh_keyword">implements</span> CostDao<span class="sh_symbol">,</span> Serializable <span class="sh_cbracket">{</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;@Resource</li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">private</span> DataSource dataSource<span class="sh_symbol">;</span></li><li><span style="display:none;">&nbsp;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;@Override</li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">public</span> List<span class="sh_symbol">&lt;</span>Cost<span class="sh_symbol">&gt;</span> <span class="sh_function">findAll</span><span class="sh_symbol">()</span> <span class="sh_cbracket">{</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;List<span class="sh_symbol">&lt;</span>Cost<span class="sh_symbol">&gt;</span> list <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> ArrayList<span class="sh_symbol">&lt;</span>Cost<span class="sh_symbol">&gt;();</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Connection conn <span class="sh_symbol">=</span> <span class="sh_keyword">null</span><span class="sh_symbol">;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">try</span> <span class="sh_cbracket">{</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;conn <span class="sh_symbol">=</span> dataSource<span class="sh_symbol">.</span><span class="sh_function">getConnection</span><span class="sh_symbol">();</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_predef_func">String</span> sql <span class="sh_symbol">=</span> <span class="sh_string">"select * from cost order by cost_id"</span><span class="sh_symbol">;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PreparedStatement ps <span class="sh_symbol">=</span> conn<span class="sh_symbol">.</span><span class="sh_function">prepareStatement</span><span class="sh_symbol">(</span>sql<span class="sh_symbol">);</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ResultSet rs <span class="sh_symbol">=</span> ps<span class="sh_symbol">.</span><span class="sh_function">executeQuery</span><span class="sh_symbol">();</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">while</span><span class="sh_symbol">(</span>rs<span class="sh_symbol">.</span><span class="sh_function">next</span><span class="sh_symbol">())</span> <span class="sh_cbracket">{</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Cost cost <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">Cost</span><span class="sh_symbol">();</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cost<span class="sh_symbol">.</span><span class="sh_function">setCostId</span><span class="sh_symbol">(</span>rs<span class="sh_symbol">.</span><span class="sh_function">getInt</span><span class="sh_symbol">(</span><span class="sh_string">"cost_id"</span><span class="sh_symbol">));</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cost<span class="sh_symbol">.</span><span class="sh_function">setName</span><span class="sh_symbol">(</span>rs<span class="sh_symbol">.</span><span class="sh_function">getString</span><span class="sh_symbol">(</span><span class="sh_string">"name"</span><span class="sh_symbol">));</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cost<span class="sh_symbol">.</span><span class="sh_function">setBaseDuration</span><span class="sh_symbol">(</span>rs<span class="sh_symbol">.</span><span class="sh_function">getInt</span><span class="sh_symbol">(</span><span class="sh_string">"base_duration"</span><span class="sh_symbol">));</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cost<span class="sh_symbol">.</span><span class="sh_function">setBaseCost</span><span class="sh_symbol">(</span>rs<span class="sh_symbol">.</span><span class="sh_function">getDouble</span><span class="sh_symbol">(</span><span class="sh_string">"base_cost"</span><span class="sh_symbol">));</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cost<span class="sh_symbol">.</span><span class="sh_function">setUnitCost</span><span class="sh_symbol">(</span>rs<span class="sh_symbol">.</span><span class="sh_function">getDouble</span><span class="sh_symbol">(</span><span class="sh_string">"unit_cost"</span><span class="sh_symbol">));</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cost<span class="sh_symbol">.</span><span class="sh_function">setStatus</span><span class="sh_symbol">(</span>rs<span class="sh_symbol">.</span><span class="sh_function">getString</span><span class="sh_symbol">(</span><span class="sh_string">"status"</span><span class="sh_symbol">));</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cost<span class="sh_symbol">.</span><span class="sh_function">setDescr</span><span class="sh_symbol">(</span>rs<span class="sh_symbol">.</span><span class="sh_function">getString</span><span class="sh_symbol">(</span><span class="sh_string">"descr"</span><span class="sh_symbol">));</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cost<span class="sh_symbol">.</span><span class="sh_function">setCreatime</span><span class="sh_symbol">(</span>rs<span class="sh_symbol">.</span><span class="sh_function">getTimestamp</span><span class="sh_symbol">(</span><span class="sh_string">"creatime"</span><span class="sh_symbol">));</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cost<span class="sh_symbol">.</span><span class="sh_function">setStartime</span><span class="sh_symbol">(</span>rs<span class="sh_symbol">.</span><span class="sh_function">getTimestamp</span><span class="sh_symbol">(</span><span class="sh_string">"startime"</span><span class="sh_symbol">));</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cost<span class="sh_symbol">.</span><span class="sh_function">setCostType</span><span class="sh_symbol">(</span>rs<span class="sh_symbol">.</span><span class="sh_function">getString</span><span class="sh_symbol">(</span><span class="sh_string">"cost_type"</span><span class="sh_symbol">));</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;list<span class="sh_symbol">.</span><span class="sh_function">add</span><span class="sh_symbol">(</span>cost<span class="sh_symbol">);</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_cbracket">}</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_cbracket">}</span> <span class="sh_keyword">catch</span> <span class="sh_symbol">(</span>SQLException e<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;e<span class="sh_symbol">.</span><span class="sh_function">printStackTrace</span><span class="sh_symbol">();</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">throw</span> <span class="sh_keyword">new</span> <span class="sh_function">RuntimeException</span><span class="sh_symbol">(</span><span class="sh_string">"查询资费失败"</span><span class="sh_symbol">,</span> e<span class="sh_symbol">);</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_cbracket">}</span> <span class="sh_keyword">finally</span> <span class="sh_cbracket">{</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">try</span> <span class="sh_cbracket">{</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;conn<span class="sh_symbol">.</span><span class="sh_function">close</span><span class="sh_symbol">();</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_cbracket">}</span> <span class="sh_keyword">catch</span> <span class="sh_symbol">(</span>SQLException e<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;e<span class="sh_symbol">.</span><span class="sh_function">printStackTrace</span><span class="sh_symbol">();</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_cbracket">}</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_cbracket">}</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">return</span> list<span class="sh_symbol">;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_cbracket">}</span></li><li><span style="display:none;">&nbsp;</span></li><li><span class="sh_cbracket">}</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">package com.tarena.dao;

import java.io.Serializable;
import java.sql.Connection;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.util.ArrayList;
import java.util.List;

import javax.annotation.Resource;
import javax.sql.DataSource;

import org.springframework.stereotype.Repository;

import com.tarena.entity.Cost;

@Repository
public class JdbcCostDao implements CostDao, Serializable {
	
	@Resource
	private DataSource dataSource;

	@Override
	public List&lt;Cost&gt; findAll() {
		List&lt;Cost&gt; list = new ArrayList&lt;Cost&gt;();
		Connection conn = null;
		try {
			conn = dataSource.getConnection();
			String sql = "select * from cost order by cost_id";
			PreparedStatement ps = conn.prepareStatement(sql);
			ResultSet rs = ps.executeQuery();
			while(rs.next()) {
				Cost cost = new Cost();
				cost.setCostId(rs.getInt("cost_id"));
				cost.setName(rs.getString("name"));
				cost.setBaseDuration(rs.getInt("base_duration"));
				cost.setBaseCost(rs.getDouble("base_cost"));
				cost.setUnitCost(rs.getDouble("unit_cost"));
				cost.setStatus(rs.getString("status"));
				cost.setDescr(rs.getString("descr"));
				cost.setCreatime(rs.getTimestamp("creatime"));
				cost.setStartime(rs.getTimestamp("startime"));
				cost.setCostType(rs.getString("cost_type"));
				list.add(cost);
			}
		} catch (SQLException e) {
			e.printStackTrace();
			throw new RuntimeException("查询资费失败", e);
		} finally {
			try {
				conn.close();
			} catch (SQLException e) {
				e.printStackTrace();
			}
		}
		
		return list;
	}

}
</pre><div class="sh_sourceCode snippet-hide"><pre><a href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#" class="snippet-revealed snippet-toggle sh_url">隐藏</a></pre></div></div><div class="snippet-reveal sh_acid snippet-wrap"><pre class="sh_sourceCode"><a href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#" class="snippet-toggle sh_url">代码</a></pre></div></div>
      <p>CostService完整代码如下：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap" style="display: none;"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#">pop-up</a></pre></div><pre class="hide sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li>package com<span class="sh_symbol">.</span>tarena<span class="sh_symbol">.</span>service<span class="sh_symbol">;</span></li><li><span style="display:none;">&nbsp;</span></li><li>import java<span class="sh_symbol">.</span>io<span class="sh_symbol">.</span>Serializable<span class="sh_symbol">;</span></li><li>import java<span class="sh_symbol">.</span>util<span class="sh_symbol">.</span>List<span class="sh_symbol">;</span></li><li><span style="display:none;">&nbsp;</span></li><li>import javax<span class="sh_symbol">.</span>annotation<span class="sh_symbol">.</span>Resource<span class="sh_symbol">;</span></li><li><span style="display:none;">&nbsp;</span></li><li>import org<span class="sh_symbol">.</span>springframework<span class="sh_symbol">.</span>stereotype<span class="sh_symbol">.</span>Service<span class="sh_symbol">;</span></li><li><span style="display:none;">&nbsp;</span></li><li>import com<span class="sh_symbol">.</span>tarena<span class="sh_symbol">.</span>dao<span class="sh_symbol">.</span>CostDao<span class="sh_symbol">;</span></li><li>import com<span class="sh_symbol">.</span>tarena<span class="sh_symbol">.</span>entity<span class="sh_symbol">.</span>Cost<span class="sh_symbol">;</span></li><li><span style="display:none;">&nbsp;</span></li><li>@Service</li><li><span class="sh_keyword">public</span> <span class="sh_keyword">class</span> CostService <span class="sh_keyword">implements</span> Serializable <span class="sh_cbracket">{</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;@Resource</li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">private</span> CostDao costDao<span class="sh_symbol">;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">public</span> List<span class="sh_symbol">&lt;</span>Cost<span class="sh_symbol">&gt;</span> <span class="sh_function">findAll</span><span class="sh_symbol">()</span> <span class="sh_cbracket">{</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">return</span> costDao<span class="sh_symbol">.</span><span class="sh_function">findAll</span><span class="sh_symbol">();</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_cbracket">}</span></li><li><span class="sh_cbracket">}</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">package com.tarena.service;

import java.io.Serializable;
import java.util.List;

import javax.annotation.Resource;

import org.springframework.stereotype.Service;

import com.tarena.dao.CostDao;
import com.tarena.entity.Cost;

@Service
public class CostService implements Serializable {
	
	@Resource
	private CostDao costDao;
	
	public List&lt;Cost&gt; findAll() {
		return costDao.findAll();
	}
}
</pre><div class="sh_sourceCode snippet-hide"><pre><a href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#" class="snippet-revealed snippet-toggle sh_url">隐藏</a></pre></div></div><div class="snippet-reveal sh_acid snippet-wrap"><pre class="sh_sourceCode"><a href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#" class="snippet-toggle sh_url">代码</a></pre></div></div>
      <p>CostController完整代码如下：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap" style="display: none;"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#">pop-up</a></pre></div><pre class="hide sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li>package com<span class="sh_symbol">.</span>tarena<span class="sh_symbol">.</span>web<span class="sh_symbol">;</span></li><li><span style="display:none;">&nbsp;</span></li><li>import java<span class="sh_symbol">.</span>io<span class="sh_symbol">.</span>Serializable<span class="sh_symbol">;</span></li><li>import java<span class="sh_symbol">.</span>util<span class="sh_symbol">.</span>List<span class="sh_symbol">;</span></li><li><span style="display:none;">&nbsp;</span></li><li>import javax<span class="sh_symbol">.</span>annotation<span class="sh_symbol">.</span>Resource<span class="sh_symbol">;</span></li><li><span style="display:none;">&nbsp;</span></li><li>import org<span class="sh_symbol">.</span>springframework<span class="sh_symbol">.</span>stereotype<span class="sh_symbol">.</span>Controller<span class="sh_symbol">;</span></li><li>import org<span class="sh_symbol">.</span>springframework<span class="sh_symbol">.</span>ui<span class="sh_symbol">.</span>ModelMap<span class="sh_symbol">;</span></li><li>import org<span class="sh_symbol">.</span>springframework<span class="sh_symbol">.</span>web<span class="sh_symbol">.</span>bind<span class="sh_symbol">.</span>annotation<span class="sh_symbol">.</span>RequestMapping<span class="sh_symbol">;</span></li><li><span style="display:none;">&nbsp;</span></li><li>import com<span class="sh_symbol">.</span>tarena<span class="sh_symbol">.</span>entity<span class="sh_symbol">.</span>Cost<span class="sh_symbol">;</span></li><li>import com<span class="sh_symbol">.</span>tarena<span class="sh_symbol">.</span>service<span class="sh_symbol">.</span>CostService<span class="sh_symbol">;</span></li><li><span style="display:none;">&nbsp;</span></li><li>@Controller</li><li>@<span class="sh_function">RequestMapping</span><span class="sh_symbol">(</span><span class="sh_string">"/cost"</span><span class="sh_symbol">)</span></li><li><span class="sh_keyword">public</span> <span class="sh_keyword">class</span> CostController <span class="sh_keyword">implements</span> Serializable <span class="sh_cbracket">{</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;@Resource</li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">private</span> CostService costService<span class="sh_symbol">;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;@<span class="sh_function">RequestMapping</span><span class="sh_symbol">(</span><span class="sh_string">"/find.do"</span><span class="sh_symbol">)</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">public</span> <span class="sh_predef_func">String</span> <span class="sh_function">find</span><span class="sh_symbol">(</span>ModelMap model<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;List<span class="sh_symbol">&lt;</span>Cost<span class="sh_symbol">&gt;</span> list <span class="sh_symbol">=</span> costService<span class="sh_symbol">.</span><span class="sh_function">findAll</span><span class="sh_symbol">();</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;model<span class="sh_symbol">.</span><span class="sh_function">addAttribute</span><span class="sh_symbol">(</span><span class="sh_string">"costs"</span><span class="sh_symbol">,</span> list<span class="sh_symbol">);</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">return</span> <span class="sh_string">"cost/cost_list"</span><span class="sh_symbol">;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_cbracket">}</span></li><li><span style="display:none;">&nbsp;</span></li><li><span class="sh_cbracket">}</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">package com.tarena.web;

import java.io.Serializable;
import java.util.List;

import javax.annotation.Resource;

import org.springframework.stereotype.Controller;
import org.springframework.ui.ModelMap;
import org.springframework.web.bind.annotation.RequestMapping;

import com.tarena.entity.Cost;
import com.tarena.service.CostService;

@Controller
@RequestMapping("/cost")
public class CostController implements Serializable {
	
	@Resource
	private CostService costService;
	
	@RequestMapping("/find.do")
	public String find(ModelMap model) {
		List&lt;Cost&gt; list = costService.findAll();
		model.addAttribute("costs", list);
		return "cost/cost_list";
	}

}
</pre><div class="sh_sourceCode snippet-hide"><pre><a href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#" class="snippet-revealed snippet-toggle sh_url">隐藏</a></pre></div></div><div class="snippet-reveal sh_acid snippet-wrap"><pre class="sh_sourceCode"><a href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#" class="snippet-toggle sh_url">代码</a></pre></div></div>
      <p>cost_list.jsp完整代码如下：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap" style="display: none;"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#">pop-up</a></pre></div><pre class="hide sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">&lt;%</span>@page pageEncoding<span class="sh_symbol">=</span><span class="sh_string">"utf-8"</span><span class="sh_symbol">%&gt;</span></li><li><span class="sh_symbol">&lt;%</span>@taglib uri<span class="sh_symbol">=</span><span class="sh_string">"http://java.sun.com/jsp/jstl/core"</span> prefix<span class="sh_symbol">=</span><span class="sh_string">"c"</span><span class="sh_symbol">%&gt;</span></li><li><span class="sh_symbol">&lt;!</span>DOCTYPE html PUBLIC <span class="sh_string">"-//W3C//DTD XHTML 1.0 Transitional//EN"</span> <span class="sh_string">"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"</span><span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;</span>html xmlns<span class="sh_symbol">=</span><span class="sh_string">"http://www.w3.org/1999/xhtml"</span><span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;</span>head<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;</span>meta http<span class="sh_symbol">-</span>equiv<span class="sh_symbol">=</span><span class="sh_string">"Content-Type"</span> content<span class="sh_symbol">=</span><span class="sh_string">"text/html; charset=utf-8"</span> <span class="sh_symbol">/&gt;</span></li><li><span class="sh_symbol">&lt;</span>title<span class="sh_symbol">&gt;</span>达内－NetCTOSS<span class="sh_symbol">&lt;/</span>title<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;</span>link type<span class="sh_symbol">=</span><span class="sh_string">"text/css"</span> rel<span class="sh_symbol">=</span><span class="sh_string">"stylesheet"</span> media<span class="sh_symbol">=</span><span class="sh_string">"all"</span> href<span class="sh_symbol">=</span><span class="sh_string">"../styles/global.css"</span> <span class="sh_symbol">/&gt;</span></li><li><span class="sh_symbol">&lt;</span>link type<span class="sh_symbol">=</span><span class="sh_string">"text/css"</span> rel<span class="sh_symbol">=</span><span class="sh_string">"stylesheet"</span> media<span class="sh_symbol">=</span><span class="sh_string">"all"</span> href<span class="sh_symbol">=</span><span class="sh_string">"../styles/global_color.css"</span> <span class="sh_symbol">/&gt;</span></li><li><span class="sh_symbol">&lt;</span>script language<span class="sh_symbol">=</span><span class="sh_string">"javascript"</span> type<span class="sh_symbol">=</span><span class="sh_string">"text/javascript"</span><span class="sh_symbol">&gt;</span></li><li>            <span class="sh_comment">//排序按钮的点击事件</span></li><li><span class="sh_keyword">function</span> <span class="sh_function">sort</span><span class="sh_symbol">(</span>btnObj<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span></li><li><span class="sh_keyword">if</span> <span class="sh_symbol">(</span>btnObj<span class="sh_symbol">.</span>className <span class="sh_symbol">==</span> <span class="sh_string">"sort_desc"</span><span class="sh_symbol">)</span></li><li>                    btnObj<span class="sh_symbol">.</span>className <span class="sh_symbol">=</span> <span class="sh_string">"sort_asc"</span><span class="sh_symbol">;</span></li><li><span class="sh_keyword">else</span></li><li>                    btnObj<span class="sh_symbol">.</span>className <span class="sh_symbol">=</span> <span class="sh_string">"sort_desc"</span><span class="sh_symbol">;</span></li><li>            <span class="sh_cbracket">}</span></li><li><span style="display:none;">&nbsp;</span></li><li>            <span class="sh_comment">//启用</span></li><li><span class="sh_keyword">function</span> <span class="sh_function">startFee</span><span class="sh_symbol">()</span> <span class="sh_cbracket">{</span></li><li>                <span class="sh_keyword">var</span> r <span class="sh_symbol">=</span> window<span class="sh_symbol">.</span><span class="sh_function">confirm</span><span class="sh_symbol">(</span><span class="sh_string">"确定要启用此资费吗？资费启用后将不能修改和删除。"</span><span class="sh_symbol">);</span></li><li>document<span class="sh_symbol">.</span><span class="sh_function">getElementById</span><span class="sh_symbol">(</span><span class="sh_string">"operate_result_info"</span><span class="sh_symbol">).</span>style<span class="sh_symbol">.</span>display <span class="sh_symbol">=</span> <span class="sh_string">"block"</span><span class="sh_symbol">;</span></li><li>            <span class="sh_cbracket">}</span></li><li>            <span class="sh_comment">//删除</span></li><li><span class="sh_keyword">function</span> <span class="sh_function">deleteFee</span><span class="sh_symbol">()</span> <span class="sh_cbracket">{</span></li><li>                <span class="sh_keyword">var</span> r <span class="sh_symbol">=</span> window<span class="sh_symbol">.</span><span class="sh_function">confirm</span><span class="sh_symbol">(</span><span class="sh_string">"确定要删除此资费吗？"</span><span class="sh_symbol">);</span></li><li>document<span class="sh_symbol">.</span><span class="sh_function">getElementById</span><span class="sh_symbol">(</span><span class="sh_string">"operate_result_info"</span><span class="sh_symbol">).</span>style<span class="sh_symbol">.</span>display <span class="sh_symbol">=</span> <span class="sh_string">"block"</span><span class="sh_symbol">;</span></li><li>            <span class="sh_cbracket">}</span></li><li><span class="sh_symbol">&lt;/</span>script<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;/</span>head<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;</span>body<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;!--</span>Logo区域开始<span class="sh_symbol">--&gt;</span></li><li><span class="sh_symbol">&lt;</span>div id<span class="sh_symbol">=</span><span class="sh_string">"header"</span><span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;</span>img src<span class="sh_symbol">=</span><span class="sh_string">"../images/logo.png"</span> alt<span class="sh_symbol">=</span><span class="sh_string">"logo"</span> <span class="sh_keyword">class</span><span class="sh_symbol">=</span><span class="sh_string">"left"</span><span class="sh_symbol">/&gt;</span></li><li><span class="sh_symbol">&lt;</span>a href<span class="sh_symbol">=</span><span class="sh_string">"#"</span><span class="sh_symbol">&gt;[</span>退出<span class="sh_symbol">]&lt;/</span>a<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;/</span>div<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;!--</span>Logo区域结束<span class="sh_symbol">--&gt;</span></li><li><span class="sh_symbol">&lt;!--</span>导航区域开始<span class="sh_symbol">--&gt;</span></li><li><span class="sh_symbol">&lt;</span>div id<span class="sh_symbol">=</span><span class="sh_string">"navi"</span><span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;</span>ul id<span class="sh_symbol">=</span><span class="sh_string">"menu"</span><span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;</span>li<span class="sh_symbol">&gt;&lt;</span>a href<span class="sh_symbol">=</span><span class="sh_string">"../index.html"</span> <span class="sh_keyword">class</span><span class="sh_symbol">=</span><span class="sh_string">"index_off"</span><span class="sh_symbol">&gt;&lt;</span><span class="sh_regexp">/a&gt;&lt;/</span>li<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;</span>li<span class="sh_symbol">&gt;&lt;</span>a href<span class="sh_symbol">=</span><span class="sh_string">"../role/role_list.html"</span> <span class="sh_keyword">class</span><span class="sh_symbol">=</span><span class="sh_string">"role_off"</span><span class="sh_symbol">&gt;&lt;</span><span class="sh_regexp">/a&gt;&lt;/</span>li<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;</span>li<span class="sh_symbol">&gt;&lt;</span>a href<span class="sh_symbol">=</span><span class="sh_string">"../admin/admin_list.html"</span> <span class="sh_keyword">class</span><span class="sh_symbol">=</span><span class="sh_string">"admin_off"</span><span class="sh_symbol">&gt;&lt;</span><span class="sh_regexp">/a&gt;&lt;/</span>li<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;</span>li<span class="sh_symbol">&gt;&lt;</span>a href<span class="sh_symbol">=</span><span class="sh_string">"../fee/fee_list.html"</span> <span class="sh_keyword">class</span><span class="sh_symbol">=</span><span class="sh_string">"fee_on"</span><span class="sh_symbol">&gt;&lt;</span><span class="sh_regexp">/a&gt;&lt;/</span>li<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;</span>li<span class="sh_symbol">&gt;&lt;</span>a href<span class="sh_symbol">=</span><span class="sh_string">"../account/account_list.html"</span> <span class="sh_keyword">class</span><span class="sh_symbol">=</span><span class="sh_string">"account_off"</span><span class="sh_symbol">&gt;&lt;</span><span class="sh_regexp">/a&gt;&lt;/</span>li<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;</span>li<span class="sh_symbol">&gt;&lt;</span>a href<span class="sh_symbol">=</span><span class="sh_string">"../service/service_list.html"</span> <span class="sh_keyword">class</span><span class="sh_symbol">=</span><span class="sh_string">"service_off"</span><span class="sh_symbol">&gt;&lt;</span><span class="sh_regexp">/a&gt;&lt;/</span>li<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;</span>li<span class="sh_symbol">&gt;&lt;</span>a href<span class="sh_symbol">=</span><span class="sh_string">"../bill/bill_list.html"</span> <span class="sh_keyword">class</span><span class="sh_symbol">=</span><span class="sh_string">"bill_off"</span><span class="sh_symbol">&gt;&lt;</span><span class="sh_regexp">/a&gt;&lt;/</span>li<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;</span>li<span class="sh_symbol">&gt;&lt;</span>a href<span class="sh_symbol">=</span><span class="sh_string">"../report/report_list.html"</span> <span class="sh_keyword">class</span><span class="sh_symbol">=</span><span class="sh_string">"report_off"</span><span class="sh_symbol">&gt;&lt;</span><span class="sh_regexp">/a&gt;&lt;/</span>li<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;</span>li<span class="sh_symbol">&gt;&lt;</span>a href<span class="sh_symbol">=</span><span class="sh_string">"../user/user_info.html"</span> <span class="sh_keyword">class</span><span class="sh_symbol">=</span><span class="sh_string">"information_off"</span><span class="sh_symbol">&gt;&lt;</span><span class="sh_regexp">/a&gt;&lt;/</span>li<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;</span>li<span class="sh_symbol">&gt;&lt;</span>a href<span class="sh_symbol">=</span><span class="sh_string">"../user/user_modi_pwd.html"</span> <span class="sh_keyword">class</span><span class="sh_symbol">=</span><span class="sh_string">"password_off"</span><span class="sh_symbol">&gt;&lt;</span><span class="sh_regexp">/a&gt;&lt;/</span>li<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;/</span>ul<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;/</span>div<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;!--</span>导航区域结束<span class="sh_symbol">--&gt;</span></li><li><span class="sh_symbol">&lt;!--</span>主要区域开始<span class="sh_symbol">--&gt;</span></li><li><span class="sh_symbol">&lt;</span>div id<span class="sh_symbol">=</span><span class="sh_string">"main"</span><span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;</span>form action<span class="sh_symbol">=</span><span class="sh_string">""</span> method<span class="sh_symbol">=</span><span class="sh_string">""</span><span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;!--</span>排序<span class="sh_symbol">--&gt;</span></li><li><span class="sh_symbol">&lt;</span>div <span class="sh_keyword">class</span><span class="sh_symbol">=</span><span class="sh_string">"search_add"</span><span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;</span>div<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;!--&lt;</span>input type<span class="sh_symbol">=</span><span class="sh_string">"button"</span> value<span class="sh_symbol">=</span><span class="sh_string">"月租"</span> <span class="sh_keyword">class</span><span class="sh_symbol">=</span><span class="sh_string">"sort_asc"</span> onclick<span class="sh_symbol">=</span><span class="sh_string">"sort(this);"</span> <span class="sh_symbol">/&gt;--&gt;</span></li><li><span class="sh_symbol">&lt;</span>input type<span class="sh_symbol">=</span><span class="sh_string">"button"</span> value<span class="sh_symbol">=</span><span class="sh_string">"基费"</span> <span class="sh_keyword">class</span><span class="sh_symbol">=</span><span class="sh_string">"sort_asc"</span> onclick<span class="sh_symbol">=</span><span class="sh_string">"sort(this);"</span> <span class="sh_symbol">/&gt;</span></li><li><span class="sh_symbol">&lt;</span>input type<span class="sh_symbol">=</span><span class="sh_string">"button"</span> value<span class="sh_symbol">=</span><span class="sh_string">"时长"</span> <span class="sh_keyword">class</span><span class="sh_symbol">=</span><span class="sh_string">"sort_asc"</span> onclick<span class="sh_symbol">=</span><span class="sh_string">"sort(this);"</span> <span class="sh_symbol">/&gt;</span></li><li><span class="sh_symbol">&lt;/</span>div<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;</span>input type<span class="sh_symbol">=</span><span class="sh_string">"button"</span> value<span class="sh_symbol">=</span><span class="sh_string">"增加"</span> <span class="sh_keyword">class</span><span class="sh_symbol">=</span><span class="sh_string">"btn_add"</span> onclick<span class="sh_symbol">=</span><span class="sh_string">"location.href='fee_add.html';"</span> <span class="sh_symbol">/&gt;</span></li><li><span class="sh_symbol">&lt;/</span>div<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;!--</span>启用操作的操作提示<span class="sh_symbol">--&gt;</span></li><li><span class="sh_symbol">&lt;</span>div id<span class="sh_symbol">=</span><span class="sh_string">"operate_result_info"</span> <span class="sh_keyword">class</span><span class="sh_symbol">=</span><span class="sh_string">"operate_success"</span><span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;</span>img src<span class="sh_symbol">=</span><span class="sh_string">"../images/close.png"</span> onclick<span class="sh_symbol">=</span><span class="sh_string">"this.parentNode.style.display='none';"</span> <span class="sh_symbol">/&gt;</span></li><li>                    删除成功！</li><li><span class="sh_symbol">&lt;/</span>div<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;!--</span>数据区域：用表格展示数据<span class="sh_symbol">--&gt;</span></li><li><span class="sh_symbol">&lt;</span>div id<span class="sh_symbol">=</span><span class="sh_string">"data"</span><span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;</span>table id<span class="sh_symbol">=</span><span class="sh_string">"datalist"</span><span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;</span>tr<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;</span>th<span class="sh_symbol">&gt;</span>资费ID<span class="sh_symbol">&lt;/</span>th<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;</span>th <span class="sh_keyword">class</span><span class="sh_symbol">=</span><span class="sh_string">"width100"</span><span class="sh_symbol">&gt;</span>资费名称<span class="sh_symbol">&lt;/</span>th<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;</span>th<span class="sh_symbol">&gt;</span>基本时长<span class="sh_symbol">&lt;/</span>th<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;</span>th<span class="sh_symbol">&gt;</span>基本费用<span class="sh_symbol">&lt;/</span>th<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;</span>th<span class="sh_symbol">&gt;</span>单位费用<span class="sh_symbol">&lt;/</span>th<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;</span>th<span class="sh_symbol">&gt;</span>创建时间<span class="sh_symbol">&lt;/</span>th<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;</span>th<span class="sh_symbol">&gt;</span>开通时间<span class="sh_symbol">&lt;/</span>th<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;</span>th <span class="sh_keyword">class</span><span class="sh_symbol">=</span><span class="sh_string">"width50"</span><span class="sh_symbol">&gt;</span>状态<span class="sh_symbol">&lt;/</span>th<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;</span>th <span class="sh_keyword">class</span><span class="sh_symbol">=</span><span class="sh_string">"width200"</span><span class="sh_symbol">&gt;&lt;/</span>th<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;/</span>tr<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;</span>c<span class="sh_symbol">:</span>forEach items<span class="sh_symbol">=</span><span class="sh_string">"${costs}"</span> <span class="sh_keyword">var</span><span class="sh_symbol">=</span><span class="sh_string">"c"</span><span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;</span>tr<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;</span>td<span class="sh_symbol">&gt;</span>$<span class="sh_cbracket">{</span>c<span class="sh_symbol">.</span>costId<span class="sh_cbracket">}</span><span class="sh_symbol">&lt;/</span>td<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;</span>td<span class="sh_symbol">&gt;&lt;</span>a href<span class="sh_symbol">=</span><span class="sh_string">"fee_detail.html"</span><span class="sh_symbol">&gt;</span>$<span class="sh_cbracket">{</span>c<span class="sh_symbol">.</span>name<span class="sh_cbracket">}</span><span class="sh_symbol">&lt;</span><span class="sh_regexp">/a&gt;&lt;/</span>td<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;</span>td<span class="sh_symbol">&gt;</span>$<span class="sh_cbracket">{</span>c<span class="sh_symbol">.</span>baseDuration<span class="sh_cbracket">}</span><span class="sh_symbol">&lt;/</span>td<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;</span>td<span class="sh_symbol">&gt;</span>$<span class="sh_cbracket">{</span>c<span class="sh_symbol">.</span>baseCost<span class="sh_cbracket">}</span><span class="sh_symbol">&lt;/</span>td<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;</span>td<span class="sh_symbol">&gt;</span>$<span class="sh_cbracket">{</span>c<span class="sh_symbol">.</span>unitCost<span class="sh_cbracket">}</span><span class="sh_symbol">&lt;/</span>td<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;</span>td<span class="sh_symbol">&gt;</span>$<span class="sh_cbracket">{</span>c<span class="sh_symbol">.</span>creatime<span class="sh_cbracket">}</span><span class="sh_symbol">&lt;/</span>td<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;</span>td<span class="sh_symbol">&gt;</span>$<span class="sh_cbracket">{</span>c<span class="sh_symbol">.</span>startime<span class="sh_cbracket">}</span><span class="sh_symbol">&lt;/</span>td<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;</span>td<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>c<span class="sh_symbol">:</span><span class="sh_keyword">if</span> test<span class="sh_symbol">=</span><span class="sh_string">"${c.status==0}"</span><span class="sh_symbol">&gt;</span>开通<span class="sh_symbol">&lt;/</span>c<span class="sh_symbol">:</span><span class="sh_keyword">if</span><span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>c<span class="sh_symbol">:</span><span class="sh_keyword">if</span> test<span class="sh_symbol">=</span><span class="sh_string">"${c.status==1}"</span><span class="sh_symbol">&gt;</span>暂停<span class="sh_symbol">&lt;/</span>c<span class="sh_symbol">:</span><span class="sh_keyword">if</span><span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;/</span>td<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;</span>td<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;</span>input type<span class="sh_symbol">=</span><span class="sh_string">"button"</span> value<span class="sh_symbol">=</span><span class="sh_string">"启用"</span> <span class="sh_keyword">class</span><span class="sh_symbol">=</span><span class="sh_string">"btn_start"</span> onclick<span class="sh_symbol">=</span><span class="sh_string">"startFee();"</span> <span class="sh_symbol">/&gt;</span></li><li><span class="sh_symbol">&lt;</span>input type<span class="sh_symbol">=</span><span class="sh_string">"button"</span> value<span class="sh_symbol">=</span><span class="sh_string">"修改"</span> <span class="sh_keyword">class</span><span class="sh_symbol">=</span><span class="sh_string">"btn_modify"</span> onclick<span class="sh_symbol">=</span><span class="sh_string">"location.href='fee_modi.html';"</span> <span class="sh_symbol">/&gt;</span></li><li><span class="sh_symbol">&lt;</span>input type<span class="sh_symbol">=</span><span class="sh_string">"button"</span> value<span class="sh_symbol">=</span><span class="sh_string">"删除"</span> <span class="sh_keyword">class</span><span class="sh_symbol">=</span><span class="sh_string">"btn_delete"</span> onclick<span class="sh_symbol">=</span><span class="sh_string">"deleteFee();"</span> <span class="sh_symbol">/&gt;</span></li><li><span class="sh_symbol">&lt;/</span>td<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;/</span>tr<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;/</span>c<span class="sh_symbol">:</span>forEach<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;/</span>table<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;</span>p<span class="sh_symbol">&gt;</span>业务说明：<span class="sh_symbol">&lt;</span><span class="sh_normal">br </span><span class="sh_symbol">/&gt;</span></li><li>                    <span class="sh_number">1</span>、创建资费时，状态为暂停，记载创建时间；<span class="sh_symbol">&lt;</span><span class="sh_normal">br </span><span class="sh_symbol">/&gt;</span></li><li>                    <span class="sh_number">2</span>、暂停状态下，可修改，可删除；<span class="sh_symbol">&lt;</span><span class="sh_normal">br </span><span class="sh_symbol">/&gt;</span></li><li>                    <span class="sh_number">3</span>、开通后，记载开通时间，且开通后不能修改、不能再停用、也不能删除；<span class="sh_symbol">&lt;</span><span class="sh_normal">br </span><span class="sh_symbol">/&gt;</span></li><li>                    <span class="sh_number">4</span>、业务账号修改资费时，在下月底统一触发，修改其关联的资费ID（此触发动作由程序处理）</li><li><span class="sh_symbol">&lt;/</span>p<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;/</span>div<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;!--</span>分页<span class="sh_symbol">--&gt;</span></li><li><span class="sh_symbol">&lt;</span>div id<span class="sh_symbol">=</span><span class="sh_string">"pages"</span><span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>a href<span class="sh_symbol">=</span><span class="sh_string">"#"</span><span class="sh_symbol">&gt;</span>上一页<span class="sh_symbol">&lt;/</span>a<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;</span>a href<span class="sh_symbol">=</span><span class="sh_string">"#"</span> <span class="sh_keyword">class</span><span class="sh_symbol">=</span><span class="sh_string">"current_page"</span><span class="sh_symbol">&gt;</span><span class="sh_number">1</span><span class="sh_symbol">&lt;/</span>a<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;</span>a href<span class="sh_symbol">=</span><span class="sh_string">"#"</span><span class="sh_symbol">&gt;</span><span class="sh_number">2</span><span class="sh_symbol">&lt;/</span>a<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;</span>a href<span class="sh_symbol">=</span><span class="sh_string">"#"</span><span class="sh_symbol">&gt;</span><span class="sh_number">3</span><span class="sh_symbol">&lt;/</span>a<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;</span>a href<span class="sh_symbol">=</span><span class="sh_string">"#"</span><span class="sh_symbol">&gt;</span><span class="sh_number">4</span><span class="sh_symbol">&lt;/</span>a<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;</span>a href<span class="sh_symbol">=</span><span class="sh_string">"#"</span><span class="sh_symbol">&gt;</span><span class="sh_number">5</span><span class="sh_symbol">&lt;/</span>a<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;</span>a href<span class="sh_symbol">=</span><span class="sh_string">"#"</span><span class="sh_symbol">&gt;</span>下一页<span class="sh_symbol">&lt;/</span>a<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;/</span>div<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;/</span>form<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;/</span>div<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;!--</span>主要区域结束<span class="sh_symbol">--&gt;</span></li><li><span class="sh_symbol">&lt;</span>div id<span class="sh_symbol">=</span><span class="sh_string">"footer"</span><span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;</span>p<span class="sh_symbol">&gt;[</span>源自北美的技术，最优秀的师资，最真实的企业环境，最适用的实战项目<span class="sh_symbol">]&lt;/</span>p<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;</span>p<span class="sh_symbol">&gt;</span>版权所有<span class="sh_symbol">(</span>C<span class="sh_symbol">)</span>加拿大达内IT培训集团公司 <span class="sh_symbol">&lt;/</span>p<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;/</span>div<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;/</span>body<span class="sh_symbol">&gt;</span></li><li><span class="sh_symbol">&lt;/</span>html<span class="sh_symbol">&gt;</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">&lt;%@page pageEncoding="utf-8"%&gt;
&lt;%@taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%&gt;
&lt;!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"&gt;
&lt;html xmlns="http://www.w3.org/1999/xhtml"&gt;
&lt;head&gt;
&lt;meta http-equiv="Content-Type" content="text/html; charset=utf-8" /&gt;
&lt;title&gt;达内－NetCTOSS&lt;/title&gt;
&lt;link type="text/css" rel="stylesheet" media="all" href="../styles/global.css" /&gt;
&lt;link type="text/css" rel="stylesheet" media="all" href="../styles/global_color.css" /&gt;
&lt;script language="javascript" type="text/javascript"&gt;
            //排序按钮的点击事件
function sort(btnObj) {
if (btnObj.className == "sort_desc")
                    btnObj.className = "sort_asc";
else
                    btnObj.className = "sort_desc";
            }

            //启用
function startFee() {
                var r = window.confirm("确定要启用此资费吗？资费启用后将不能修改和删除。");
document.getElementById("operate_result_info").style.display = "block";
            }
            //删除
function deleteFee() {
                var r = window.confirm("确定要删除此资费吗？");
document.getElementById("operate_result_info").style.display = "block";
            }
&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;!--Logo区域开始--&gt;
&lt;div id="header"&gt;
&lt;img src="../images/logo.png" alt="logo" class="left"/&gt;
&lt;a href="#"&gt;[退出]&lt;/a&gt;
&lt;/div&gt;
&lt;!--Logo区域结束--&gt;
&lt;!--导航区域开始--&gt;
&lt;div id="navi"&gt;
&lt;ul id="menu"&gt;
&lt;li&gt;&lt;a href="../index.html" class="index_off"&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="../role/role_list.html" class="role_off"&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="../admin/admin_list.html" class="admin_off"&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="../fee/fee_list.html" class="fee_on"&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="../account/account_list.html" class="account_off"&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="../service/service_list.html" class="service_off"&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="../bill/bill_list.html" class="bill_off"&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="../report/report_list.html" class="report_off"&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="../user/user_info.html" class="information_off"&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="../user/user_modi_pwd.html" class="password_off"&gt;&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;!--导航区域结束--&gt;
&lt;!--主要区域开始--&gt;
&lt;div id="main"&gt;
&lt;form action="" method=""&gt;
&lt;!--排序--&gt;
&lt;div class="search_add"&gt;
&lt;div&gt;
&lt;!--&lt;input type="button" value="月租" class="sort_asc" onclick="sort(this);" /&gt;--&gt;
&lt;input type="button" value="基费" class="sort_asc" onclick="sort(this);" /&gt;
&lt;input type="button" value="时长" class="sort_asc" onclick="sort(this);" /&gt;
&lt;/div&gt;
&lt;input type="button" value="增加" class="btn_add" onclick="location.href='fee_add.html';" /&gt;
&lt;/div&gt;
&lt;!--启用操作的操作提示--&gt;
&lt;div id="operate_result_info" class="operate_success"&gt;
&lt;img src="../images/close.png" onclick="this.parentNode.style.display='none';" /&gt;
                    删除成功！
&lt;/div&gt;
&lt;!--数据区域：用表格展示数据--&gt;
&lt;div id="data"&gt;
&lt;table id="datalist"&gt;
&lt;tr&gt;
&lt;th&gt;资费ID&lt;/th&gt;
&lt;th class="width100"&gt;资费名称&lt;/th&gt;
&lt;th&gt;基本时长&lt;/th&gt;
&lt;th&gt;基本费用&lt;/th&gt;
&lt;th&gt;单位费用&lt;/th&gt;
&lt;th&gt;创建时间&lt;/th&gt;
&lt;th&gt;开通时间&lt;/th&gt;
&lt;th class="width50"&gt;状态&lt;/th&gt;
&lt;th class="width200"&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;c:forEach items="${costs}" var="c"&gt;
&lt;tr&gt;
&lt;td&gt;${c.costId}&lt;/td&gt;
&lt;td&gt;&lt;a href="fee_detail.html"&gt;${c.name}&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;${c.baseDuration}&lt;/td&gt;
&lt;td&gt;${c.baseCost}&lt;/td&gt;
&lt;td&gt;${c.unitCost}&lt;/td&gt;
&lt;td&gt;${c.creatime}&lt;/td&gt;
&lt;td&gt;${c.startime}&lt;/td&gt;
&lt;td&gt;
	&lt;c:if test="${c.status==0}"&gt;开通&lt;/c:if&gt;
	&lt;c:if test="${c.status==1}"&gt;暂停&lt;/c:if&gt;
&lt;/td&gt;
&lt;td&gt;
&lt;input type="button" value="启用" class="btn_start" onclick="startFee();" /&gt;
&lt;input type="button" value="修改" class="btn_modify" onclick="location.href='fee_modi.html';" /&gt;
&lt;input type="button" value="删除" class="btn_delete" onclick="deleteFee();" /&gt;
&lt;/td&gt;
&lt;/tr&gt;
&lt;/c:forEach&gt;
&lt;/table&gt;
&lt;p&gt;业务说明：&lt;br /&gt;
                    1、创建资费时，状态为暂停，记载创建时间；&lt;br /&gt;
                    2、暂停状态下，可修改，可删除；&lt;br /&gt;
                    3、开通后，记载开通时间，且开通后不能修改、不能再停用、也不能删除；&lt;br /&gt;
                    4、业务账号修改资费时，在下月底统一触发，修改其关联的资费ID（此触发动作由程序处理）
&lt;/p&gt;
&lt;/div&gt;
&lt;!--分页--&gt;
&lt;div id="pages"&gt;
	&lt;a href="#"&gt;上一页&lt;/a&gt;
&lt;a href="#" class="current_page"&gt;1&lt;/a&gt;
&lt;a href="#"&gt;2&lt;/a&gt;
&lt;a href="#"&gt;3&lt;/a&gt;
&lt;a href="#"&gt;4&lt;/a&gt;
&lt;a href="#"&gt;5&lt;/a&gt;
&lt;a href="#"&gt;下一页&lt;/a&gt;
&lt;/div&gt;
&lt;/form&gt;
&lt;/div&gt;
&lt;!--主要区域结束--&gt;
&lt;div id="footer"&gt;
&lt;p&gt;[源自北美的技术，最优秀的师资，最真实的企业环境，最适用的实战项目]&lt;/p&gt;
&lt;p&gt;版权所有(C)加拿大达内IT培训集团公司 &lt;/p&gt;
&lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;
</pre><div class="sh_sourceCode snippet-hide"><pre><a href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#" class="snippet-revealed snippet-toggle sh_url">隐藏</a></pre></div></div><div class="snippet-reveal sh_acid snippet-wrap"><pre class="sh_sourceCode"><a href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#" class="snippet-toggle sh_url">代码</a></pre></div></div>
      <a name="case5">
      </a>
      <h2>5 拦截器案例</h2>
      <h3>5.1 问题</h3>
      <p>在Spring05项目中，使用拦截器扩展HelloController，在HelloController执行前、后各输出一句话。</p>
      <h3>5.2 方案</h3>
      <p>拦截器使用步骤：</p>
      <ol class="list">
        <li>创建拦截器组件，实现HandlerInterceptor接口
</li>
        <li>注册拦截器组件
</li>
      </ol>
      <h3>5.3 步骤</h3>
      <p class="number">步骤一：创建拦截器</p>
      <p>创建拦截器组件FirstInterceptor，代码如下：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li>package com<span class="sh_symbol">.</span>tarena<span class="sh_symbol">.</span>web<span class="sh_symbol">;</span></li><li><span style="display:none;">&nbsp;</span></li><li>import javax<span class="sh_symbol">.</span>servlet<span class="sh_symbol">.</span>http<span class="sh_symbol">.</span>HttpServletRequest<span class="sh_symbol">;</span></li><li>import javax<span class="sh_symbol">.</span>servlet<span class="sh_symbol">.</span>http<span class="sh_symbol">.</span>HttpServletResponse<span class="sh_symbol">;</span></li><li><span style="display:none;">&nbsp;</span></li><li>import org<span class="sh_symbol">.</span>springframework<span class="sh_symbol">.</span>web<span class="sh_symbol">.</span>servlet<span class="sh_symbol">.</span>HandlerInterceptor<span class="sh_symbol">;</span></li><li>import org<span class="sh_symbol">.</span>springframework<span class="sh_symbol">.</span>web<span class="sh_symbol">.</span>servlet<span class="sh_symbol">.</span>ModelAndView<span class="sh_symbol">;</span></li><li><span style="display:none;">&nbsp;</span></li><li><span class="sh_keyword">public</span> <span class="sh_keyword">class</span> FirstInterceptor <span class="sh_keyword">implements</span> HandlerInterceptor <span class="sh_cbracket">{</span></li><li><span style="display:none;">&nbsp;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;@Override</li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">public</span> void <span class="sh_function">afterCompletion</span><span class="sh_symbol">(</span>HttpServletRequest arg0<span class="sh_symbol">,</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;HttpServletResponse arg1<span class="sh_symbol">,</span> <span class="sh_predef_func">Object</span> arg2<span class="sh_symbol">,</span> Exception arg3<span class="sh_symbol">)</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">throws</span> Exception <span class="sh_cbracket">{</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System<span class="sh_symbol">.</span>out<span class="sh_symbol">.</span><span class="sh_function">println</span><span class="sh_symbol">(</span><span class="sh_string">"afterCompletion"</span><span class="sh_symbol">);</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_cbracket">}</span></li><li><span style="display:none;">&nbsp;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;@Override</li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">public</span> void <span class="sh_function">postHandle</span><span class="sh_symbol">(</span>HttpServletRequest arg0<span class="sh_symbol">,</span> HttpServletResponse arg1<span class="sh_symbol">,</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_predef_func">Object</span> arg2<span class="sh_symbol">,</span> ModelAndView arg3<span class="sh_symbol">)</span> <span class="sh_keyword">throws</span> Exception <span class="sh_cbracket">{</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System<span class="sh_symbol">.</span>out<span class="sh_symbol">.</span><span class="sh_function">println</span><span class="sh_symbol">(</span><span class="sh_string">"postHandle"</span><span class="sh_symbol">);</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_cbracket">}</span></li><li><span style="display:none;">&nbsp;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;@Override</li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">public</span> boolean <span class="sh_function">preHandle</span><span class="sh_symbol">(</span>HttpServletRequest arg0<span class="sh_symbol">,</span> HttpServletResponse arg1<span class="sh_symbol">,</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_predef_func">Object</span> arg2<span class="sh_symbol">)</span> <span class="sh_keyword">throws</span> Exception <span class="sh_cbracket">{</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System<span class="sh_symbol">.</span>out<span class="sh_symbol">.</span><span class="sh_function">println</span><span class="sh_symbol">(</span><span class="sh_string">"preHandle"</span><span class="sh_symbol">);</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">return</span> <span class="sh_keyword">true</span><span class="sh_symbol">;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_cbracket">}</span></li><li><span style="display:none;">&nbsp;</span></li><li><span class="sh_cbracket">}</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">package com.tarena.web;

import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

import org.springframework.web.servlet.HandlerInterceptor;
import org.springframework.web.servlet.ModelAndView;

public class FirstInterceptor implements HandlerInterceptor {

	@Override
	public void afterCompletion(HttpServletRequest arg0,
			HttpServletResponse arg1, Object arg2, Exception arg3)
			throws Exception {
		System.out.println("afterCompletion");
	}

	@Override
	public void postHandle(HttpServletRequest arg0, HttpServletResponse arg1,
			Object arg2, ModelAndView arg3) throws Exception {
		System.out.println("postHandle");
	}

	@Override
	public boolean preHandle(HttpServletRequest arg0, HttpServletResponse arg1,
			Object arg2) throws Exception {
		System.out.println("preHandle");
		return true;
	}

}
</pre></div></div>
      <p class="number">步骤二：注册拦截器</p>
      <p>在spring-mvc.xml中注册拦截器，追加代码如下：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;!--</span>拦截器 <span class="sh_symbol">--&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>mvc<span class="sh_symbol">:</span>interceptors<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>mvc<span class="sh_symbol">:</span>interceptor<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>mvc<span class="sh_symbol">:</span>mapping path<span class="sh_symbol">=</span><span class="sh_string">"/**"</span><span class="sh_symbol">/&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>bean <span class="sh_keyword">class</span><span class="sh_symbol">=</span><span class="sh_string">"com.tarena.web.FirstInterceptor"</span><span class="sh_symbol">/&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>mvc<span class="sh_symbol">:</span>interceptor<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>mvc<span class="sh_symbol">:</span>interceptors<span class="sh_symbol">&gt;</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">	&lt;!--拦截器 --&gt;
	&lt;mvc:interceptors&gt;
		&lt;mvc:interceptor&gt;
			&lt;mvc:mapping path="/**"/&gt;
			&lt;bean class="com.tarena.web.FirstInterceptor"/&gt;
		&lt;/mvc:interceptor&gt;
	&lt;/mvc:interceptors&gt;
</pre></div></div>
      <p class="number">步骤三：测试</p>
      <p>在HelloController中增加一个方法，输出一句话，并将请求转发到hello.jsp，追加代码如下：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li>&nbsp;&nbsp;&nbsp;&nbsp;@<span class="sh_function">RequestMapping</span><span class="sh_symbol">(</span><span class="sh_string">"/nihao.do"</span><span class="sh_symbol">)</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">public</span> <span class="sh_predef_func">String</span> <span class="sh_function">nihao</span><span class="sh_symbol">()</span> <span class="sh_cbracket">{</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System<span class="sh_symbol">.</span>out<span class="sh_symbol">.</span><span class="sh_function">println</span><span class="sh_symbol">(</span><span class="sh_string">"你好"</span><span class="sh_symbol">);</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">return</span> <span class="sh_string">"jsp/hello"</span><span class="sh_symbol">;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_cbracket">}</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">	@RequestMapping("/nihao.do")
	public String nihao() {
		System.out.println("你好");
		return "jsp/hello";
	}
</pre></div></div>
      <p>部署项目并启动Tomcat，浏览器访问http://localhost:8088/Spring05/demo/nihao.do，控制台输出结果如下图：</p>
      <div class="image">
        <img src="./CASE_files/image010.png">
        <p>图-10</p>
      </div>
      <h3>5.4 完整代码</h3>
      <p>FirstInterceptor完整代码如下：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap" style="display: none;"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#">pop-up</a></pre></div><pre class="hide sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li>package com<span class="sh_symbol">.</span>tarena<span class="sh_symbol">.</span>web<span class="sh_symbol">;</span></li><li><span style="display:none;">&nbsp;</span></li><li>import javax<span class="sh_symbol">.</span>servlet<span class="sh_symbol">.</span>http<span class="sh_symbol">.</span>HttpServletRequest<span class="sh_symbol">;</span></li><li>import javax<span class="sh_symbol">.</span>servlet<span class="sh_symbol">.</span>http<span class="sh_symbol">.</span>HttpServletResponse<span class="sh_symbol">;</span></li><li><span style="display:none;">&nbsp;</span></li><li>import org<span class="sh_symbol">.</span>springframework<span class="sh_symbol">.</span>web<span class="sh_symbol">.</span>servlet<span class="sh_symbol">.</span>HandlerInterceptor<span class="sh_symbol">;</span></li><li>import org<span class="sh_symbol">.</span>springframework<span class="sh_symbol">.</span>web<span class="sh_symbol">.</span>servlet<span class="sh_symbol">.</span>ModelAndView<span class="sh_symbol">;</span></li><li><span style="display:none;">&nbsp;</span></li><li><span class="sh_keyword">public</span> <span class="sh_keyword">class</span> FirstInterceptor <span class="sh_keyword">implements</span> HandlerInterceptor <span class="sh_cbracket">{</span></li><li><span style="display:none;">&nbsp;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;@Override</li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">public</span> void <span class="sh_function">afterCompletion</span><span class="sh_symbol">(</span>HttpServletRequest arg0<span class="sh_symbol">,</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;HttpServletResponse arg1<span class="sh_symbol">,</span> <span class="sh_predef_func">Object</span> arg2<span class="sh_symbol">,</span> Exception arg3<span class="sh_symbol">)</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">throws</span> Exception <span class="sh_cbracket">{</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System<span class="sh_symbol">.</span>out<span class="sh_symbol">.</span><span class="sh_function">println</span><span class="sh_symbol">(</span><span class="sh_string">"afterCompletion"</span><span class="sh_symbol">);</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_cbracket">}</span></li><li><span style="display:none;">&nbsp;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;@Override</li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">public</span> void <span class="sh_function">postHandle</span><span class="sh_symbol">(</span>HttpServletRequest arg0<span class="sh_symbol">,</span> HttpServletResponse arg1<span class="sh_symbol">,</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_predef_func">Object</span> arg2<span class="sh_symbol">,</span> ModelAndView arg3<span class="sh_symbol">)</span> <span class="sh_keyword">throws</span> Exception <span class="sh_cbracket">{</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System<span class="sh_symbol">.</span>out<span class="sh_symbol">.</span><span class="sh_function">println</span><span class="sh_symbol">(</span><span class="sh_string">"postHandle"</span><span class="sh_symbol">);</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_cbracket">}</span></li><li><span style="display:none;">&nbsp;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;@Override</li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">public</span> boolean <span class="sh_function">preHandle</span><span class="sh_symbol">(</span>HttpServletRequest arg0<span class="sh_symbol">,</span> HttpServletResponse arg1<span class="sh_symbol">,</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_predef_func">Object</span> arg2<span class="sh_symbol">)</span> <span class="sh_keyword">throws</span> Exception <span class="sh_cbracket">{</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System<span class="sh_symbol">.</span>out<span class="sh_symbol">.</span><span class="sh_function">println</span><span class="sh_symbol">(</span><span class="sh_string">"preHandle"</span><span class="sh_symbol">);</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">return</span> <span class="sh_keyword">true</span><span class="sh_symbol">;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_cbracket">}</span></li><li><span style="display:none;">&nbsp;</span></li><li><span class="sh_cbracket">}</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">package com.tarena.web;

import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

import org.springframework.web.servlet.HandlerInterceptor;
import org.springframework.web.servlet.ModelAndView;

public class FirstInterceptor implements HandlerInterceptor {

	@Override
	public void afterCompletion(HttpServletRequest arg0,
			HttpServletResponse arg1, Object arg2, Exception arg3)
			throws Exception {
		System.out.println("afterCompletion");
	}

	@Override
	public void postHandle(HttpServletRequest arg0, HttpServletResponse arg1,
			Object arg2, ModelAndView arg3) throws Exception {
		System.out.println("postHandle");
	}

	@Override
	public boolean preHandle(HttpServletRequest arg0, HttpServletResponse arg1,
			Object arg2) throws Exception {
		System.out.println("preHandle");
		return true;
	}

}
</pre><div class="sh_sourceCode snippet-hide"><pre><a href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#" class="snippet-revealed snippet-toggle sh_url">隐藏</a></pre></div></div><div class="snippet-reveal sh_acid snippet-wrap"><pre class="sh_sourceCode"><a href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#" class="snippet-toggle sh_url">代码</a></pre></div></div>
      <p>spring-mvc.xml完整代码如下：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap" style="display: none;"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#">pop-up</a></pre></div><pre class="hide sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">&lt;?</span>xml version<span class="sh_symbol">=</span><span class="sh_string">"1.0"</span> encoding<span class="sh_symbol">=</span><span class="sh_string">"UTF-8"</span><span class="sh_symbol">?&gt;</span></li><li><span class="sh_symbol">&lt;</span>beans xmlns<span class="sh_symbol">=</span><span class="sh_string">"http://www.springframework.org/schema/beans"</span> </li><li>&nbsp;&nbsp;&nbsp;&nbsp;xmlns<span class="sh_symbol">:</span>xsi<span class="sh_symbol">=</span><span class="sh_string">"http://www.w3.org/2001/XMLSchema-instance"</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;xmlns<span class="sh_symbol">:</span>context<span class="sh_symbol">=</span><span class="sh_string">"http://www.springframework.org/schema/context"</span> </li><li>&nbsp;&nbsp;&nbsp;&nbsp;xmlns<span class="sh_symbol">:</span>jdbc<span class="sh_symbol">=</span><span class="sh_string">"http://www.springframework.org/schema/jdbc"</span>  </li><li>&nbsp;&nbsp;&nbsp;&nbsp;xmlns<span class="sh_symbol">:</span>jee<span class="sh_symbol">=</span><span class="sh_string">"http://www.springframework.org/schema/jee"</span> </li><li>&nbsp;&nbsp;&nbsp;&nbsp;xmlns<span class="sh_symbol">:</span>tx<span class="sh_symbol">=</span><span class="sh_string">"http://www.springframework.org/schema/tx"</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;xmlns<span class="sh_symbol">:</span>aop<span class="sh_symbol">=</span><span class="sh_string">"http://www.springframework.org/schema/aop"</span> </li><li>&nbsp;&nbsp;&nbsp;&nbsp;xmlns<span class="sh_symbol">:</span>mvc<span class="sh_symbol">=</span><span class="sh_string">"http://www.springframework.org/schema/mvc"</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;xmlns<span class="sh_symbol">:</span>util<span class="sh_symbol">=</span><span class="sh_string">"http://www.springframework.org/schema/util"</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;xmlns<span class="sh_symbol">:</span>jpa<span class="sh_symbol">=</span><span class="sh_string">"http://www.springframework.org/schema/data/jpa"</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;xsi<span class="sh_symbol">:</span>schemaLocation<span class="sh_symbol">=</span><span class="sh_string">"</span></li><li><span class="sh_string">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.2.xsd</span></li><li><span class="sh_string">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.2.xsd</span></li><li><span class="sh_string">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http://www.springframework.org/schema/jdbc http://www.springframework.org/schema/jdbc/spring-jdbc-3.2.xsd</span></li><li><span class="sh_string">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http://www.springframework.org/schema/jee http://www.springframework.org/schema/jee/spring-jee-3.2.xsd</span></li><li><span class="sh_string">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.2.xsd</span></li><li><span class="sh_string">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http://www.springframework.org/schema/data/jpa http://www.springframework.org/schema/data/jpa/spring-jpa-1.3.xsd</span></li><li><span class="sh_string">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-3.2.xsd</span></li><li><span class="sh_string">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.2.xsd</span></li><li><span class="sh_string">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-3.2.xsd"</span><span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;!--</span> 开启注解扫描 <span class="sh_symbol">--&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>context<span class="sh_symbol">:</span>component<span class="sh_symbol">-</span>scan base<span class="sh_symbol">-</span>package<span class="sh_symbol">=</span><span class="sh_string">"com.tarena"</span><span class="sh_symbol">/&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;!--</span> 开启MVC注解扫描 <span class="sh_symbol">--&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>mvc<span class="sh_symbol">:</span>annotation<span class="sh_symbol">-</span><span class="sh_normal">driven</span><span class="sh_symbol">/&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;!--</span> 定义视图解析器ViewResolver <span class="sh_symbol">--&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>bean id<span class="sh_symbol">=</span><span class="sh_string">"viewResolver"</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">class</span><span class="sh_symbol">=</span><span class="sh_string">"org.springframework.web.servlet.view.InternalResourceViewResolver"</span><span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>property name<span class="sh_symbol">=</span><span class="sh_string">"prefix"</span> value<span class="sh_symbol">=</span><span class="sh_string">"/WEB-INF/"</span><span class="sh_symbol">/&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>property name<span class="sh_symbol">=</span><span class="sh_string">"suffix"</span> value<span class="sh_symbol">=</span><span class="sh_string">".jsp"</span><span class="sh_symbol">/&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>bean<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;!--</span> 处理系统异常 <span class="sh_symbol">--&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>bean <span class="sh_keyword">class</span><span class="sh_symbol">=</span><span class="sh_string">"org.springframework.web.servlet.handler.SimpleMappingExceptionResolver"</span><span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>property name<span class="sh_symbol">=</span><span class="sh_string">"exceptionMappings"</span><span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>props<span class="sh_symbol">&gt;</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>prop key<span class="sh_symbol">=</span><span class="sh_string">"java.lang.Exception"</span><span class="sh_symbol">&gt;</span><span class="sh_normal">jsp</span><span class="sh_symbol">/</span>error<span class="sh_symbol">&lt;/</span>prop<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>props<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>property<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>bean<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;!--</span> 拦截器 <span class="sh_symbol">--&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>mvc<span class="sh_symbol">:</span>interceptors<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>mvc<span class="sh_symbol">:</span>interceptor<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>mvc<span class="sh_symbol">:</span>mapping path<span class="sh_symbol">=</span><span class="sh_string">"/**"</span><span class="sh_symbol">/&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>bean <span class="sh_keyword">class</span><span class="sh_symbol">=</span><span class="sh_string">"com.tarena.web.FirstInterceptor"</span><span class="sh_symbol">/&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>mvc<span class="sh_symbol">:</span>interceptor<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>mvc<span class="sh_symbol">:</span>interceptors<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;</li><li><span class="sh_symbol">&lt;/</span>beans<span class="sh_symbol">&gt;</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;beans xmlns="http://www.springframework.org/schema/beans" 
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xmlns:context="http://www.springframework.org/schema/context" 
	xmlns:jdbc="http://www.springframework.org/schema/jdbc"  
	xmlns:jee="http://www.springframework.org/schema/jee" 
	xmlns:tx="http://www.springframework.org/schema/tx"
	xmlns:aop="http://www.springframework.org/schema/aop" 
	xmlns:mvc="http://www.springframework.org/schema/mvc"
	xmlns:util="http://www.springframework.org/schema/util"
	xmlns:jpa="http://www.springframework.org/schema/data/jpa"
	xsi:schemaLocation="
		http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.2.xsd
		http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.2.xsd
		http://www.springframework.org/schema/jdbc http://www.springframework.org/schema/jdbc/spring-jdbc-3.2.xsd
		http://www.springframework.org/schema/jee http://www.springframework.org/schema/jee/spring-jee-3.2.xsd
		http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.2.xsd
		http://www.springframework.org/schema/data/jpa http://www.springframework.org/schema/data/jpa/spring-jpa-1.3.xsd
		http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-3.2.xsd
		http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.2.xsd
		http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-3.2.xsd"&gt;
	
	&lt;!-- 开启注解扫描 --&gt;
	&lt;context:component-scan base-package="com.tarena"/&gt;
	
	&lt;!-- 开启MVC注解扫描 --&gt;
	&lt;mvc:annotation-driven/&gt;
	
	&lt;!-- 定义视图解析器ViewResolver --&gt;
	&lt;bean id="viewResolver"
		class="org.springframework.web.servlet.view.InternalResourceViewResolver"&gt;
		&lt;property name="prefix" value="/WEB-INF/"/&gt;
		&lt;property name="suffix" value=".jsp"/&gt;
	&lt;/bean&gt;
	
	&lt;!-- 处理系统异常 --&gt;
	&lt;bean class="org.springframework.web.servlet.handler.SimpleMappingExceptionResolver"&gt;
		&lt;property name="exceptionMappings"&gt;
	&lt;props&gt;		
	&lt;prop key="java.lang.Exception"&gt;jsp/error&lt;/prop&gt;
	&lt;/props&gt;
	&lt;/property&gt;
	&lt;/bean&gt;
	
	&lt;!-- 拦截器 --&gt;
	&lt;mvc:interceptors&gt;
		&lt;mvc:interceptor&gt;
			&lt;mvc:mapping path="/**"/&gt;
			&lt;bean class="com.tarena.web.FirstInterceptor"/&gt;
		&lt;/mvc:interceptor&gt;
	&lt;/mvc:interceptors&gt;
	
&lt;/beans&gt;
</pre><div class="sh_sourceCode snippet-hide"><pre><a href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#" class="snippet-revealed snippet-toggle sh_url">隐藏</a></pre></div></div><div class="snippet-reveal sh_acid snippet-wrap"><pre class="sh_sourceCode"><a href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#" class="snippet-toggle sh_url">代码</a></pre></div></div>
      <p>HelloController完整代码如下：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap" style="display: none;"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#">pop-up</a></pre></div><pre class="hide sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li>package com<span class="sh_symbol">.</span>tarena<span class="sh_symbol">.</span>web<span class="sh_symbol">;</span></li><li><span style="display:none;">&nbsp;</span></li><li>import java<span class="sh_symbol">.</span>io<span class="sh_symbol">.</span>Serializable<span class="sh_symbol">;</span></li><li>import javax<span class="sh_symbol">.</span>servlet<span class="sh_symbol">.</span>http<span class="sh_symbol">.</span>HttpServletRequest<span class="sh_symbol">;</span></li><li>import javax<span class="sh_symbol">.</span>servlet<span class="sh_symbol">.</span>http<span class="sh_symbol">.</span>HttpServletResponse<span class="sh_symbol">;</span></li><li>import org<span class="sh_symbol">.</span>springframework<span class="sh_symbol">.</span>stereotype<span class="sh_symbol">.</span>Controller<span class="sh_symbol">;</span></li><li>import org<span class="sh_symbol">.</span>springframework<span class="sh_symbol">.</span>web<span class="sh_symbol">.</span>bind<span class="sh_symbol">.</span>annotation<span class="sh_symbol">.</span>ExceptionHandler<span class="sh_symbol">;</span></li><li>import org<span class="sh_symbol">.</span>springframework<span class="sh_symbol">.</span>web<span class="sh_symbol">.</span>bind<span class="sh_symbol">.</span>annotation<span class="sh_symbol">.</span>RequestMapping<span class="sh_symbol">;</span></li><li><span style="display:none;">&nbsp;</span></li><li>@Controller</li><li>@<span class="sh_function">RequestMapping</span><span class="sh_symbol">(</span><span class="sh_string">"/demo"</span><span class="sh_symbol">)</span></li><li><span class="sh_keyword">public</span> <span class="sh_keyword">class</span> HelloController <span class="sh_keyword">implements</span> Serializable <span class="sh_cbracket">{</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;@ExceptionHandler</li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">public</span> <span class="sh_predef_func">String</span> <span class="sh_function">handleException</span><span class="sh_symbol">(</span>Exception e<span class="sh_symbol">,</span> </li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;HttpServletRequest request<span class="sh_symbol">,</span> HttpServletResponse response<span class="sh_symbol">)</span> </li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">throws</span> Exception <span class="sh_cbracket">{</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">if</span><span class="sh_symbol">(</span>e <span class="sh_keyword">instanceof</span> NumberFormatException<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;request<span class="sh_symbol">.</span><span class="sh_function">setAttribute</span><span class="sh_symbol">(</span><span class="sh_string">"message"</span><span class="sh_symbol">,</span> <span class="sh_string">"亲,请输入数字哦."</span><span class="sh_symbol">);</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">return</span> <span class="sh_string">"jsp/message"</span><span class="sh_symbol">;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_cbracket">}</span> <span class="sh_keyword">else</span> <span class="sh_cbracket">{</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">throw</span> e<span class="sh_symbol">;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_cbracket">}</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_cbracket">}</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;@<span class="sh_function">RequestMapping</span><span class="sh_symbol">(</span><span class="sh_string">"/hello.do"</span><span class="sh_symbol">)</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">public</span> <span class="sh_predef_func">String</span> <span class="sh_function">hello</span><span class="sh_symbol">()</span> <span class="sh_cbracket">{</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System<span class="sh_symbol">.</span>out<span class="sh_symbol">.</span><span class="sh_function">println</span><span class="sh_symbol">(</span><span class="sh_string">"hello"</span><span class="sh_symbol">);</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Integer<span class="sh_symbol">.</span><span class="sh_function">valueOf</span><span class="sh_symbol">(</span><span class="sh_string">"abc"</span><span class="sh_symbol">);</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">return</span> <span class="sh_string">"jsp/hello"</span><span class="sh_symbol">;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_cbracket">}</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;@<span class="sh_function">RequestMapping</span><span class="sh_symbol">(</span><span class="sh_string">"/hi.do"</span><span class="sh_symbol">)</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">public</span> <span class="sh_predef_func">String</span> <span class="sh_function">hi</span><span class="sh_symbol">()</span> <span class="sh_cbracket">{</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System<span class="sh_symbol">.</span>out<span class="sh_symbol">.</span><span class="sh_function">println</span><span class="sh_symbol">(</span><span class="sh_string">"hi"</span><span class="sh_symbol">);</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_predef_func">String</span> name <span class="sh_symbol">=</span> <span class="sh_string">"abc"</span><span class="sh_symbol">;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;name<span class="sh_symbol">.</span><span class="sh_function">charAt</span><span class="sh_symbol">(</span><span class="sh_number">9</span><span class="sh_symbol">);</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">return</span> <span class="sh_string">"jsp/hello"</span><span class="sh_symbol">;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_cbracket">}</span></li><li><span style="display:none;">&nbsp;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;@<span class="sh_function">RequestMapping</span><span class="sh_symbol">(</span><span class="sh_string">"/nihao.do"</span><span class="sh_symbol">)</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">public</span> <span class="sh_predef_func">String</span> <span class="sh_function">nihao</span><span class="sh_symbol">()</span> <span class="sh_cbracket">{</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System<span class="sh_symbol">.</span>out<span class="sh_symbol">.</span><span class="sh_function">println</span><span class="sh_symbol">(</span><span class="sh_string">"你好"</span><span class="sh_symbol">);</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">return</span> <span class="sh_string">"jsp/hello"</span><span class="sh_symbol">;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_cbracket">}</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;</li><li><span class="sh_cbracket">}</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">package com.tarena.web;

import java.io.Serializable;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.ExceptionHandler;
import org.springframework.web.bind.annotation.RequestMapping;

@Controller
@RequestMapping("/demo")
public class HelloController implements Serializable {
	
	@ExceptionHandler
	public String handleException(Exception e, 
		HttpServletRequest request, HttpServletResponse response) 
		throws Exception {
		if(e instanceof NumberFormatException) {
			request.setAttribute("message", "亲,请输入数字哦.");
			return "jsp/message";
		} else {
			throw e;
		}
	}
	
	@RequestMapping("/hello.do")
	public String hello() {
		System.out.println("hello");
		Integer.valueOf("abc");
		return "jsp/hello";
	}
	
	@RequestMapping("/hi.do")
	public String hi() {
		System.out.println("hi");
		String name = "abc";
		name.charAt(9);
		return "jsp/hello";
	}

	@RequestMapping("/nihao.do")
	public String nihao() {
		System.out.println("你好");
		return "jsp/hello";
	}
	
}
</pre><div class="sh_sourceCode snippet-hide"><pre><a href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#" class="snippet-revealed snippet-toggle sh_url">隐藏</a></pre></div></div><div class="snippet-reveal sh_acid snippet-wrap"><pre class="sh_sourceCode"><a href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#" class="snippet-toggle sh_url">代码</a></pre></div></div>
      <a name="case6">
      </a>
      <h2>6 登录检查</h2>
      <h3>6.1 问题</h3>
      <p>访问NETCTOSS资费等业务功能时，检查用户是否已经登录，若未登录则强制页面跳转至登录页面。</p>
      <h3>6.2 方案</h3>
      <p>使用拦截器，拦截除了登录之外的所有请求，并判断session中是否存在登录信息，若不存在则重定向到登录页面。</p>
      <h3>6.3 步骤</h3>
      <p class="number">步骤一：创建登录检查拦截器</p>
      <p>创建登录检查拦截器LoginInterceptor，代码如下：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li>package com<span class="sh_symbol">.</span>tarena<span class="sh_symbol">.</span>web<span class="sh_symbol">;</span></li><li><span style="display:none;">&nbsp;</span></li><li>import javax<span class="sh_symbol">.</span>servlet<span class="sh_symbol">.</span>http<span class="sh_symbol">.</span>HttpServletRequest<span class="sh_symbol">;</span></li><li>import javax<span class="sh_symbol">.</span>servlet<span class="sh_symbol">.</span>http<span class="sh_symbol">.</span>HttpServletResponse<span class="sh_symbol">;</span></li><li><span style="display:none;">&nbsp;</span></li><li>import org<span class="sh_symbol">.</span>springframework<span class="sh_symbol">.</span>web<span class="sh_symbol">.</span>servlet<span class="sh_symbol">.</span>HandlerInterceptor<span class="sh_symbol">;</span></li><li>import org<span class="sh_symbol">.</span>springframework<span class="sh_symbol">.</span>web<span class="sh_symbol">.</span>servlet<span class="sh_symbol">.</span>ModelAndView<span class="sh_symbol">;</span></li><li><span style="display:none;">&nbsp;</span></li><li>import com<span class="sh_symbol">.</span>tarena<span class="sh_symbol">.</span>entity<span class="sh_symbol">.</span>Admin<span class="sh_symbol">;</span></li><li><span style="display:none;">&nbsp;</span></li><li><span class="sh_keyword">public</span> <span class="sh_keyword">class</span> LoginInterceptor <span class="sh_keyword">implements</span> HandlerInterceptor <span class="sh_cbracket">{</span></li><li><span style="display:none;">&nbsp;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;@Override</li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">public</span> void <span class="sh_function">afterCompletion</span><span class="sh_symbol">(</span>HttpServletRequest arg0<span class="sh_symbol">,</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;HttpServletResponse arg1<span class="sh_symbol">,</span> <span class="sh_predef_func">Object</span> arg2<span class="sh_symbol">,</span> Exception arg3<span class="sh_symbol">)</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">throws</span> Exception <span class="sh_cbracket">{</span></li><li><span style="display:none;">&nbsp;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_cbracket">}</span></li><li><span style="display:none;">&nbsp;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;@Override</li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">public</span> void <span class="sh_function">postHandle</span><span class="sh_symbol">(</span>HttpServletRequest arg0<span class="sh_symbol">,</span> HttpServletResponse arg1<span class="sh_symbol">,</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_predef_func">Object</span> arg2<span class="sh_symbol">,</span> ModelAndView arg3<span class="sh_symbol">)</span> <span class="sh_keyword">throws</span> Exception <span class="sh_cbracket">{</span></li><li><span style="display:none;">&nbsp;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_cbracket">}</span></li><li><span style="display:none;">&nbsp;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;@Override</li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">public</span> boolean <span class="sh_function">preHandle</span><span class="sh_symbol">(</span>HttpServletRequest request<span class="sh_symbol">,</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;HttpServletResponse response<span class="sh_symbol">,</span> <span class="sh_predef_func">Object</span> arg2<span class="sh_symbol">)</span> <span class="sh_keyword">throws</span> Exception <span class="sh_cbracket">{</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Admin admin <span class="sh_symbol">=</span> <span class="sh_symbol">(</span>Admin<span class="sh_symbol">)</span> </li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;request<span class="sh_symbol">.</span><span class="sh_function">getSession</span><span class="sh_symbol">().</span><span class="sh_function">getAttribute</span><span class="sh_symbol">(</span><span class="sh_string">"admin"</span><span class="sh_symbol">);</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">if</span><span class="sh_symbol">(</span>admin <span class="sh_symbol">==</span> <span class="sh_keyword">null</span><span class="sh_symbol">)</span> <span class="sh_cbracket">{</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;response<span class="sh_symbol">.</span><span class="sh_function">sendRedirect</span><span class="sh_symbol">(</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;request<span class="sh_symbol">.</span><span class="sh_function">getContextPath</span><span class="sh_symbol">()</span> <span class="sh_symbol">+</span> <span class="sh_string">"/login/toLogin.do"</span><span class="sh_symbol">);</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">return</span> <span class="sh_keyword">false</span><span class="sh_symbol">;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_cbracket">}</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">return</span> <span class="sh_keyword">true</span><span class="sh_symbol">;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_cbracket">}</span></li><li><span style="display:none;">&nbsp;</span></li><li><span class="sh_cbracket">}</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">package com.tarena.web;

import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

import org.springframework.web.servlet.HandlerInterceptor;
import org.springframework.web.servlet.ModelAndView;

import com.tarena.entity.Admin;

public class LoginInterceptor implements HandlerInterceptor {

	@Override
	public void afterCompletion(HttpServletRequest arg0,
			HttpServletResponse arg1, Object arg2, Exception arg3)
			throws Exception {

	}

	@Override
	public void postHandle(HttpServletRequest arg0, HttpServletResponse arg1,
			Object arg2, ModelAndView arg3) throws Exception {

	}

	@Override
	public boolean preHandle(HttpServletRequest request,
			HttpServletResponse response, Object arg2) throws Exception {
		Admin admin = (Admin) 
			request.getSession().getAttribute("admin");
		if(admin == null) {
			response.sendRedirect(
				request.getContextPath() + "/login/toLogin.do");
			return false;
		}
		return true;
	}

}
</pre></div></div>
      <p class="number">步骤二：注册拦截器</p>
      <p>在applicationContext.xml中注册该拦截器，追加代码如下：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;!--</span>拦截器 <span class="sh_symbol">--&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>mvc<span class="sh_symbol">:</span>interceptors<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;!--</span>登录检查拦截器 <span class="sh_symbol">--&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>mvc<span class="sh_symbol">:</span>interceptor<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>mvc<span class="sh_symbol">:</span>mapping path<span class="sh_symbol">=</span><span class="sh_string">"/**"</span><span class="sh_symbol">/&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>mvc<span class="sh_symbol">:</span>exclude<span class="sh_symbol">-</span>mapping path<span class="sh_symbol">=</span><span class="sh_string">"/login/toLogin.do"</span><span class="sh_symbol">/&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>mvc<span class="sh_symbol">:</span>exclude<span class="sh_symbol">-</span>mapping path<span class="sh_symbol">=</span><span class="sh_string">"/login/checkLogin.do"</span><span class="sh_symbol">/&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>bean <span class="sh_keyword">class</span><span class="sh_symbol">=</span><span class="sh_string">"com.tarena.web.LoginInterceptor"</span><span class="sh_symbol">/&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>mvc<span class="sh_symbol">:</span>interceptor<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>mvc<span class="sh_symbol">:</span>interceptors<span class="sh_symbol">&gt;</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">	&lt;!--拦截器 --&gt;
	&lt;mvc:interceptors&gt;
		&lt;!--登录检查拦截器 --&gt;
		&lt;mvc:interceptor&gt;
			&lt;mvc:mapping path="/**"/&gt;
			&lt;mvc:exclude-mapping path="/login/toLogin.do"/&gt;
			&lt;mvc:exclude-mapping path="/login/checkLogin.do"/&gt;
			&lt;bean class="com.tarena.web.LoginInterceptor"/&gt;
		&lt;/mvc:interceptor&gt;
	&lt;/mvc:interceptors&gt;
</pre></div></div>
      <p class="number">步骤三：测试</p>
      <p>部署NETCTOSS项目并启动Tomcat，浏览器输入地址访问资费列表功能，浏览器显示结果如下图：</p>
      <div class="image">
        <img src="./CASE_files/image011.png">
        <p>图-11</p>
      </div>
      <p>输入正确的账号、密码，登录NETCTOSS，然后再次输入地址访问资费列表功能，浏览器显示结果如下图：</p>
      <div class="image">
        <img src="./CASE_files/image012.png">
        <p>图-12</p>
      </div>
      <h3>6.4 完整代码</h3>
      <p>LoginInterceptor完整代码如下：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap" style="display: none;"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#">pop-up</a></pre></div><pre class="hide sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li>package com<span class="sh_symbol">.</span>tarena<span class="sh_symbol">.</span>web<span class="sh_symbol">;</span></li><li><span style="display:none;">&nbsp;</span></li><li>import javax<span class="sh_symbol">.</span>servlet<span class="sh_symbol">.</span>http<span class="sh_symbol">.</span>HttpServletRequest<span class="sh_symbol">;</span></li><li>import javax<span class="sh_symbol">.</span>servlet<span class="sh_symbol">.</span>http<span class="sh_symbol">.</span>HttpServletResponse<span class="sh_symbol">;</span></li><li><span style="display:none;">&nbsp;</span></li><li>import org<span class="sh_symbol">.</span>springframework<span class="sh_symbol">.</span>web<span class="sh_symbol">.</span>servlet<span class="sh_symbol">.</span>HandlerInterceptor<span class="sh_symbol">;</span></li><li>import org<span class="sh_symbol">.</span>springframework<span class="sh_symbol">.</span>web<span class="sh_symbol">.</span>servlet<span class="sh_symbol">.</span>ModelAndView<span class="sh_symbol">;</span></li><li><span style="display:none;">&nbsp;</span></li><li>import com<span class="sh_symbol">.</span>tarena<span class="sh_symbol">.</span>entity<span class="sh_symbol">.</span>Admin<span class="sh_symbol">;</span></li><li><span style="display:none;">&nbsp;</span></li><li><span class="sh_keyword">public</span> <span class="sh_keyword">class</span> LoginInterceptor <span class="sh_keyword">implements</span> HandlerInterceptor <span class="sh_cbracket">{</span></li><li><span style="display:none;">&nbsp;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;@Override</li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">public</span> void <span class="sh_function">afterCompletion</span><span class="sh_symbol">(</span>HttpServletRequest arg0<span class="sh_symbol">,</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;HttpServletResponse arg1<span class="sh_symbol">,</span> <span class="sh_predef_func">Object</span> arg2<span class="sh_symbol">,</span> Exception arg3<span class="sh_symbol">)</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">throws</span> Exception <span class="sh_cbracket">{</span></li><li><span style="display:none;">&nbsp;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_cbracket">}</span></li><li><span style="display:none;">&nbsp;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;@Override</li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">public</span> void <span class="sh_function">postHandle</span><span class="sh_symbol">(</span>HttpServletRequest arg0<span class="sh_symbol">,</span> HttpServletResponse arg1<span class="sh_symbol">,</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_predef_func">Object</span> arg2<span class="sh_symbol">,</span> ModelAndView arg3<span class="sh_symbol">)</span> <span class="sh_keyword">throws</span> Exception <span class="sh_cbracket">{</span></li><li><span style="display:none;">&nbsp;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_cbracket">}</span></li><li><span style="display:none;">&nbsp;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;@Override</li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">public</span> boolean <span class="sh_function">preHandle</span><span class="sh_symbol">(</span>HttpServletRequest request<span class="sh_symbol">,</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;HttpServletResponse response<span class="sh_symbol">,</span> <span class="sh_predef_func">Object</span> arg2<span class="sh_symbol">)</span> <span class="sh_keyword">throws</span> Exception <span class="sh_cbracket">{</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Admin admin <span class="sh_symbol">=</span> <span class="sh_symbol">(</span>Admin<span class="sh_symbol">)</span> </li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;request<span class="sh_symbol">.</span><span class="sh_function">getSession</span><span class="sh_symbol">().</span><span class="sh_function">getAttribute</span><span class="sh_symbol">(</span><span class="sh_string">"admin"</span><span class="sh_symbol">);</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">if</span><span class="sh_symbol">(</span>admin <span class="sh_symbol">==</span> <span class="sh_keyword">null</span><span class="sh_symbol">)</span> <span class="sh_cbracket">{</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;response<span class="sh_symbol">.</span><span class="sh_function">sendRedirect</span><span class="sh_symbol">(</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;request<span class="sh_symbol">.</span><span class="sh_function">getContextPath</span><span class="sh_symbol">()</span> <span class="sh_symbol">+</span> <span class="sh_string">"/login/toLogin.do"</span><span class="sh_symbol">);</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">return</span> <span class="sh_keyword">false</span><span class="sh_symbol">;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_cbracket">}</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">return</span> <span class="sh_keyword">true</span><span class="sh_symbol">;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_cbracket">}</span></li><li><span style="display:none;">&nbsp;</span></li><li><span class="sh_cbracket">}</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">package com.tarena.web;

import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

import org.springframework.web.servlet.HandlerInterceptor;
import org.springframework.web.servlet.ModelAndView;

import com.tarena.entity.Admin;

public class LoginInterceptor implements HandlerInterceptor {

	@Override
	public void afterCompletion(HttpServletRequest arg0,
			HttpServletResponse arg1, Object arg2, Exception arg3)
			throws Exception {

	}

	@Override
	public void postHandle(HttpServletRequest arg0, HttpServletResponse arg1,
			Object arg2, ModelAndView arg3) throws Exception {

	}

	@Override
	public boolean preHandle(HttpServletRequest request,
			HttpServletResponse response, Object arg2) throws Exception {
		Admin admin = (Admin) 
			request.getSession().getAttribute("admin");
		if(admin == null) {
			response.sendRedirect(
				request.getContextPath() + "/login/toLogin.do");
			return false;
		}
		return true;
	}

}
</pre><div class="sh_sourceCode snippet-hide"><pre><a href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#" class="snippet-revealed snippet-toggle sh_url">隐藏</a></pre></div></div><div class="snippet-reveal sh_acid snippet-wrap"><pre class="sh_sourceCode"><a href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#" class="snippet-toggle sh_url">代码</a></pre></div></div>
      <p>applicationContext.xml完整代码如下：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap" style="display: none;"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#">pop-up</a></pre></div><pre class="hide sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">&lt;?</span>xml version<span class="sh_symbol">=</span><span class="sh_string">"1.0"</span> encoding<span class="sh_symbol">=</span><span class="sh_string">"UTF-8"</span><span class="sh_symbol">?&gt;</span></li><li><span class="sh_symbol">&lt;</span>beans xmlns<span class="sh_symbol">=</span><span class="sh_string">"http://www.springframework.org/schema/beans"</span> </li><li>&nbsp;&nbsp;&nbsp;&nbsp;xmlns<span class="sh_symbol">:</span>xsi<span class="sh_symbol">=</span><span class="sh_string">"http://www.w3.org/2001/XMLSchema-instance"</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;xmlns<span class="sh_symbol">:</span>context<span class="sh_symbol">=</span><span class="sh_string">"http://www.springframework.org/schema/context"</span> </li><li>&nbsp;&nbsp;&nbsp;&nbsp;xmlns<span class="sh_symbol">:</span>jdbc<span class="sh_symbol">=</span><span class="sh_string">"http://www.springframework.org/schema/jdbc"</span>  </li><li>&nbsp;&nbsp;&nbsp;&nbsp;xmlns<span class="sh_symbol">:</span>jee<span class="sh_symbol">=</span><span class="sh_string">"http://www.springframework.org/schema/jee"</span> </li><li>&nbsp;&nbsp;&nbsp;&nbsp;xmlns<span class="sh_symbol">:</span>tx<span class="sh_symbol">=</span><span class="sh_string">"http://www.springframework.org/schema/tx"</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;xmlns<span class="sh_symbol">:</span>aop<span class="sh_symbol">=</span><span class="sh_string">"http://www.springframework.org/schema/aop"</span> </li><li>&nbsp;&nbsp;&nbsp;&nbsp;xmlns<span class="sh_symbol">:</span>mvc<span class="sh_symbol">=</span><span class="sh_string">"http://www.springframework.org/schema/mvc"</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;xmlns<span class="sh_symbol">:</span>util<span class="sh_symbol">=</span><span class="sh_string">"http://www.springframework.org/schema/util"</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;xmlns<span class="sh_symbol">:</span>jpa<span class="sh_symbol">=</span><span class="sh_string">"http://www.springframework.org/schema/data/jpa"</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;xsi<span class="sh_symbol">:</span>schemaLocation<span class="sh_symbol">=</span><span class="sh_string">"</span></li><li><span class="sh_string">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.2.xsd</span></li><li><span class="sh_string">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.2.xsd</span></li><li><span class="sh_string">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http://www.springframework.org/schema/jdbc http://www.springframework.org/schema/jdbc/spring-jdbc-3.2.xsd</span></li><li><span class="sh_string">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http://www.springframework.org/schema/jee http://www.springframework.org/schema/jee/spring-jee-3.2.xsd</span></li><li><span class="sh_string">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.2.xsd</span></li><li><span class="sh_string">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http://www.springframework.org/schema/data/jpa http://www.springframework.org/schema/data/jpa/spring-jpa-1.3.xsd</span></li><li><span class="sh_string">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-3.2.xsd</span></li><li><span class="sh_string">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.2.xsd</span></li><li><span class="sh_string">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-3.2.xsd"</span><span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>util<span class="sh_symbol">:</span>properties id<span class="sh_symbol">=</span><span class="sh_string">"jdbc"</span> location<span class="sh_symbol">=</span><span class="sh_string">"classpath:jdbc.properties"</span><span class="sh_symbol">/&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;!--</span> 定义数据源 <span class="sh_symbol">--&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>bean id<span class="sh_symbol">=</span><span class="sh_string">"ds"</span> </li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">class</span><span class="sh_symbol">=</span><span class="sh_string">"org.apache.commons.dbcp.BasicDataSource"</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;destroy<span class="sh_symbol">-</span>method<span class="sh_symbol">=</span><span class="sh_string">"close"</span><span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>property name<span class="sh_symbol">=</span><span class="sh_string">"url"</span> value<span class="sh_symbol">=</span><span class="sh_string">"#{jdbc.url}"</span><span class="sh_symbol">/&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>property name<span class="sh_symbol">=</span><span class="sh_string">"driverClassName"</span> value<span class="sh_symbol">=</span><span class="sh_string">"#{jdbc.driver}"</span><span class="sh_symbol">/&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>property name<span class="sh_symbol">=</span><span class="sh_string">"username"</span> value<span class="sh_symbol">=</span><span class="sh_string">"#{jdbc.user}"</span><span class="sh_symbol">/&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>property name<span class="sh_symbol">=</span><span class="sh_string">"password"</span> value<span class="sh_symbol">=</span><span class="sh_string">"#{jdbc.password}"</span><span class="sh_symbol">/&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>bean<span class="sh_symbol">&gt;</span>&nbsp;&nbsp;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;!--</span> 开启注解扫描 <span class="sh_symbol">--&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>context<span class="sh_symbol">:</span>component<span class="sh_symbol">-</span>scan base<span class="sh_symbol">-</span>package<span class="sh_symbol">=</span><span class="sh_string">"com.tarena"</span><span class="sh_symbol">/&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;!--</span> 开启MVC注解扫描 <span class="sh_symbol">--&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>mvc<span class="sh_symbol">:</span>annotation<span class="sh_symbol">-</span><span class="sh_normal">driven</span><span class="sh_symbol">/&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;!--</span> 定义视图解析器ViewResolver <span class="sh_symbol">--&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>bean id<span class="sh_symbol">=</span><span class="sh_string">"viewResolver"</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_keyword">class</span><span class="sh_symbol">=</span><span class="sh_string">"org.springframework.web.servlet.view.InternalResourceViewResolver"</span><span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>property name<span class="sh_symbol">=</span><span class="sh_string">"prefix"</span> value<span class="sh_symbol">=</span><span class="sh_string">"/WEB-INF/"</span><span class="sh_symbol">/&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>property name<span class="sh_symbol">=</span><span class="sh_string">"suffix"</span> value<span class="sh_symbol">=</span><span class="sh_string">".jsp"</span><span class="sh_symbol">/&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>bean<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;!--</span> 处理系统异常 <span class="sh_symbol">--&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>bean <span class="sh_keyword">class</span><span class="sh_symbol">=</span><span class="sh_string">"org.springframework.web.servlet.handler.SimpleMappingExceptionResolver"</span><span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>property name<span class="sh_symbol">=</span><span class="sh_string">"exceptionMappings"</span><span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>props<span class="sh_symbol">&gt;</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>prop key<span class="sh_symbol">=</span><span class="sh_string">"java.lang.Exception"</span><span class="sh_symbol">&gt;</span><span class="sh_normal">main</span><span class="sh_symbol">/</span>error<span class="sh_symbol">&lt;/</span>prop<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>props<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>property<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>bean<span class="sh_symbol">&gt;</span>&nbsp;&nbsp;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;</li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;!--</span> 拦截器 <span class="sh_symbol">--&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>mvc<span class="sh_symbol">:</span>interceptors<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;!--</span> 登录检查拦截器 <span class="sh_symbol">--&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>mvc<span class="sh_symbol">:</span>interceptor<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>mvc<span class="sh_symbol">:</span>mapping path<span class="sh_symbol">=</span><span class="sh_string">"/**"</span><span class="sh_symbol">/&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>mvc<span class="sh_symbol">:</span>exclude<span class="sh_symbol">-</span>mapping path<span class="sh_symbol">=</span><span class="sh_string">"/login/toLogin.do"</span><span class="sh_symbol">/&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>mvc<span class="sh_symbol">:</span>exclude<span class="sh_symbol">-</span>mapping path<span class="sh_symbol">=</span><span class="sh_string">"/login/checkLogin.do"</span><span class="sh_symbol">/&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;</span>bean <span class="sh_keyword">class</span><span class="sh_symbol">=</span><span class="sh_string">"com.tarena.web.LoginInterceptor"</span><span class="sh_symbol">/&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>mvc<span class="sh_symbol">:</span>interceptor<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_symbol">&lt;/</span>mvc<span class="sh_symbol">:</span>interceptors<span class="sh_symbol">&gt;</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;</li><li><span class="sh_symbol">&lt;/</span>beans<span class="sh_symbol">&gt;</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;beans xmlns="http://www.springframework.org/schema/beans" 
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xmlns:context="http://www.springframework.org/schema/context" 
	xmlns:jdbc="http://www.springframework.org/schema/jdbc"  
	xmlns:jee="http://www.springframework.org/schema/jee" 
	xmlns:tx="http://www.springframework.org/schema/tx"
	xmlns:aop="http://www.springframework.org/schema/aop" 
	xmlns:mvc="http://www.springframework.org/schema/mvc"
	xmlns:util="http://www.springframework.org/schema/util"
	xmlns:jpa="http://www.springframework.org/schema/data/jpa"
	xsi:schemaLocation="
		http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.2.xsd
		http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.2.xsd
		http://www.springframework.org/schema/jdbc http://www.springframework.org/schema/jdbc/spring-jdbc-3.2.xsd
		http://www.springframework.org/schema/jee http://www.springframework.org/schema/jee/spring-jee-3.2.xsd
		http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.2.xsd
		http://www.springframework.org/schema/data/jpa http://www.springframework.org/schema/data/jpa/spring-jpa-1.3.xsd
		http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-3.2.xsd
		http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.2.xsd
		http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-3.2.xsd"&gt;
	
	&lt;util:properties id="jdbc" location="classpath:jdbc.properties"/&gt;
	
	&lt;!-- 定义数据源 --&gt;
	&lt;bean id="ds" 
		class="org.apache.commons.dbcp.BasicDataSource"
		destroy-method="close"&gt;
		&lt;property name="url" value="#{jdbc.url}"/&gt;
		&lt;property name="driverClassName" value="#{jdbc.driver}"/&gt;
		&lt;property name="username" value="#{jdbc.user}"/&gt;
		&lt;property name="password" value="#{jdbc.password}"/&gt;
	&lt;/bean&gt;	
	
	&lt;!-- 开启注解扫描 --&gt;
	&lt;context:component-scan base-package="com.tarena"/&gt;
	
	&lt;!-- 开启MVC注解扫描 --&gt;
	&lt;mvc:annotation-driven/&gt;
	
	&lt;!-- 定义视图解析器ViewResolver --&gt;
	&lt;bean id="viewResolver"
		class="org.springframework.web.servlet.view.InternalResourceViewResolver"&gt;
		&lt;property name="prefix" value="/WEB-INF/"/&gt;
		&lt;property name="suffix" value=".jsp"/&gt;
	&lt;/bean&gt;
	
	&lt;!-- 处理系统异常 --&gt;
	&lt;bean class="org.springframework.web.servlet.handler.SimpleMappingExceptionResolver"&gt;
		&lt;property name="exceptionMappings"&gt;
	&lt;props&gt;		
	&lt;prop key="java.lang.Exception"&gt;main/error&lt;/prop&gt;
	&lt;/props&gt;
	&lt;/property&gt;
	&lt;/bean&gt;	
	
	&lt;!-- 拦截器 --&gt;
	&lt;mvc:interceptors&gt;
		&lt;!-- 登录检查拦截器 --&gt;
		&lt;mvc:interceptor&gt;
			&lt;mvc:mapping path="/**"/&gt;
			&lt;mvc:exclude-mapping path="/login/toLogin.do"/&gt;
			&lt;mvc:exclude-mapping path="/login/checkLogin.do"/&gt;
			&lt;bean class="com.tarena.web.LoginInterceptor"/&gt;
		&lt;/mvc:interceptor&gt;
	&lt;/mvc:interceptors&gt;
	
&lt;/beans&gt;
</pre><div class="sh_sourceCode snippet-hide"><pre><a href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#" class="snippet-revealed snippet-toggle sh_url">隐藏</a></pre></div></div><div class="snippet-reveal sh_acid snippet-wrap"><pre class="sh_sourceCode"><a href="http://pdf7.tarena.com.cn/tts8_source/ttsPage/JAVA/JSD_V05/SPRINGMYBATIS01/DAY05/CASE/01/index.html#" class="snippet-toggle sh_url">代码</a></pre></div></div>
    </div>
  
<div style="position: static; width: 0px; height: 0px; border: none; padding: 0px; margin: 0px;"><div id="trans-tooltip"><div id="tip-left-top" style="background: url(&quot;chrome-extension://ikkepelhgbcgmhhmcmpfkjmchccjblkd/imgs/map/tip-left-top.png&quot;);"></div><div id="tip-top" style="background: url(&quot;chrome-extension://ikkepelhgbcgmhhmcmpfkjmchccjblkd/imgs/map/tip-top.png&quot;) repeat-x;"></div><div id="tip-right-top" style="background: url(&quot;chrome-extension://ikkepelhgbcgmhhmcmpfkjmchccjblkd/imgs/map/tip-right-top.png&quot;);"></div><div id="tip-right" style="background: url(&quot;chrome-extension://ikkepelhgbcgmhhmcmpfkjmchccjblkd/imgs/map/tip-right.png&quot;) repeat-y;"></div><div id="tip-right-bottom" style="background: url(&quot;chrome-extension://ikkepelhgbcgmhhmcmpfkjmchccjblkd/imgs/map/tip-right-bottom.png&quot;);"></div><div id="tip-bottom" style="background: url(&quot;chrome-extension://ikkepelhgbcgmhhmcmpfkjmchccjblkd/imgs/map/tip-bottom.png&quot;) repeat-x;"></div><div id="tip-left-bottom" style="background: url(&quot;chrome-extension://ikkepelhgbcgmhhmcmpfkjmchccjblkd/imgs/map/tip-left-bottom.png&quot;);"></div><div id="tip-left" style="background: url(&quot;chrome-extension://ikkepelhgbcgmhhmcmpfkjmchccjblkd/imgs/map/tip-left.png&quot;);"></div><div id="trans-content"></div></div><div id="tip-arrow-bottom" style="background: url(&quot;chrome-extension://ikkepelhgbcgmhhmcmpfkjmchccjblkd/imgs/map/tip-arrow-bottom.png&quot;);"></div><div id="tip-arrow-top" style="background: url(&quot;chrome-extension://ikkepelhgbcgmhhmcmpfkjmchccjblkd/imgs/map/tip-arrow-top.png&quot;);"></div></div></body></html>